(function(g){"object"===typeof exports&&"undefined"!==typeof module?module.exports=g():"function"===typeof define&&define.amd?define([],g):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).Terminal=g()})(function(){return function(){function g(n,f,c){function k(d,b){if(!f[d]){if(!n[d]){var a="function"==typeof require&&require;if(!b&&a)return a(d,!0);if(m)return m(d,!0);b=Error("Cannot find module '"+d+"'");throw b.code="MODULE_NOT_FOUND",
b;}b=f[d]={exports:{}};n[d][0].call(b.exports,function(a){return k(n[d][1][a]||a)},b,b.exports,g,n,f,c)}return f[d].exports}for(var m="function"==typeof require&&require,e=0;e<c.length;e++)k(c[e]);return k}return g}()({1:[function(g,n,f){var c=this&&this.__extends||function(){var a=function(l,b){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var l in b)b.hasOwnProperty(l)&&(a[l]=b[l])};return a(l,b)};return function(b,h){function l(){this.constructor=
b}a(b,h);b.prototype=null===h?Object.create(h):(l.prototype=h.prototype,new l)}}();Object.defineProperty(f,"__esModule",{value:!0});var k=g("./Strings"),m=g("./common/Platform"),e=g("./ui/RenderDebouncer"),d=g("./ui/Lifecycle");n=g("./common/Lifecycle");var b=g("./ui/ScreenDprMonitor");g=function(a){function l(l,q){var h=a.call(this)||this;h._terminal=l;h._dimensions=q;h._liveRegionLineCount=0;h._charsToConsume=[];h._charsToAnnounce="";h._accessibilityTreeRoot=document.createElement("div");h._accessibilityTreeRoot.classList.add("xterm-accessibility");
h._rowContainer=document.createElement("div");h._rowContainer.classList.add("xterm-accessibility-tree");h._rowElements=[];for(l=0;l<h._terminal.rows;l++)h._rowElements[l]=h._createAccessibilityTreeNode(),h._rowContainer.appendChild(h._rowElements[l]);h._topBoundaryFocusListener=function(a){return h._onBoundaryFocus(a,0)};h._bottomBoundaryFocusListener=function(a){return h._onBoundaryFocus(a,1)};h._rowElements[0].addEventListener("focus",h._topBoundaryFocusListener);h._rowElements[h._rowElements.length-
1].addEventListener("focus",h._bottomBoundaryFocusListener);h._refreshRowsDimensions();h._accessibilityTreeRoot.appendChild(h._rowContainer);h._renderRowsDebouncer=new e.RenderDebouncer(h._renderRows.bind(h));h._refreshRows();h._liveRegion=document.createElement("div");h._liveRegion.classList.add("live-region");h._liveRegion.setAttribute("aria-live","assertive");h._accessibilityTreeRoot.appendChild(h._liveRegion);h._terminal.element.insertAdjacentElement("afterbegin",h._accessibilityTreeRoot);h.register(h._renderRowsDebouncer);
h.register(h._terminal.onResize(function(a){return h._onResize(a.rows)}));h.register(h._terminal.onRender(function(a){return h._refreshRows(a.start,a.end)}));h.register(h._terminal.onScroll(function(){return h._refreshRows()}));h.register(h._terminal.addDisposableListener("a11y.char",function(a){return h._onChar(a)}));h.register(h._terminal.onLineFeed(function(){return h._onChar("\n")}));h.register(h._terminal.addDisposableListener("a11y.tab",function(a){return h._onTab(a)}));h.register(h._terminal.onKey(function(a){return h._onKey(a.key)}));
h.register(h._terminal.addDisposableListener("blur",function(){return h._clearLiveRegion()}));h._screenDprMonitor=new b.ScreenDprMonitor;h.register(h._screenDprMonitor);h._screenDprMonitor.setListener(function(){return h._refreshRowsDimensions()});h.register(d.addDisposableDomListener(window,"resize",function(){return h._refreshRowsDimensions()}));return h}c(l,a);l.prototype.dispose=function(){a.prototype.dispose.call(this);this._terminal.element.removeChild(this._accessibilityTreeRoot);this._rowElements.length=
0};l.prototype._onBoundaryFocus=function(a,b){var l=a.target,h=this._rowElements[0===b?1:this._rowElements.length-2];l.getAttribute("aria-posinset")!==(0===b?"1":""+this._terminal.buffer.lines.length)&&a.relatedTarget===h&&(0===b?(h=l,l=this._rowElements.pop(),this._rowContainer.removeChild(l)):(h=this._rowElements.shift(),this._rowContainer.removeChild(h)),h.removeEventListener("focus",this._topBoundaryFocusListener),l.removeEventListener("focus",this._bottomBoundaryFocusListener),0===b?(l=this._createAccessibilityTreeNode(),
this._rowElements.unshift(l),this._rowContainer.insertAdjacentElement("afterbegin",l)):(l=this._createAccessibilityTreeNode(),this._rowElements.push(l),this._rowContainer.appendChild(l)),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(0===b?-1:1),this._rowElements[0===b?1:this._rowElements.length-2].focus(),a.preventDefault(),a.stopImmediatePropagation())};
l.prototype._onResize=function(a){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(var l=this._rowContainer.children.length;l<this._terminal.rows;l++)this._rowElements[l]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[l]);for(;this._rowElements.length>a;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener);
this._refreshRowsDimensions()};l.prototype._createAccessibilityTreeNode=function(){var a=document.createElement("div");a.setAttribute("role","listitem");a.tabIndex=-1;this._refreshRowDimensions(a);return a};l.prototype._onTab=function(a){for(var l=0;l<a;l++)this._onChar(" ")};l.prototype._onChar=function(a){var l=this;21>this._liveRegionLineCount&&(0<this._charsToConsume.length?this._charsToConsume.shift()!==a&&(this._charsToAnnounce+=a):this._charsToAnnounce+=a,"\n"===a&&(this._liveRegionLineCount++,
21===this._liveRegionLineCount&&(this._liveRegion.textContent+=k.tooMuchOutput)),m.isMac&&this._liveRegion.textContent&&0<this._liveRegion.textContent.length&&!this._liveRegion.parentNode&&setTimeout(function(){l._accessibilityTreeRoot.appendChild(l._liveRegion)},0))};l.prototype._clearLiveRegion=function(){this._liveRegion.textContent="";this._liveRegionLineCount=0;m.isMac&&this._liveRegion.parentNode&&this._accessibilityTreeRoot.removeChild(this._liveRegion)};l.prototype._onKey=function(a){this._clearLiveRegion();
this._charsToConsume.push(a)};l.prototype._refreshRows=function(a,l){this._renderRowsDebouncer.refresh(a,l,this._terminal.rows)};l.prototype._renderRows=function(a,l){for(var b=this._terminal.buffer,h=b.lines.length.toString();a<=l;a++){var d=b.translateBufferLineToString(b.ydisp+a,!0),e=(b.ydisp+a+1).toString(),q=this._rowElements[a];q&&(q.textContent=0===d.length?k.blankLine:d,q.setAttribute("aria-posinset",e),q.setAttribute("aria-setsize",h))}this._announceCharacters()};l.prototype._refreshRowsDimensions=
function(){if(this._dimensions.actualCellHeight){this._rowElements.length!==this._terminal.rows&&this._onResize(this._terminal.rows);for(var a=0;a<this._terminal.rows;a++)this._refreshRowDimensions(this._rowElements[a])}};l.prototype.setDimensions=function(a){this._dimensions=a;this._refreshRowsDimensions()};l.prototype._refreshRowDimensions=function(a){a.style.height=this._dimensions.actualCellHeight+"px"};l.prototype._announceCharacters=function(){0!==this._charsToAnnounce.length&&(this._liveRegion.textContent+=
this._charsToAnnounce,this._charsToAnnounce="")};return l}(n.Disposable);f.AccessibilityManager=g},{"./Strings":16,"./common/Lifecycle":24,"./common/Platform":25,"./ui/Lifecycle":59,"./ui/RenderDebouncer":60,"./ui/ScreenDprMonitor":61}],2:[function(g,n,f){Object.defineProperty(f,"__esModule",{value:!0});var c=g("./common/CircularList"),k=g("./core/buffer/BufferLine"),m=g("./core/buffer/BufferReflow"),e=g("./core/buffer/Marker");f.MAX_BUFFER_SIZE=4294967295;g=function(){function b(a,l){this._terminal=
a;this._hasScrollback=l;this.savedCurAttrData=k.DEFAULT_ATTR_DATA.clone();this.markers=[];this._nullCell=k.CellData.fromCharData([0,k.NULL_CELL_CHAR,k.NULL_CELL_WIDTH,k.NULL_CELL_CODE]);this._whitespaceCell=k.CellData.fromCharData([0,k.WHITESPACE_CELL_CHAR,k.WHITESPACE_CELL_WIDTH,k.WHITESPACE_CELL_CODE]);this._cols=this._terminal.cols;this._rows=this._terminal.rows;this.clear()}b.prototype.getNullCell=function(a){a?(this._nullCell.fg=a.fg,this._nullCell.bg=a.bg):(this._nullCell.fg=0,this._nullCell.bg=
0);return this._nullCell};b.prototype.getWhitespaceCell=function(a){a?(this._whitespaceCell.fg=a.fg,this._whitespaceCell.bg=a.bg):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0);return this._whitespaceCell};b.prototype.getBlankLine=function(a,l){return new k.BufferLine(this._terminal.cols,this.getNullCell(a),l)};Object.defineProperty(b.prototype,"hasScrollback",{get:function(){return this._hasScrollback&&this.lines.maxLength>this._rows},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"isCursorInViewport",{get:function(){var a=this.ybase+this.y-this.ydisp;return 0<=a&&a<this._rows},enumerable:!0,configurable:!0});b.prototype._getCorrectBufferLength=function(a){if(!this._hasScrollback)return a;a+=this._terminal.options.scrollback;return a>f.MAX_BUFFER_SIZE?f.MAX_BUFFER_SIZE:a};b.prototype.fillViewportRows=function(a){if(0===this.lines.length){void 0===a&&(a=k.DEFAULT_ATTR_DATA);for(var l=this._rows;l--;)this.lines.push(this.getBlankLine(a))}};b.prototype.clear=function(){this.x=
this.y=this.ybase=this.ydisp=0;this.lines=new c.CircularList(this._getCorrectBufferLength(this._rows));this.scrollTop=0;this.scrollBottom=this._rows-1;this.setupTabStops()};b.prototype.resize=function(a,l){var b=this.getNullCell(k.DEFAULT_ATTR_DATA),d=this._getCorrectBufferLength(l);d>this.lines.maxLength&&(this.lines.maxLength=d);if(0<this.lines.length){if(this._cols<a)for(var e=0;e<this.lines.length;e++)this.lines.get(e).resize(a,b);e=0;if(this._rows<l)for(var m=this._rows;m<l;m++)this.lines.length<
l+this.ybase&&(0<this.ybase&&this.lines.length<=this.ybase+this.y+e+1?(this.ybase--,e++,0<this.ydisp&&this.ydisp--):this.lines.push(new k.BufferLine(a,b)));else for(m=this._rows;m>l;m--)this.lines.length>l+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));d<this.lines.maxLength&&(m=this.lines.length-d,0<m&&(this.lines.trimStart(m),this.ybase=Math.max(this.ybase-m,0),this.ydisp=Math.max(this.ydisp-m,0)),this.lines.maxLength=d);this.x=Math.min(this.x,a-
1);this.y=Math.min(this.y,l-1);e&&(this.y+=e);this.savedY=Math.min(this.savedY,l-1);this.savedX=Math.min(this.savedX,a-1);this.scrollTop=0}this.scrollBottom=l-1;if(this._isReflowEnabled&&(this._reflow(a,l),this._cols>a))for(e=0;e<this.lines.length;e++)this.lines.get(e).resize(a,b);this._cols=a;this._rows=l};Object.defineProperty(b.prototype,"_isReflowEnabled",{get:function(){return this._hasScrollback&&!this._terminal.options.windowsMode},enumerable:!0,configurable:!0});b.prototype._reflow=function(a,
l){this._cols!==a&&(a>this._cols?this._reflowLarger(a,l):this._reflowSmaller(a,l))};b.prototype._reflowLarger=function(a,l){var b=m.reflowLargerGetLinesToRemove(this.lines,this._cols,a,this.ybase+this.y,this.getNullCell(k.DEFAULT_ATTR_DATA));0<b.length&&(b=m.reflowLargerCreateNewLayout(this.lines,b),m.reflowLargerApplyNewLayout(this.lines,b.layout),this._reflowLargerAdjustViewport(a,l,b.countRemoved))};b.prototype._reflowLargerAdjustViewport=function(a,l,b){for(var h=this.getNullCell(k.DEFAULT_ATTR_DATA);0<
b--;)0===this.ybase?(0<this.y&&this.y--,this.lines.length<l&&this.lines.push(new k.BufferLine(a,h))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--)};b.prototype._reflowSmaller=function(a,l){for(var b=this.getNullCell(k.DEFAULT_ATTR_DATA),d=[],e=0,c=this.lines.length-1;0<=c;c--){var p=this.lines.get(c);if(!(!p||!p.isWrapped&&p.getTrimmedLength()<=a)){for(var t=[p];p.isWrapped&&0<c;)p=this.lines.get(--c),t.unshift(p);p=this.ybase+this.y;if(!(p>=c&&p<c+t.length)){var f=t[t.length-1].getTrimmedLength(),
y=m.reflowSmallerGetNewLineLengths(t,this._cols,a),g=y.length-t.length;var n=0===this.ybase&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+g):Math.max(0,this.lines.length-this.lines.maxLength+g);var z=[];for(p=0;p<g;p++){var B=this.getBlankLine(k.DEFAULT_ATTR_DATA,!0);z.push(B)}0<z.length&&(d.push({start:c+t.length+e,newLines:z}),e+=z.length);t.push.apply(t,z);p=y.length-1;z=y[p];0===z&&(p--,z=y[p]);for(B=t.length-g-1;0<=B;){var C=Math.min(f,z);t[p].copyCellsFrom(t[B],f-C,z-
C,C,!0);z-=C;0===z&&(p--,z=y[p]);f-=C;0===f&&(B--,f=m.getWrappedLineTrimmedLength(t,Math.max(B,0),this._cols))}for(p=0;p<t.length;p++)y[p]<a&&t[p].setCell(y[p],b);for(p=g-n;0<p--;)0===this.ybase?this.y<l-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+e)-l&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++)}}}if(0<d.length){a=[];b=[];for(p=0;p<this.lines.length;p++)b.push(this.lines.get(p));l=this.lines.length;c=l-1;t=0;y=d[t];
this.lines.length=Math.min(this.lines.maxLength,this.lines.length+e);g=0;for(p=Math.min(this.lines.maxLength-1,l+e-1);0<=p;p--)if(y&&y.start>c+g){for(n=y.newLines.length-1;0<=n;n--)this.lines.set(p--,y.newLines[n]);p++;a.push({index:c+1,amount:y.newLines.length});g+=y.newLines.length;y=d[++t]}else this.lines.set(p,b[c--]);d=0;for(p=a.length-1;0<=p;p--)a[p].index+=d,this.lines.onInsertEmitter.fire(a[p]),d+=a[p].amount;e=Math.max(0,l+e-this.lines.maxLength);0<e&&this.lines.onTrimEmitter.fire(e)}};b.prototype.stringIndexToBufferIndex=
function(a,b,h){for(void 0===h&&(h=!1);b;){var l=this.lines.get(a);if(!l)return[-1,-1];for(var d=h?l.getTrimmedLength():l.length,e=0;e<d;++e)if(l.get(e)[k.CHAR_DATA_WIDTH_INDEX]&&(b-=l.get(e)[k.CHAR_DATA_CHAR_INDEX].length||1),0>b)return[a,e];a++}return[a,0]};b.prototype.translateBufferLineToString=function(a,b,h,d){void 0===h&&(h=0);return(a=this.lines.get(a))?a.translateToString(b,h,d):""};b.prototype.getWrappedRangeForLine=function(a){for(var b=a;0<b&&this.lines.get(b).isWrapped;)b--;for(;a+1<
this.lines.length&&this.lines.get(a+1).isWrapped;)a++;return{first:b,last:a}};b.prototype.setupTabStops=function(a){null!==a&&void 0!==a?this.tabs[a]||(a=this.prevStop(a)):(this.tabs={},a=0);for(;a<this._cols;a+=this._terminal.options.tabStopWidth)this.tabs[a]=!0};b.prototype.prevStop=function(a){if(null===a||void 0===a)a=this.x;for(;!this.tabs[--a]&&0<a;);return a>=this._cols?this._cols-1:0>a?0:a};b.prototype.nextStop=function(a){if(null===a||void 0===a)a=this.x;for(;!this.tabs[++a]&&a<this._cols;);
return a>=this._cols?this._cols-1:0>a?0:a};b.prototype.addMarker=function(a){var b=this,h=new e.Marker(a);this.markers.push(h);h.register(this.lines.onTrim(function(a){h.line-=a;0>h.line&&h.dispose()}));h.register(this.lines.onInsert(function(a){h.line>=a.index&&(h.line+=a.amount)}));h.register(this.lines.onDelete(function(a){h.line>=a.index&&h.line<a.index+a.amount&&h.dispose();h.line>a.index&&(h.line-=a.amount)}));h.register(h.onDispose(function(){return b._removeMarker(h)}));return h};b.prototype._removeMarker=
function(a){this.markers.splice(this.markers.indexOf(a),1)};b.prototype.iterator=function(a,b,h,e,k){return new d(this,a,b,h,e,k)};return b}();f.Buffer=g;var d=function(){function b(a,b,h,d,e,k){void 0===h&&(h=0);void 0===d&&(d=a.lines.length);void 0===e&&(e=0);void 0===k&&(k=0);this._buffer=a;this._trimRight=b;this._startIndex=h;this._endIndex=d;this._startOverscan=e;this._endOverscan=k;0>this._startIndex&&(this._startIndex=0);this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length);
this._current=this._startIndex}b.prototype.hasNext=function(){return this._current<this._endIndex};b.prototype.next=function(){var a=this._buffer.getWrappedRangeForLine(this._current);a.first<this._startIndex-this._startOverscan&&(a.first=this._startIndex-this._startOverscan);a.last>this._endIndex+this._endOverscan&&(a.last=this._endIndex+this._endOverscan);a.first=Math.max(a.first,0);a.last=Math.min(a.last,this._buffer.lines.length);for(var b="",h=a.first;h<=a.last;++h)b+=this._buffer.translateBufferLineToString(h,
this._trimRight);this._current=a.last+1;return{range:a,content:b}};return b}();f.BufferStringIterator=d},{"./common/CircularList":20,"./core/buffer/BufferLine":29,"./core/buffer/BufferReflow":30,"./core/buffer/Marker":31}],3:[function(g,n,f){Object.defineProperty(f,"__esModule",{value:!0});var c=g("./Buffer"),k=g("./common/EventEmitter2");g=function(){function m(e){this._terminal=e;this._onBufferActivate=new k.EventEmitter2;this._normal=new c.Buffer(this._terminal,!0);this._normal.fillViewportRows();
this._alt=new c.Buffer(this._terminal,!1);this._activeBuffer=this._normal;this.setupTabStops()}Object.defineProperty(m.prototype,"onBufferActivate",{get:function(){return this._onBufferActivate.event},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"alt",{get:function(){return this._alt},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"active",{get:function(){return this._activeBuffer},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"normal",{get:function(){return this._normal},
enumerable:!0,configurable:!0});m.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))};m.prototype.activateAltBuffer=function(e){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(e),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,
inactiveBuffer:this._normal}))};m.prototype.resize=function(e,d){this._normal.resize(e,d);this._alt.resize(e,d)};m.prototype.setupTabStops=function(e){this._normal.setupTabStops(e);this._alt.setupTabStops(e)};return m}();f.BufferSet=g},{"./Buffer":2,"./common/EventEmitter2":23}],4:[function(g,n,f){Object.defineProperty(f,"__esModule",{value:!0});var c=g("./common/EventEmitter2");g=function(){function k(k,e){this._onCharSizeChanged=new c.EventEmitter2;this._document=k;this._parentElement=e;this._measureElement=
this._document.createElement("span");this._measureElement.classList.add("xterm-char-measure-element");this._measureElement.textContent="W";this._measureElement.setAttribute("aria-hidden","true");this._parentElement.appendChild(this._measureElement)}Object.defineProperty(k.prototype,"onCharSizeChanged",{get:function(){return this._onCharSizeChanged.event},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,
"height",{get:function(){return this._height},enumerable:!0,configurable:!0});k.prototype.measure=function(k){this._measureElement.style.fontFamily=k.fontFamily;this._measureElement.style.fontSize=k.fontSize+"px";k=this._measureElement.getBoundingClientRect();if(0!==k.width&&0!==k.height){var e=Math.ceil(k.height);if(this._width!==k.width||this._height!==e)this._width=k.width,this._height=e,this._onCharSizeChanged.fire()}};return k}();f.CharMeasure=g},{"./common/EventEmitter2":23}],5:[function(g,
n,f){Object.defineProperty(f,"__esModule",{value:!0});var c=g("./common/TypedArrayUtils");f.wcwidth=function(k){var m=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],
[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],
[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],
[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],e=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],d=k.control|0,b=new Uint8Array(65536);c.fill(b,1);b[0]=k.nul;c.fill(b,k.control,1,32);c.fill(b,k.control,127,160);c.fill(b,
2,4352,4448);b[9001]=2;b[9002]=2;c.fill(b,2,11904,42192);b[12351]=1;c.fill(b,2,44032,55204);c.fill(b,2,63744,64256);c.fill(b,2,65040,65050);c.fill(b,2,65072,65136);c.fill(b,2,65280,65377);c.fill(b,2,65504,65511);for(k=0;k<m.length;++k)c.fill(b,0,m[k][0],m[k][1]+1);return function(a){if(32>a)return d|0;if(127>a)return 1;if(65536>a)return b[a];b:{var l=0;var h=e.length-1;if(!(a<e[0][0]||a>e[h][1]))for(;h>=l;){var q=l+h>>1;if(a>e[q][1])l=q+1;else if(a<e[q][0])h=q-1;else{l=!0;break b}}l=!1}return l?0:
131072<=a&&196605>=a||196608<=a&&262141>=a?2:1}}({nul:0,control:0});f.getStringCellWidth=function(k){for(var m=0,e=k.length,d=0;d<e;++d){var b=k.charCodeAt(d);if(55296<=b&&56319>=b){if(++d>=e)return m+f.wcwidth(b);var a=k.charCodeAt(d);56320<=a&&57343>=a?b=1024*(b-55296)+a-56320+65536:m+=f.wcwidth(a)}m+=f.wcwidth(b)}return m}},{"./common/TypedArrayUtils":26}],6:[function(g,n,f){function c(e){return e.replace(/\r?\n/g,"\r")}function k(e,d){return d?"\u001b[200~"+e+"\u001b[201~":e}function m(e,d){var b=
d.screenElement.getBoundingClientRect(),a=e.clientX-b.left-10;e=e.clientY-b.top-10;d.textarea.style.position="absolute";d.textarea.style.width="20px";d.textarea.style.height="20px";d.textarea.style.left=a+"px";d.textarea.style.top=e+"px";d.textarea.style.zIndex="1000";d.textarea.focus();setTimeout(function(){d.textarea.style.position=null;d.textarea.style.width=null;d.textarea.style.height=null;d.textarea.style.left=null;d.textarea.style.top=null;d.textarea.style.zIndex=null},200)}Object.defineProperty(f,
"__esModule",{value:!0});f.prepareTextForTerminal=c;f.bracketTextForPaste=k;f.copyHandler=function(e,d,b){d.browser.isMSIE?window.clipboardData.setData("Text",b.selectionText):e.clipboardData.setData("text/plain",b.selectionText);e.preventDefault()};f.pasteHandler=function(e,d){e.stopPropagation();var b=function(a){a=c(a);a=k(a,d.bracketedPasteMode);d.handler(a);d.textarea.value="";d.emit("paste",a);d.cancel(e)};if(d.browser.isMSIE){if(window.clipboardData){var a=window.clipboardData.getData("Text");
b(a)}}else e.clipboardData&&(a=e.clipboardData.getData("text/plain"),b(a))};f.moveTextAreaUnderMouseCursor=m;f.rightClickHandler=function(e,d,b,a){m(e,d);a&&!b.isClickInSelection(e)&&b.selectWordAtCursor(e);d.textarea.value=b.selectionText;d.textarea.select()}},{}],7:[function(g,n,f){Object.defineProperty(f,"__esModule",{value:!0});g=function(){function c(k,m,e){this._textarea=k;this._compositionView=m;this._terminal=e;this._isSendingComposition=this._isComposing=!1;this._compositionPosition={start:null,
end:null}}c.prototype.compositionstart=function(){this._isComposing=!0;this._compositionPosition.start=this._textarea.value.length;this._compositionView.textContent="";this._compositionView.classList.add("active")};c.prototype.compositionupdate=function(k){var m=this;this._compositionView.textContent=k.data;this.updateCompositionElements();setTimeout(function(){m._compositionPosition.end=m._textarea.value.length},0)};c.prototype.compositionend=function(){this._finalizeComposition(!0)};c.prototype.keydown=
function(k){if(this._isComposing||this._isSendingComposition){if(229===k.keyCode||16===k.keyCode||17===k.keyCode||18===k.keyCode)return!1;this._finalizeComposition(!1)}return 229===k.keyCode?(this._handleAnyTextareaChanges(),!1):!0};c.prototype._finalizeComposition=function(k){var m=this;this._compositionView.classList.remove("active");this._isComposing=!1;this._clearTextareaPosition();if(k){var e=this._compositionPosition.start,d=this._compositionPosition.end;this._isSendingComposition=!0;setTimeout(function(){if(m._isSendingComposition){m._isSendingComposition=
!1;var b=m._isComposing?m._textarea.value.substring(e,d):m._textarea.value.substring(e);m._terminal.handler(b)}},0)}else this._isSendingComposition=!1,k=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end),this._terminal.handler(k)};c.prototype._handleAnyTextareaChanges=function(){var k=this,m=this._textarea.value;setTimeout(function(){if(!k._isComposing){var e=k._textarea.value.replace(m,"");0<e.length&&k._terminal.handler(e)}},0)};c.prototype.updateCompositionElements=
function(k){var m=this;if(this._isComposing){if(this._terminal.buffer.isCursorInViewport){var e=Math.ceil(this._terminal.charMeasure.height*this._terminal.options.lineHeight),d=this._terminal.buffer.y*e,b=this._terminal.buffer.x*this._terminal.charMeasure.width;this._compositionView.style.left=b+"px";this._compositionView.style.top=d+"px";this._compositionView.style.height=e+"px";this._compositionView.style.lineHeight=e+"px";this._compositionView.style.fontFamily=this._terminal.options.fontFamily;
this._compositionView.style.fontSize=this._terminal.options.fontSize+"px";e=this._compositionView.getBoundingClientRect();this._textarea.style.left=b+"px";this._textarea.style.top=d+"px";this._textarea.style.width=e.width+"px";this._textarea.style.height=e.height+"px";this._textarea.style.lineHeight=e.height+"px"}k||setTimeout(function(){return m.updateCompositionElements(!0)},0)}};c.prototype._clearTextareaPosition=function(){this._textarea.style.left="";this._textarea.style.top=""};return c}();
f.CompositionHelper=g},{}],8:[function(g,n,f){function c(a,b){a=b-a;for(var l=Array(a);a--;)l[a]=--b;return l}var k=this&&this.__extends||function(){var a=function(b,l){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var l in b)b.hasOwnProperty(l)&&(a[l]=b[l])};return a(b,l)};return function(b,l){function h(){this.constructor=b}a(b,l);b.prototype=null===l?Object.create(l):(h.prototype=l.prototype,new h)}}();Object.defineProperty(f,"__esModule",
{value:!0});n=g("./common/Lifecycle");var m=g("./core/input/TextDecoder"),e=function(){function a(a){this.table="undefined"===typeof Uint8Array?Array(a):new Uint8Array(a)}a.prototype.add=function(a,b,l,d){this.table[b<<8|a]=(l|0)<<4|(void 0===d?b:d)};a.prototype.addMany=function(a,b,l,d){for(var h=0;h<a.length;h++)this.add(a[h],b,l,d)};return a}();f.TransitionTable=e;var d=c(32,127),b=c(0,24);b.push(25);b.push.apply(b,c(28,32));f.VT500_TRANSITION_TABLE=function(){var a=new e(4095),h=c(0,14),q;for(q in h)for(var k=
0;160>=k;++k)a.add(k,q,1,0);a.addMany(d,0,2,0);for(q in h)a.addMany([24,26,153,154],q,3,0),a.addMany(c(128,144),q,3,0),a.addMany(c(144,152),q,3,0),a.add(156,q,0,0),a.add(27,q,11,1),a.add(157,q,4,8),a.addMany([152,158,159],q,0,7),a.add(155,q,11,3),a.add(144,q,11,9);a.addMany(b,0,3,0);a.addMany(b,1,3,1);a.add(127,1,0,1);a.addMany(b,8,0,8);a.addMany(b,3,3,3);a.add(127,3,0,3);a.addMany(b,4,3,4);a.add(127,4,0,4);a.addMany(b,6,3,6);a.addMany(b,5,3,5);a.add(127,5,0,5);a.addMany(b,2,3,2);a.add(127,2,0,2);
a.add(93,1,4,8);a.addMany(d,8,5,8);a.add(127,8,5,8);a.addMany([156,27,24,26,7],8,6,0);a.addMany(c(28,32),8,0,8);a.addMany([88,94,95],1,0,7);a.addMany(d,7,0,7);a.addMany(b,7,0,7);a.add(156,7,0,0);a.add(127,7,0,7);a.add(91,1,11,3);a.addMany(c(64,127),3,7,0);a.addMany(c(48,58),3,8,4);a.add(59,3,8,4);a.addMany([60,61,62,63],3,9,4);a.addMany(c(48,58),4,8,4);a.add(59,4,8,4);a.addMany(c(64,127),4,7,0);a.addMany([58,60,61,62,63],4,0,6);a.addMany(c(32,64),6,0,6);a.add(127,6,0,6);a.addMany(c(64,127),6,0,0);
a.add(58,3,0,6);a.addMany(c(32,48),3,9,5);a.addMany(c(32,48),5,9,5);a.addMany(c(48,64),5,0,6);a.addMany(c(64,127),5,7,0);a.addMany(c(32,48),4,9,5);a.addMany(c(32,48),1,9,2);a.addMany(c(32,48),2,9,2);a.addMany(c(48,127),2,10,0);a.addMany(c(48,80),1,10,0);a.addMany(c(81,88),1,10,0);a.addMany([89,90,92],1,10,0);a.addMany(c(96,127),1,10,0);a.add(80,1,11,9);a.addMany(b,9,0,9);a.add(127,9,0,9);a.addMany(c(28,32),9,0,9);a.addMany(c(32,48),9,9,12);a.add(58,9,0,11);a.addMany(c(48,58),9,8,10);a.add(59,9,8,
10);a.addMany([60,61,62,63],9,9,10);a.addMany(b,11,0,11);a.addMany(c(32,128),11,0,11);a.addMany(c(28,32),11,0,11);a.addMany(b,10,0,10);a.add(127,10,0,10);a.addMany(c(28,32),10,0,10);a.addMany(c(48,58),10,8,10);a.add(59,10,8,10);a.addMany([58,60,61,62,63],10,0,11);a.addMany(c(32,48),10,9,12);a.addMany(b,12,0,12);a.add(127,12,0,12);a.addMany(c(28,32),12,0,12);a.addMany(c(32,48),12,9,12);a.addMany(c(48,64),12,0,11);a.addMany(c(64,127),12,12,13);a.addMany(c(64,127),10,12,13);a.addMany(c(64,127),9,12,
13);a.addMany(b,13,13,13);a.addMany(d,13,13,13);a.add(127,13,0,13);a.addMany([27,156],13,14,0);a.add(160,8,5,8);return a}();var a=function(){function a(){}a.prototype.hook=function(a,b,d){};a.prototype.put=function(a,b,d){};a.prototype.unhook=function(){};return a}();g=function(b){function h(h){void 0===h&&(h=f.VT500_TRANSITION_TABLE);var d=b.call(this)||this;d.TRANSITIONS=h;d.initialState=0;d.currentState=d.initialState;d._osc="";d._params=[0];d._collect="";d._printHandlerFb=function(a,b,d){};d._executeHandlerFb=
function(a){};d._csiHandlerFb=function(a,b,d){};d._escHandlerFb=function(a,b){};d._oscHandlerFb=function(a,b){};d._dcsHandlerFb=new a;d._errorHandlerFb=function(a){return a};d._printHandler=d._printHandlerFb;d._executeHandlers=Object.create(null);d._csiHandlers=Object.create(null);d._escHandlers=Object.create(null);d._oscHandlers=Object.create(null);d._dcsHandlers=Object.create(null);d._activeDcsHandler=null;d._errorHandler=d._errorHandlerFb;d.setEscHandler("\\",function(){});return d}k(h,b);h.prototype.dispose=
function(){this._errorHandler=this._activeDcsHandler=this._dcsHandlers=this._oscHandlers=this._csiHandlers=this._escHandlers=this._executeHandlers=this._printHandler=this._errorHandlerFb=this._dcsHandlerFb=this._oscHandlerFb=this._escHandlerFb=this._csiHandlerFb=this._executeHandlerFb=this._printHandlerFb=null};h.prototype.setPrintHandler=function(a){this._printHandler=a};h.prototype.clearPrintHandler=function(){this._printHandler=this._printHandlerFb};h.prototype.setExecuteHandler=function(a,b){this._executeHandlers[a.charCodeAt(0)]=
b};h.prototype.clearExecuteHandler=function(a){this._executeHandlers[a.charCodeAt(0)]&&delete this._executeHandlers[a.charCodeAt(0)]};h.prototype.setExecuteHandlerFallback=function(a){this._executeHandlerFb=a};h.prototype.addCsiHandler=function(a,b){a=a.charCodeAt(0);void 0===this._csiHandlers[a]&&(this._csiHandlers[a]=[]);var d=this._csiHandlers[a];d.push(b);return{dispose:function(){var a=d.indexOf(b);-1!==a&&d.splice(a,1)}}};h.prototype.setCsiHandler=function(a,b){this._csiHandlers[a.charCodeAt(0)]=
[b]};h.prototype.clearCsiHandler=function(a){this._csiHandlers[a.charCodeAt(0)]&&delete this._csiHandlers[a.charCodeAt(0)]};h.prototype.setCsiHandlerFallback=function(a){this._csiHandlerFb=a};h.prototype.setEscHandler=function(a,b){this._escHandlers[a]=b};h.prototype.clearEscHandler=function(a){this._escHandlers[a]&&delete this._escHandlers[a]};h.prototype.setEscHandlerFallback=function(a){this._escHandlerFb=a};h.prototype.addOscHandler=function(a,b){void 0===this._oscHandlers[a]&&(this._oscHandlers[a]=
[]);var d=this._oscHandlers[a];d.push(b);return{dispose:function(){var a=d.indexOf(b);-1!==a&&d.splice(a,1)}}};h.prototype.setOscHandler=function(a,b){this._oscHandlers[a]=[b]};h.prototype.clearOscHandler=function(a){this._oscHandlers[a]&&delete this._oscHandlers[a]};h.prototype.setOscHandlerFallback=function(a){this._oscHandlerFb=a};h.prototype.setDcsHandler=function(a,b){this._dcsHandlers[a]=b};h.prototype.clearDcsHandler=function(a){this._dcsHandlers[a]&&delete this._dcsHandlers[a]};h.prototype.setDcsHandlerFallback=
function(a){this._dcsHandlerFb=a};h.prototype.setErrorHandler=function(a){this._errorHandler=a};h.prototype.clearErrorHandler=function(){this._errorHandler=this._errorHandlerFb};h.prototype.reset=function(){this.currentState=this.initialState;this._osc="";this._params=[0];this._collect="";this._activeDcsHandler=null};h.prototype.parse=function(a,b){for(var d,h,l=!1,e=this.currentState,k=-1,q=-1,c=this._osc,r=this._collect,f=this._params,g=this.TRANSITIONS.table,n=this._activeDcsHandler,w=0;w<b;++w)if(d=
a[w],0===e&&31<d&&128>d){k=~k?k:w;do w++;while(w<b&&31<a[w]&&128>a[w]);w--}else if(4===e&&47<d&&57>d)f[f.length-1]=10*f[f.length-1]+d-48;else{h=g[e<<8|(160>d?d:160)];switch(h>>4){case 2:k=~k?k:w;break;case 3:~k&&(this._printHandler(a,k,w),k=-1);(e=this._executeHandlers[d])?e():this._executeHandlerFb(d);break;case 0:~k?(this._printHandler(a,k,w),k=-1):~q&&(n.put(a,q,w),q=-1);break;case 1:if(159<d)switch(e){case 0:k=~k?k:w;break;case 6:h|=6;break;case 11:h|=11;break;case 13:q=~q?q:w;h|=13;break;default:l=
!0}else l=!0;if(l){if(this._errorHandler({position:w,code:d,currentState:e,print:k,dcs:q,osc:c,collect:r,params:f,abort:!1}).abort)return;l=!1}break;case 7:for(var x=(e=this._csiHandlers[d])?e.length-1:-1;0<=x&&!1===e[x](f,r);x--);0>x&&this._csiHandlerFb(r,f,d);break;case 8:59===d?f.push(0):f[f.length-1]=10*f[f.length-1]+d-48;break;case 9:r+=String.fromCharCode(d);break;case 10:(e=this._escHandlers[r+String.fromCharCode(d)])?e(r,d):this._escHandlerFb(r,d);break;case 11:~k&&(this._printHandler(a,k,
w),k=-1);c="";f=[0];r="";q=-1;break;case 12:n=this._dcsHandlers[r+String.fromCharCode(d)];n||(n=this._dcsHandlerFb);n.hook(r,f,d);break;case 13:q=~q?q:w;break;case 14:n&&(~q&&n.put(a,q,w),n.unhook(),n=null);27===d&&(h|=1);c="";f=[0];r="";q=-1;break;case 4:~k&&(this._printHandler(a,k,w),k=-1);c="";break;case 5:for(e=w+1;;e++)if(e>=b||32>(d=a[e])||127<d&&159>=d){c+=m.utf32ToString(a,w,e);w=e-1;break}break;case 6:if(c&&24!==d&&26!==d)if(r=c.indexOf(";"),-1===r)this._oscHandlerFb(-1,c);else{q=parseInt(c.substring(0,
r));c=c.substring(r+1);for(f=(r=this._oscHandlers[q])?r.length-1:-1;0<=f&&!1===r[f](c);f--);0>f&&this._oscHandlerFb(q,c)}27===d&&(h|=1);c="";f=[0];r="";q=-1}e=h&15}0===e&&~k?this._printHandler(a,k,b):13===e&&~q&&n&&n.put(a,q,b);this._osc=c;this._collect=r;this._params=f;this._activeDcsHandler=n;this.currentState=e};return h}(n.Disposable);f.EscapeSequenceParser=g},{"./common/Lifecycle":24,"./core/input/TextDecoder":34}],9:[function(g,n,f){var c=this&&this.__extends||function(){var a=function(b,d){a=
Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d])};return a(b,d)};return function(b,d){function h(){this.constructor=b}a(b,d);b.prototype=null===d?Object.create(d):(h.prototype=d.prototype,new h)}}();Object.defineProperty(f,"__esModule",{value:!0});var k=g("./common/data/EscapeSequences"),m=g("./core/data/Charsets"),e=g("./CharWidth"),d=g("./EscapeSequenceParser");n=g("./common/Lifecycle");var b=g("./common/TypedArrayUtils"),
a=g("./core/input/TextDecoder"),l=g("./core/buffer/BufferLine"),h=g("./common/EventEmitter2"),q={"(":0,")":1,"*":2,"+":3,"-":1,".":2},r=function(){function d(a){this._terminal=a;this._data=new Uint32Array(0)}d.prototype.hook=function(a,b,d){this._data=new Uint32Array(0)};d.prototype.put=function(a,d,h){this._data=b.concat(this._data,a.subarray(d,h))};d.prototype.unhook=function(){var b=a.utf32ToString(this._data);this._data=new Uint32Array(0);switch(b){case '"q':return this._terminal.handler(k.C0.ESC+
'P1$r0"q'+k.C0.ESC+"\\");case '"p':return this._terminal.handler(k.C0.ESC+'P1$r61"p'+k.C0.ESC+"\\");case "r":return this._terminal.handler(k.C0.ESC+"P1$r"+(this._terminal.buffer.scrollTop+1+";"+(this._terminal.buffer.scrollBottom+1)+"r")+k.C0.ESC+"\\");case "m":return this._terminal.handler(k.C0.ESC+"P1$r0m"+k.C0.ESC+"\\");case " q":return b={block:2,underline:4,bar:6}[this._terminal.getOption("cursorStyle")],b-=this._terminal.getOption("cursorBlink"),this._terminal.handler(k.C0.ESC+"P1$r"+b+" q"+
k.C0.ESC+"\\");default:this._terminal.error("Unknown DCS $q %s",b),this._terminal.handler(k.C0.ESC+"P0$r"+k.C0.ESC+"\\")}};return d}();g=function(b){function f(e,q){void 0===q&&(q=new d.EscapeSequenceParser);var c=b.call(this)||this;c._terminal=e;c._parser=q;c._parseBuffer=new Uint32Array(4096);c._stringDecoder=new a.StringToUtf32;c._utf8Decoder=new a.Utf8ToUtf32;c._workCell=new l.CellData;c._onCursorMove=new h.EventEmitter2;c._onData=new h.EventEmitter2;c._onLineFeed=new h.EventEmitter2;c._onScroll=
new h.EventEmitter2;c.register(c._parser);c._parser.setCsiHandlerFallback(function(a,b,d){c._terminal.error("Unknown CSI code: ",{collect:a,params:b,flag:String.fromCharCode(d)})});c._parser.setEscHandlerFallback(function(a,b){c._terminal.error("Unknown ESC code: ",{collect:a,flag:String.fromCharCode(b)})});c._parser.setExecuteHandlerFallback(function(a){c._terminal.error("Unknown EXECUTE code: ",{code:a})});c._parser.setOscHandlerFallback(function(a,b){c._terminal.error("Unknown OSC code: ",{identifier:a,
data:b})});c._parser.setPrintHandler(function(a,b,d){return c.print(a,b,d)});c._parser.setCsiHandler("@",function(a,b){return c.insertChars(a)});c._parser.setCsiHandler("A",function(a,b){return c.cursorUp(a)});c._parser.setCsiHandler("B",function(a,b){return c.cursorDown(a)});c._parser.setCsiHandler("C",function(a,b){return c.cursorForward(a)});c._parser.setCsiHandler("D",function(a,b){return c.cursorBackward(a)});c._parser.setCsiHandler("E",function(a,b){return c.cursorNextLine(a)});c._parser.setCsiHandler("F",
function(a,b){return c.cursorPrecedingLine(a)});c._parser.setCsiHandler("G",function(a,b){return c.cursorCharAbsolute(a)});c._parser.setCsiHandler("H",function(a,b){return c.cursorPosition(a)});c._parser.setCsiHandler("I",function(a,b){return c.cursorForwardTab(a)});c._parser.setCsiHandler("J",function(a,b){return c.eraseInDisplay(a)});c._parser.setCsiHandler("K",function(a,b){return c.eraseInLine(a)});c._parser.setCsiHandler("L",function(a,b){return c.insertLines(a)});c._parser.setCsiHandler("M",
function(a,b){return c.deleteLines(a)});c._parser.setCsiHandler("P",function(a,b){return c.deleteChars(a)});c._parser.setCsiHandler("S",function(a,b){return c.scrollUp(a)});c._parser.setCsiHandler("T",function(a,b){return c.scrollDown(a,b)});c._parser.setCsiHandler("X",function(a,b){return c.eraseChars(a)});c._parser.setCsiHandler("Z",function(a,b){return c.cursorBackwardTab(a)});c._parser.setCsiHandler("`",function(a,b){return c.charPosAbsolute(a)});c._parser.setCsiHandler("a",function(a,b){return c.hPositionRelative(a)});
c._parser.setCsiHandler("b",function(a,b){return c.repeatPrecedingCharacter(a)});c._parser.setCsiHandler("c",function(a,b){return c.sendDeviceAttributes(a,b)});c._parser.setCsiHandler("d",function(a,b){return c.linePosAbsolute(a)});c._parser.setCsiHandler("e",function(a,b){return c.vPositionRelative(a)});c._parser.setCsiHandler("f",function(a,b){return c.hVPosition(a)});c._parser.setCsiHandler("g",function(a,b){return c.tabClear(a)});c._parser.setCsiHandler("h",function(a,b){return c.setMode(a,b)});
c._parser.setCsiHandler("l",function(a,b){return c.resetMode(a,b)});c._parser.setCsiHandler("m",function(a,b){return c.charAttributes(a)});c._parser.setCsiHandler("n",function(a,b){return c.deviceStatus(a,b)});c._parser.setCsiHandler("p",function(a,b){return c.softReset(a,b)});c._parser.setCsiHandler("q",function(a,b){return c.setCursorStyle(a,b)});c._parser.setCsiHandler("r",function(a,b){return c.setScrollRegion(a,b)});c._parser.setCsiHandler("s",function(a,b){return c.saveCursor(a)});c._parser.setCsiHandler("u",
function(a,b){return c.restoreCursor(a)});c._parser.setExecuteHandler(k.C0.BEL,function(){return c.bell()});c._parser.setExecuteHandler(k.C0.LF,function(){return c.lineFeed()});c._parser.setExecuteHandler(k.C0.VT,function(){return c.lineFeed()});c._parser.setExecuteHandler(k.C0.FF,function(){return c.lineFeed()});c._parser.setExecuteHandler(k.C0.CR,function(){return c.carriageReturn()});c._parser.setExecuteHandler(k.C0.BS,function(){return c.backspace()});c._parser.setExecuteHandler(k.C0.HT,function(){return c.tab()});
c._parser.setExecuteHandler(k.C0.SO,function(){return c.shiftOut()});c._parser.setExecuteHandler(k.C0.SI,function(){return c.shiftIn()});c._parser.setExecuteHandler(k.C1.IND,function(){return c.index()});c._parser.setExecuteHandler(k.C1.NEL,function(){return c.nextLine()});c._parser.setExecuteHandler(k.C1.HTS,function(){return c.tabSet()});c._parser.setOscHandler(0,function(a){return c.setTitle(a)});c._parser.setOscHandler(2,function(a){return c.setTitle(a)});c._parser.setEscHandler("7",function(){return c.saveCursor([])});
c._parser.setEscHandler("8",function(){return c.restoreCursor([])});c._parser.setEscHandler("D",function(){return c.index()});c._parser.setEscHandler("E",function(){return c.nextLine()});c._parser.setEscHandler("H",function(){return c.tabSet()});c._parser.setEscHandler("M",function(){return c.reverseIndex()});c._parser.setEscHandler("=",function(){return c.keypadApplicationMode()});c._parser.setEscHandler(">",function(){return c.keypadNumericMode()});c._parser.setEscHandler("c",function(){return c.reset()});
c._parser.setEscHandler("n",function(){return c.setgLevel(2)});c._parser.setEscHandler("o",function(){return c.setgLevel(3)});c._parser.setEscHandler("|",function(){return c.setgLevel(3)});c._parser.setEscHandler("}",function(){return c.setgLevel(2)});c._parser.setEscHandler("~",function(){return c.setgLevel(1)});c._parser.setEscHandler("%@",function(){return c.selectDefaultCharset()});c._parser.setEscHandler("%G",function(){return c.selectDefaultCharset()});e=function(a){f._parser.setEscHandler("("+
a,function(){return c.selectCharset("("+a)});f._parser.setEscHandler(")"+a,function(){return c.selectCharset(")"+a)});f._parser.setEscHandler("*"+a,function(){return c.selectCharset("*"+a)});f._parser.setEscHandler("+"+a,function(){return c.selectCharset("+"+a)});f._parser.setEscHandler("-"+a,function(){return c.selectCharset("-"+a)});f._parser.setEscHandler("."+a,function(){return c.selectCharset("."+a)});f._parser.setEscHandler("/"+a,function(){return c.selectCharset("/"+a)})};var f=this,t;for(t in m.CHARSETS)e(t);
c._parser.setErrorHandler(function(a){c._terminal.error("Parsing error: ",a);return a});c._parser.setDcsHandler("$q",new r(c._terminal));return c}c(f,b);Object.defineProperty(f.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"onData",{get:function(){return this._onData.event},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!0,
configurable:!0});Object.defineProperty(f.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!0,configurable:!0});f.prototype.dispose=function(){b.prototype.dispose.call(this);this._terminal=null};f.prototype.parse=function(a){if(this._terminal){var b=this._terminal.buffer,d=b.x,h=b.y;this._terminal.debug&&this._terminal.log("data: "+a);this._parseBuffer.length<a.length&&(this._parseBuffer=new Uint32Array(a.length));this._parser.parse(this._parseBuffer,this._stringDecoder.decode(a,
this._parseBuffer));b=this._terminal.buffer;b.x===d&&b.y===h||this._onCursorMove.fire()}};f.prototype.parseUtf8=function(a){if(this._terminal){var b=this._terminal.buffer,d=b.x,h=b.y;this._terminal.debug&&this._terminal.log("data: "+a);this._parseBuffer.length<a.length&&(this._parseBuffer=new Uint32Array(a.length));this._parser.parse(this._parseBuffer,this._utf8Decoder.decode(a,this._parseBuffer));b=this._terminal.buffer;b.x===d&&b.y===h||this._terminal.emit("cursormove")}};f.prototype.print=function(b,
d,h){var c=this._terminal.buffer,k=this._terminal.charset,q=this._terminal.options.screenReaderMode,m=this._terminal.cols,f=this._terminal.wraparoundMode,t=this._terminal.insertMode,r=this._terminal.curAttrData,g=c.lines.get(c.y+c.ybase);this._terminal.updateRange(c.y);for(var p=d;p<h;++p){d=b[p];var u=e.wcwidth(d);if(127>d&&k){var v=k[String.fromCharCode(d)];v&&(d=v.charCodeAt(0))}q&&this._terminal.emit("a11y.char",a.stringFromCodePoint(d));if(!u&&c.x)g.getWidth(c.x-1)?g.addCodepointToCell(c.x-1,
d):g.addCodepointToCell(c.x-2,d);else{if(c.x+u-1>=m)if(f)c.x=0,c.y++,c.y>c.scrollBottom?(c.y--,this._terminal.scroll(!0)):c.lines.get(c.y).isWrapped=!0,g=c.lines.get(c.y+c.ybase);else if(2===u)continue;t&&(g.insertCells(c.x,u,c.getNullCell(r)),2===g.getWidth(m-1)&&g.setCellFromCodePoint(m-1,l.NULL_CELL_CODE,l.NULL_CELL_WIDTH,r.fg,r.bg));g.setCellFromCodePoint(c.x++,d,u,r.fg,r.bg);if(0<u)for(;--u;)g.setCellFromCodePoint(c.x++,0,0,r.fg,r.bg)}}this._terminal.updateRange(c.y)};f.prototype.addCsiHandler=
function(a,b){return this._parser.addCsiHandler(a,b)};f.prototype.addOscHandler=function(a,b){return this._parser.addOscHandler(a,b)};f.prototype.bell=function(){this._terminal.bell()};f.prototype.lineFeed=function(){var a=this._terminal.buffer;this._terminal.options.convertEol&&(a.x=0);a.y++;a.y>a.scrollBottom&&(a.y--,this._terminal.scroll());a.x>=this._terminal.cols&&a.x--;this._onLineFeed.fire()};f.prototype.carriageReturn=function(){this._terminal.buffer.x=0};f.prototype.backspace=function(){0<
this._terminal.buffer.x&&this._terminal.buffer.x--};f.prototype.tab=function(){var a=this._terminal.buffer.x;this._terminal.buffer.x=this._terminal.buffer.nextStop();this._terminal.options.screenReaderMode&&this._terminal.emit("a11y.tab",this._terminal.buffer.x-a)};f.prototype.shiftOut=function(){this._terminal.setgLevel(1)};f.prototype.shiftIn=function(){this._terminal.setgLevel(0)};f.prototype.insertChars=function(a){this._terminal.buffer.lines.get(this._terminal.buffer.y+this._terminal.buffer.ybase).insertCells(this._terminal.buffer.x,
a[0]||1,this._terminal.buffer.getNullCell(this._terminal.eraseAttrData()));this._terminal.updateRange(this._terminal.buffer.y)};f.prototype.cursorUp=function(a){a=a[0];1>a&&(a=1);this._terminal.buffer.y-=a;0>this._terminal.buffer.y&&(this._terminal.buffer.y=0)};f.prototype.cursorDown=function(a){a=a[0];1>a&&(a=1);this._terminal.buffer.y+=a;this._terminal.buffer.y>=this._terminal.rows&&(this._terminal.buffer.y=this._terminal.rows-1);this._terminal.buffer.x>=this._terminal.cols&&this._terminal.buffer.x--};
f.prototype.cursorForward=function(a){a=a[0];1>a&&(a=1);this._terminal.buffer.x+=a;this._terminal.buffer.x>=this._terminal.cols&&(this._terminal.buffer.x=this._terminal.cols-1)};f.prototype.cursorBackward=function(a){a=a[0];1>a&&(a=1);this._terminal.buffer.x>=this._terminal.cols&&this._terminal.buffer.x--;this._terminal.buffer.x-=a;0>this._terminal.buffer.x&&(this._terminal.buffer.x=0)};f.prototype.cursorNextLine=function(a){a=a[0];1>a&&(a=1);this._terminal.buffer.y+=a;this._terminal.buffer.y>=this._terminal.rows&&
(this._terminal.buffer.y=this._terminal.rows-1);this._terminal.buffer.x=0};f.prototype.cursorPrecedingLine=function(a){a=a[0];1>a&&(a=1);this._terminal.buffer.y-=a;0>this._terminal.buffer.y&&(this._terminal.buffer.y=0);this._terminal.buffer.x=0};f.prototype.cursorCharAbsolute=function(a){a=a[0];1>a&&(a=1);this._terminal.buffer.x=a-1};f.prototype.cursorPosition=function(a){var b=a[0]-1;a=2<=a.length?a[1]-1:0;0>b?b=0:b>=this._terminal.rows&&(b=this._terminal.rows-1);0>a?a=0:a>=this._terminal.cols&&
(a=this._terminal.cols-1);this._terminal.buffer.x=a;this._terminal.buffer.y=b};f.prototype.cursorForwardTab=function(a){for(a=a[0]||1;a--;)this._terminal.buffer.x=this._terminal.buffer.nextStop()};f.prototype._eraseInBufferLine=function(a,b,d,h){void 0===h&&(h=!1);a=this._terminal.buffer.lines.get(this._terminal.buffer.ybase+a);a.replaceCells(b,d,this._terminal.buffer.getNullCell(this._terminal.eraseAttrData()));h&&(a.isWrapped=!1)};f.prototype._resetBufferLine=function(a){this._eraseInBufferLine(a,
0,this._terminal.cols,!0)};f.prototype.eraseInDisplay=function(a){switch(a[0]){case 0:a=this._terminal.buffer.y;this._terminal.updateRange(a);for(this._eraseInBufferLine(a++,this._terminal.buffer.x,this._terminal.cols,0===this._terminal.buffer.x);a<this._terminal.rows;a++)this._resetBufferLine(a);this._terminal.updateRange(a);break;case 1:a=this._terminal.buffer.y;this._terminal.updateRange(a);this._eraseInBufferLine(a,0,this._terminal.buffer.x+1,!0);this._terminal.buffer.x+1>=this._terminal.cols&&
(this._terminal.buffer.lines.get(a+1).isWrapped=!1);for(;a--;)this._resetBufferLine(a);this._terminal.updateRange(0);break;case 2:a=this._terminal.rows;for(this._terminal.updateRange(a-1);a--;)this._resetBufferLine(a);this._terminal.updateRange(0);break;case 3:a=this._terminal.buffer.lines.length-this._terminal.rows,0<a&&(this._terminal.buffer.lines.trimStart(a),this._terminal.buffer.ybase=Math.max(this._terminal.buffer.ybase-a,0),this._terminal.buffer.ydisp=Math.max(this._terminal.buffer.ydisp-a,
0),this._onScroll.fire(0))}};f.prototype.eraseInLine=function(a){switch(a[0]){case 0:this._eraseInBufferLine(this._terminal.buffer.y,this._terminal.buffer.x,this._terminal.cols);break;case 1:this._eraseInBufferLine(this._terminal.buffer.y,0,this._terminal.buffer.x+1);break;case 2:this._eraseInBufferLine(this._terminal.buffer.y,0,this._terminal.cols)}this._terminal.updateRange(this._terminal.buffer.y)};f.prototype.insertLines=function(a){a=a[0];1>a&&(a=1);for(var b=this._terminal.buffer,d=b.y+b.ybase,
h=this._terminal.rows-1+b.ybase-(this._terminal.rows-1-b.scrollBottom)+1;a--;)b.lines.splice(h-1,1),b.lines.splice(d,0,b.getBlankLine(this._terminal.eraseAttrData()));this._terminal.updateRange(b.y);this._terminal.updateRange(b.scrollBottom)};f.prototype.deleteLines=function(a){a=a[0];1>a&&(a=1);var b=this._terminal.buffer,d=b.y+b.ybase;var h=this._terminal.rows-1-b.scrollBottom;for(h=this._terminal.rows-1+b.ybase-h;a--;)b.lines.splice(d,1),b.lines.splice(h,0,b.getBlankLine(this._terminal.eraseAttrData()));
this._terminal.updateRange(b.y);this._terminal.updateRange(b.scrollBottom)};f.prototype.deleteChars=function(a){this._terminal.buffer.lines.get(this._terminal.buffer.y+this._terminal.buffer.ybase).deleteCells(this._terminal.buffer.x,a[0]||1,this._terminal.buffer.getNullCell(this._terminal.eraseAttrData()));this._terminal.updateRange(this._terminal.buffer.y)};f.prototype.scrollUp=function(a){a=a[0]||1;for(var b=this._terminal.buffer;a--;)b.lines.splice(b.ybase+b.scrollTop,1),b.lines.splice(b.ybase+
b.scrollBottom,0,b.getBlankLine(l.DEFAULT_ATTR_DATA));this._terminal.updateRange(b.scrollTop);this._terminal.updateRange(b.scrollBottom)};f.prototype.scrollDown=function(a,b){if(2>a.length&&!b){a=a[0]||1;for(b=this._terminal.buffer;a--;)b.lines.splice(b.ybase+b.scrollBottom,1),b.lines.splice(b.ybase+b.scrollTop,0,b.getBlankLine(l.DEFAULT_ATTR_DATA));this._terminal.updateRange(b.scrollTop);this._terminal.updateRange(b.scrollBottom)}};f.prototype.eraseChars=function(a){this._terminal.buffer.lines.get(this._terminal.buffer.y+
this._terminal.buffer.ybase).replaceCells(this._terminal.buffer.x,this._terminal.buffer.x+(a[0]||1),this._terminal.buffer.getNullCell(this._terminal.eraseAttrData()))};f.prototype.cursorBackwardTab=function(a){a=a[0]||1;for(var b=this._terminal.buffer;a--;)b.x=b.prevStop()};f.prototype.charPosAbsolute=function(a){a=a[0];1>a&&(a=1);this._terminal.buffer.x=a-1;this._terminal.buffer.x>=this._terminal.cols&&(this._terminal.buffer.x=this._terminal.cols-1)};f.prototype.hPositionRelative=function(a){a=a[0];
1>a&&(a=1);this._terminal.buffer.x+=a;this._terminal.buffer.x>=this._terminal.cols&&(this._terminal.buffer.x=this._terminal.cols-1)};f.prototype.repeatPrecedingCharacter=function(a){var b=this._terminal.buffer,d=b.lines.get(b.ybase+b.y);d.loadCell(b.x-1,this._workCell);d.replaceCells(b.x,b.x+(a[0]||1),void 0!==this._workCell.content?this._workCell:b.getNullCell(l.DEFAULT_ATTR_DATA))};f.prototype.sendDeviceAttributes=function(a,b){0<a[0]||(b?">"===b&&(this._terminal.is("xterm")?this._terminal.handler(k.C0.ESC+
"[>0;276;0c"):this._terminal.is("rxvt-unicode")?this._terminal.handler(k.C0.ESC+"[>85;95;0c"):this._terminal.is("linux")?this._terminal.handler(a[0]+"c"):this._terminal.is("screen")&&this._terminal.handler(k.C0.ESC+"[>83;40003;0c")):this._terminal.is("xterm")||this._terminal.is("rxvt-unicode")||this._terminal.is("screen")?this._terminal.handler(k.C0.ESC+"[?1;2c"):this._terminal.is("linux")&&this._terminal.handler(k.C0.ESC+"[?6c"))};f.prototype.linePosAbsolute=function(a){a=a[0];1>a&&(a=1);this._terminal.buffer.y=
a-1;this._terminal.buffer.y>=this._terminal.rows&&(this._terminal.buffer.y=this._terminal.rows-1)};f.prototype.vPositionRelative=function(a){a=a[0];1>a&&(a=1);this._terminal.buffer.y+=a;this._terminal.buffer.y>=this._terminal.rows&&(this._terminal.buffer.y=this._terminal.rows-1);this._terminal.buffer.x>=this._terminal.cols&&this._terminal.buffer.x--};f.prototype.hVPosition=function(a){1>a[0]&&(a[0]=1);1>a[1]&&(a[1]=1);this._terminal.buffer.y=a[0]-1;this._terminal.buffer.y>=this._terminal.rows&&(this._terminal.buffer.y=
this._terminal.rows-1);this._terminal.buffer.x=a[1]-1;this._terminal.buffer.x>=this._terminal.cols&&(this._terminal.buffer.x=this._terminal.cols-1)};f.prototype.tabClear=function(a){a=a[0];0>=a?delete this._terminal.buffer.tabs[this._terminal.buffer.x]:3===a&&(this._terminal.buffer.tabs={})};f.prototype.setMode=function(a,b){if(1<a.length)for(b=0;b<a.length;b++)this.setMode([a[b]]);else if(!b)switch(a[0]){case 4:this._terminal.insertMode=!0}else if("?"===b)switch(a[0]){case 1:this._terminal.applicationCursor=
!0;break;case 2:this._terminal.setgCharset(0,m.DEFAULT_CHARSET);this._terminal.setgCharset(1,m.DEFAULT_CHARSET);this._terminal.setgCharset(2,m.DEFAULT_CHARSET);this._terminal.setgCharset(3,m.DEFAULT_CHARSET);break;case 3:this._terminal.savedCols=this._terminal.cols;this._terminal.resize(132,this._terminal.rows);break;case 6:this._terminal.originMode=!0;break;case 7:this._terminal.wraparoundMode=!0;break;case 66:this._terminal.log("Serial port requested application keypad.");this._terminal.applicationKeypad=
!0;this._terminal.viewport&&this._terminal.viewport.syncScrollArea();break;case 9:case 1E3:case 1002:case 1003:this._terminal.x10Mouse=9===a[0];this._terminal.vt200Mouse=1E3===a[0];this._terminal.normalMouse=1E3<a[0];this._terminal.mouseEvents=!0;this._terminal.element&&this._terminal.element.classList.add("enable-mouse-events");this._terminal.selectionManager&&this._terminal.selectionManager.disable();this._terminal.log("Binding to mouse events.");break;case 1004:this._terminal.sendFocus=!0;break;
case 1005:this._terminal.utfMouse=!0;break;case 1006:this._terminal.sgrMouse=!0;break;case 1015:this._terminal.urxvtMouse=!0;break;case 25:this._terminal.cursorHidden=!1;break;case 1048:this.saveCursor(a);break;case 1049:this.saveCursor(a);case 47:case 1047:this._terminal.buffers.activateAltBuffer(this._terminal.eraseAttrData());this._terminal.refresh(0,this._terminal.rows-1);this._terminal.viewport&&this._terminal.viewport.syncScrollArea();this._terminal.showCursor();break;case 2004:this._terminal.bracketedPasteMode=
!0}};f.prototype.resetMode=function(a,b){if(1<a.length)for(b=0;b<a.length;b++)this.resetMode([a[b]]);else if(!b)switch(a[0]){case 4:this._terminal.insertMode=!1}else if("?"===b)switch(a[0]){case 1:this._terminal.applicationCursor=!1;break;case 3:132===this._terminal.cols&&this._terminal.savedCols&&this._terminal.resize(this._terminal.savedCols,this._terminal.rows);delete this._terminal.savedCols;break;case 6:this._terminal.originMode=!1;break;case 7:this._terminal.wraparoundMode=!1;break;case 66:this._terminal.log("Switching back to normal keypad.");
this._terminal.applicationKeypad=!1;this._terminal.viewport&&this._terminal.viewport.syncScrollArea();break;case 9:case 1E3:case 1002:case 1003:this._terminal.x10Mouse=!1;this._terminal.vt200Mouse=!1;this._terminal.normalMouse=!1;this._terminal.mouseEvents=!1;this._terminal.element&&this._terminal.element.classList.remove("enable-mouse-events");this._terminal.selectionManager&&this._terminal.selectionManager.enable();break;case 1004:this._terminal.sendFocus=!1;break;case 1005:this._terminal.utfMouse=
!1;break;case 1006:this._terminal.sgrMouse=!1;break;case 1015:this._terminal.urxvtMouse=!1;break;case 25:this._terminal.cursorHidden=!0;break;case 1048:this.restoreCursor(a);break;case 1049:case 47:case 1047:this._terminal.buffers.activateNormalBuffer();1049===a[0]&&this.restoreCursor(a);this._terminal.refresh(0,this._terminal.rows-1);this._terminal.viewport&&this._terminal.viewport.syncScrollArea();this._terminal.showCursor();break;case 2004:this._terminal.bracketedPasteMode=!1}};f.prototype.charAttributes=
function(a){if(1===a.length&&0===a[0])this._terminal.curAttrData.fg=l.DEFAULT_ATTR_DATA.fg,this._terminal.curAttrData.bg=l.DEFAULT_ATTR_DATA.bg;else for(var b=a.length,d,h=this._terminal.curAttrData,e=0;e<b;e++)d=a[e],30<=d&&37>=d?(h.fg&=-50331904,h.fg=h.fg|16777216|d-30):40<=d&&47>=d?(h.bg&=-50331904,h.bg=h.bg|16777216|d-40):90<=d&&97>=d?(h.fg&=-50331904,h.fg=h.fg|d-90|16777224):100<=d&&107>=d?(h.bg&=-50331904,h.bg=h.bg|d-100|16777224):0===d?(h.fg=l.DEFAULT_ATTR_DATA.fg,h.bg=l.DEFAULT_ATTR_DATA.bg):
1===d?h.fg|=134217728:3===d?h.bg|=67108864:4===d?h.fg|=268435456:5===d?h.fg|=536870912:7===d?h.fg|=67108864:8===d?h.fg|=1073741824:2===d?h.bg|=134217728:22===d?(h.fg&=-134217729,h.bg&=-134217729):23===d?h.bg&=-67108865:24===d?h.fg&=-268435457:25===d?h.fg&=-536870913:27===d?h.fg&=-67108865:28===d?h.fg&=-1073741825:39===d?(h.fg&=-67108864,h.fg|=l.DEFAULT_ATTR_DATA.fg&16777215):49===d?(h.bg&=-67108864,h.bg|=l.DEFAULT_ATTR_DATA.bg&16777215):38===d?2===a[e+1]?(e+=2,h.fg|=50331648,h.fg&=-16777216,h.fg|=
l.AttributeData.fromColorRGB([a[e],a[e+1],a[e+2]]),e+=2):5===a[e+1]&&(e+=2,d=a[e]&255,h.fg&=-50331904,h.fg=h.fg|33554432|d):48===d?2===a[e+1]?(e+=2,h.bg|=50331648,h.bg&=-16777216,h.bg|=l.AttributeData.fromColorRGB([a[e],a[e+1],a[e+2]]),e+=2):5===a[e+1]&&(e+=2,d=a[e]&255,h.bg&=-50331904,h.bg=h.bg|33554432|d):100===d?(h.fg&=-67108864,h.fg|=l.DEFAULT_ATTR_DATA.fg&16777215,h.bg&=-67108864,h.bg|=l.DEFAULT_ATTR_DATA.bg&16777215):this._terminal.error("Unknown SGR attribute: %d.",d)};f.prototype.deviceStatus=
function(a,b){if(!b)switch(a[0]){case 5:this._onData.fire(k.C0.ESC+"[0n");break;case 6:a=this._terminal.buffer.y+1,b=this._terminal.buffer.x+1,this._onData.fire(k.C0.ESC+"["+a+";"+b+"R")}else if("?"===b)switch(a[0]){case 6:a=this._terminal.buffer.y+1,b=this._terminal.buffer.x+1,this._onData.fire(k.C0.ESC+"[?"+a+";"+b+"R")}};f.prototype.softReset=function(a,b){"!"===b&&(this._terminal.cursorHidden=!1,this._terminal.insertMode=!1,this._terminal.originMode=!1,this._terminal.wraparoundMode=!0,this._terminal.applicationKeypad=
!1,this._terminal.viewport&&this._terminal.viewport.syncScrollArea(),this._terminal.applicationCursor=!1,this._terminal.buffer.scrollTop=0,this._terminal.buffer.scrollBottom=this._terminal.rows-1,this._terminal.curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._terminal.buffer.x=this._terminal.buffer.y=0,this._terminal.charset=null,this._terminal.glevel=0,this._terminal.charsets=[null])};f.prototype.setCursorStyle=function(a,b){if(" "===b){a=1>a[0]?1:a[0];switch(a){case 1:case 2:this._terminal.setOption("cursorStyle",
"block");break;case 3:case 4:this._terminal.setOption("cursorStyle","underline");break;case 5:case 6:this._terminal.setOption("cursorStyle","bar")}this._terminal.setOption("cursorBlink",1===a%2)}};f.prototype.setScrollRegion=function(a,b){b||(this._terminal.buffer.scrollTop=(a[0]||1)-1,this._terminal.buffer.scrollBottom=(a[1]&&a[1]<=this._terminal.rows?a[1]:this._terminal.rows)-1,this._terminal.buffer.x=0,this._terminal.buffer.y=0)};f.prototype.saveCursor=function(a){this._terminal.buffer.savedX=
this._terminal.buffer.x;this._terminal.buffer.savedY=this._terminal.buffer.y;this._terminal.buffer.savedCurAttrData.fg=this._terminal.curAttrData.fg;this._terminal.buffer.savedCurAttrData.bg=this._terminal.curAttrData.bg};f.prototype.restoreCursor=function(a){this._terminal.buffer.x=this._terminal.buffer.savedX||0;this._terminal.buffer.y=this._terminal.buffer.savedY||0;this._terminal.curAttrData.fg=this._terminal.buffer.savedCurAttrData.fg;this._terminal.curAttrData.bg=this._terminal.buffer.savedCurAttrData.bg};
f.prototype.setTitle=function(a){this._terminal.handleTitle(a)};f.prototype.nextLine=function(){this._terminal.buffer.x=0;this.index()};f.prototype.keypadApplicationMode=function(){this._terminal.log("Serial port requested application keypad.");this._terminal.applicationKeypad=!0;this._terminal.viewport&&this._terminal.viewport.syncScrollArea()};f.prototype.keypadNumericMode=function(){this._terminal.log("Switching back to normal keypad.");this._terminal.applicationKeypad=!1;this._terminal.viewport&&
this._terminal.viewport.syncScrollArea()};f.prototype.selectDefaultCharset=function(){this._terminal.setgLevel(0);this._terminal.setgCharset(0,m.DEFAULT_CHARSET)};f.prototype.selectCharset=function(a){2!==a.length?this.selectDefaultCharset():"/"!==a[0]&&this._terminal.setgCharset(q[a[0]],m.CHARSETS[a[1]]||m.DEFAULT_CHARSET)};f.prototype.index=function(){this._terminal.index()};f.prototype.tabSet=function(){this._terminal.tabSet()};f.prototype.reverseIndex=function(){this._terminal.reverseIndex()};
f.prototype.reset=function(){this._parser.reset();this._terminal.reset()};f.prototype.setgLevel=function(a){this._terminal.setgLevel(a)};return f}(n.Disposable);f.InputHandler=g},{"./CharWidth":5,"./EscapeSequenceParser":8,"./common/EventEmitter2":23,"./common/Lifecycle":24,"./common/TypedArrayUtils":26,"./common/data/EscapeSequences":28,"./core/buffer/BufferLine":29,"./core/data/Charsets":32,"./core/input/TextDecoder":34}],10:[function(g,n,f){Object.defineProperty(f,"__esModule",{value:!0});var c=
g("./MouseZoneManager"),k=g("./CharWidth"),m=g("./common/EventEmitter2");g=function(){function e(d){this._terminal=d;this._linkMatchers=[];this._nextLinkMatcherId=0;this._onLinkHover=new m.EventEmitter2;this._onLinkLeave=new m.EventEmitter2;this._onLinkTooltip=new m.EventEmitter2;this._rowsToLinkify={start:null,end:null}}Object.defineProperty(e.prototype,"onLinkHover",{get:function(){return this._onLinkHover.event},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"onLinkLeave",{get:function(){return this._onLinkLeave.event},
enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"onLinkTooltip",{get:function(){return this._onLinkTooltip.event},enumerable:!0,configurable:!0});e.prototype.attachToDom=function(d){this._mouseZoneManager=d};e.prototype.linkifyRows=function(d,b){var a=this;this._mouseZoneManager&&(null===this._rowsToLinkify.start?(this._rowsToLinkify.start=d,this._rowsToLinkify.end=b):(this._rowsToLinkify.start=Math.min(this._rowsToLinkify.start,d),this._rowsToLinkify.end=Math.max(this._rowsToLinkify.end,
b)),this._mouseZoneManager.clearAll(d,b),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),this._rowsTimeoutId=setTimeout(function(){return a._linkifyRows()},e.TIME_BEFORE_LINKIFY))};e.prototype._linkifyRows=function(){this._rowsTimeoutId=null;var d=this._terminal.buffer,b=d.ydisp+this._rowsToLinkify.start;if(!(b>=d.lines.length)){var a=Math.ceil(e.OVERSCAN_CHAR_LIMIT/this._terminal.cols);for(d=this._terminal.buffer.iterator(!1,b,d.ydisp+Math.min(this._rowsToLinkify.end,this._terminal.rows)+
1,a,a);d.hasNext();)for(b=d.next(),a=0;a<this._linkMatchers.length;a++)this._doLinkifyRow(b.range.first,b.content,this._linkMatchers[a]);this._rowsToLinkify.start=null;this._rowsToLinkify.end=null}};e.prototype.registerLinkMatcher=function(d,b,a){void 0===a&&(a={});if(!b)throw Error("handler must be defined");d={id:this._nextLinkMatcherId++,regex:d,handler:b,matchIndex:a.matchIndex,validationCallback:a.validationCallback,hoverTooltipCallback:a.tooltipCallback,hoverLeaveCallback:a.leaveCallback,willLinkActivate:a.willLinkActivate,
priority:a.priority||0};this._addLinkMatcherToList(d);return d.id};e.prototype._addLinkMatcherToList=function(d){if(0===this._linkMatchers.length)this._linkMatchers.push(d);else{for(var b=this._linkMatchers.length-1;0<=b;b--)if(d.priority<=this._linkMatchers[b].priority){this._linkMatchers.splice(b+1,0,d);return}this._linkMatchers.splice(0,0,d)}};e.prototype.deregisterLinkMatcher=function(d){for(var b=0;b<this._linkMatchers.length;b++)if(this._linkMatchers[b].id===d)return this._linkMatchers.splice(b,
1),!0;return!1};e.prototype._doLinkifyRow=function(d,b,a){for(var l=this,h=new RegExp(a.regex.source,a.regex.flags+"g"),e,c=-1,k=function(){var k=e["number"!==typeof a.matchIndex?0:a.matchIndex];if(!k){if(m._terminal.debug)throw console.log({match:e,matcher:a}),Error("match found without corresponding matchIndex");return"break"}c=b.indexOf(k,c+1);h.lastIndex=c+k.length;if(0>c)return"break";var q=m._terminal.buffer.stringIndexToBufferIndex(d,c);if(0>q[0])return"break";var f=m._terminal.buffer.lines.get(q[0]).getFg(q[1]),
r;f&&(r=f>>9&511);a.validationCallback?a.validationCallback(k,function(b){l._rowsTimeoutId||b&&l._addLink(q[1],q[0]-l._terminal.buffer.ydisp,k,a,r)}):m._addLink(q[1],q[0]-m._terminal.buffer.ydisp,k,a,r)},m=this;null!==(e=h.exec(b))&&"break"!==k(););};e.prototype._addLink=function(d,b,a,l,h){var e=this,m=k.getStringCellWidth(a),f=d%this._terminal.cols,g=b+Math.floor(d/this._terminal.cols),t=(f+m)%this._terminal.cols,n=g+Math.floor((f+m)/this._terminal.cols);0===t&&(t=this._terminal.cols,n--);this._mouseZoneManager.add(new c.MouseZone(f+
1,g+1,t+1,n+1,function(b){if(l.handler)return l.handler(b,a);window.open(a,"_blank")},function(){e._onLinkHover.fire(e._createLinkHoverEvent(f,g,t,n,h));e._terminal.element.classList.add("xterm-cursor-pointer")},function(b){e._onLinkTooltip.fire(e._createLinkHoverEvent(f,g,t,n,h));l.hoverTooltipCallback&&l.hoverTooltipCallback(b,a)},function(){e._onLinkLeave.fire(e._createLinkHoverEvent(f,g,t,n,h));e._terminal.element.classList.remove("xterm-cursor-pointer");l.hoverLeaveCallback&&l.hoverLeaveCallback()},
function(b){return l.willLinkActivate?l.willLinkActivate(b,a):!0}))};e.prototype._createLinkHoverEvent=function(d,b,a,e,h){return{x1:d,y1:b,x2:a,y2:e,cols:this._terminal.cols,fg:h}};e.TIME_BEFORE_LINKIFY=200;e.OVERSCAN_CHAR_LIMIT=2E3;return e}();f.Linkifier=g},{"./CharWidth":5,"./MouseZoneManager":12,"./common/EventEmitter2":23}],11:[function(g,n,f){Object.defineProperty(f,"__esModule",{value:!0});g=function(){function c(c){this._renderCoordinator=c}c.getCoordsRelativeToElement=function(c,m){m=m.getBoundingClientRect();
return[c.clientX-m.left,c.clientY-m.top]};c.prototype.getCoords=function(k,m,e,d,b,a){if(!e.width||!e.height)return null;k=c.getCoordsRelativeToElement(k,m);if(!k)return null;k[0]=Math.ceil((k[0]+(a?this._renderCoordinator.dimensions.actualCellWidth/2:0))/this._renderCoordinator.dimensions.actualCellWidth);k[1]=Math.ceil(k[1]/this._renderCoordinator.dimensions.actualCellHeight);k[0]=Math.min(Math.max(k[0],1),d+(a?1:0));k[1]=Math.min(Math.max(k[1],1),b);return k};c.prototype.getRawByteCoords=function(c,
m,e,d,b){c=this.getCoords(c,m,e,d,b);return{x:c[0]+32,y:c[1]+32}};return c}();f.MouseHelper=g},{}],12:[function(g,n,f){var c=this&&this.__extends||function(){var c=function(e,d){c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,a){b.__proto__=a}||function(b,a){for(var d in a)a.hasOwnProperty(d)&&(b[d]=a[d])};return c(e,d)};return function(e,d){function b(){this.constructor=e}c(e,d);e.prototype=null===d?Object.create(d):(b.prototype=d.prototype,new b)}}();Object.defineProperty(f,
"__esModule",{value:!0});n=g("./common/Lifecycle");var k=g("./ui/Lifecycle");g=function(m){function e(d){var b=m.call(this)||this;b._terminal=d;b._zones=[];b._areZonesActive=!1;b._tooltipTimeout=null;b._currentZone=null;b._lastHoverCoords=[null,null];b.register(k.addDisposableDomListener(b._terminal.element,"mousedown",function(a){return b._onMouseDown(a)}));b._mouseMoveListener=function(a){return b._onMouseMove(a)};b._mouseLeaveListener=function(a){return b._onMouseLeave(a)};b._clickListener=function(a){return b._onClick(a)};
return b}c(e,m);e.prototype.dispose=function(){m.prototype.dispose.call(this);this._deactivate()};e.prototype.add=function(d){this._zones.push(d);1===this._zones.length&&this._activate()};e.prototype.clearAll=function(d,b){if(0!==this._zones.length){b||(d=0,b=this._terminal.rows-1);for(var a=0;a<this._zones.length;a++){var e=this._zones[a];if(e.y1>d&&e.y1<=b+1||e.y2>d&&e.y2<=b+1||e.y1<d&&e.y2>b+1)this._currentZone&&this._currentZone===e&&(this._currentZone.leaveCallback(),this._currentZone=null),
this._zones.splice(a--,1)}0===this._zones.length&&this._deactivate()}};e.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._terminal.element.addEventListener("mousemove",this._mouseMoveListener),this._terminal.element.addEventListener("mouseleave",this._mouseLeaveListener),this._terminal.element.addEventListener("click",this._clickListener))};e.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._terminal.element.removeEventListener("mousemove",
this._mouseMoveListener),this._terminal.element.removeEventListener("mouseleave",this._mouseLeaveListener),this._terminal.element.removeEventListener("click",this._clickListener))};e.prototype._onMouseMove=function(d){if(this._lastHoverCoords[0]!==d.pageX||this._lastHoverCoords[1]!==d.pageY)this._onHover(d),this._lastHoverCoords=[d.pageX,d.pageY]};e.prototype._onHover=function(d){var b=this,a=this._findZoneEventAt(d);a!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=
null,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),a&&(this._currentZone=a,a.hoverCallback&&a.hoverCallback(d),this._tooltipTimeout=setTimeout(function(){return b._onTooltip(d)},500)))};e.prototype._onTooltip=function(d){this._tooltipTimeout=null;var b=this._findZoneEventAt(d);b&&b.tooltipCallback&&b.tooltipCallback(d)};e.prototype._onMouseDown=function(d){this._initialSelectionLength=this._terminal.getSelection().length;if(this._areZonesActive){var b=this._findZoneEventAt(d);b&&b.willLinkActivate(d)&&
(d.preventDefault(),d.stopImmediatePropagation())}};e.prototype._onMouseLeave=function(d){this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=null,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout))};e.prototype._onClick=function(d){var b=this._findZoneEventAt(d),a=this._terminal.getSelection().length;b&&a===this._initialSelectionLength&&(b.clickCallback(d),d.preventDefault(),d.stopImmediatePropagation())};e.prototype._findZoneEventAt=function(d){var b=this._terminal.mouseHelper.getCoords(d,
this._terminal.screenElement,this._terminal.charMeasure,this._terminal.cols,this._terminal.rows);if(!b)return null;d=b[0];b=b[1];for(var a=0;a<this._zones.length;a++){var e=this._zones[a];if(e.y1===e.y2){if(b===e.y1&&d>=e.x1&&d<e.x2)return e}else if(b===e.y1&&d>=e.x1||b===e.y2&&d<e.x2||b>e.y1&&b<e.y2)return e}return null};return e}(n.Disposable);f.MouseZoneManager=g;g=function(){return function(c,e,d,b,a,l,h,k,f){this.x1=c;this.y1=e;this.x2=d;this.y2=b;this.clickCallback=a;this.hoverCallback=l;this.tooltipCallback=
h;this.leaveCallback=k;this.willLinkActivate=f}}();f.MouseZone=g},{"./common/Lifecycle":24,"./ui/Lifecycle":59}],13:[function(g,n,f){Object.defineProperty(f,"__esModule",{value:!0});var c=g("./MouseHelper"),k=g("./common/Platform"),m=g("./SelectionModel"),e=g("./handlers/AltClickHandler"),d=g("./core/buffer/BufferLine"),b=g("./common/EventEmitter2");g=String.fromCharCode(160);var a=new RegExp(g,"g");g=function(){function l(a,e){this._terminal=a;this._charMeasure=e;this._enabled=!0;this._workCell=
new d.CellData;this._onLinuxMouseSelection=new b.EventEmitter2;this._onRedrawRequest=new b.EventEmitter2;this._onSelectionChange=new b.EventEmitter2;this._initListeners();this.enable();this._model=new m.SelectionModel(a);this._activeSelectionMode=0}Object.defineProperty(l.prototype,"onLinuxMouseSelection",{get:function(){return this._onLinuxMouseSelection.event},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"onRedrawRequest",{get:function(){return this._onRedrawRequest.event},
enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!0,configurable:!0});l.prototype.dispose=function(){this._removeMouseDownListeners()};Object.defineProperty(l.prototype,"_buffer",{get:function(){return this._terminal.buffers.active},enumerable:!0,configurable:!0});l.prototype._initListeners=function(){var a=this;this._mouseMoveListener=function(b){return a._onMouseMove(b)};this._mouseUpListener=function(b){return a._onMouseUp(b)};
this.initBuffersListeners()};l.prototype.initBuffersListeners=function(){var a=this;this._trimListener=this._terminal.buffer.lines.onTrim(function(b){return a._onTrim(b)});this._terminal.buffers.onBufferActivate(function(b){return a._onBufferActivate(b)})};l.prototype.disable=function(){this.clearSelection();this._enabled=!1};l.prototype.enable=function(){this._enabled=!0};Object.defineProperty(l.prototype,"selectionStart",{get:function(){return this._model.finalSelectionStart},enumerable:!0,configurable:!0});
Object.defineProperty(l.prototype,"selectionEnd",{get:function(){return this._model.finalSelectionEnd},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"hasSelection",{get:function(){var a=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;return a&&b?a[0]!==b[0]||a[1]!==b[1]:!1},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"selectionText",{get:function(){var b=this._model.finalSelectionStart,d=this._model.finalSelectionEnd;if(!b||!d)return"";var e=
[];if(3===this._activeSelectionMode){if(b[0]===d[0])return"";for(var l=b[1];l<=d[1];l++){var c=this._buffer.translateBufferLineToString(l,!0,b[0],d[0]);e.push(c)}}else{e.push(this._buffer.translateBufferLineToString(b[1],!0,b[0],b[1]===d[1]?d[0]:void 0));for(l=b[1]+1;l<=d[1]-1;l++){var m=this._buffer.lines.get(l);c=this._buffer.translateBufferLineToString(l,!0);m.isWrapped?e[e.length-1]+=c:e.push(c)}b[1]!==d[1]&&(m=this._buffer.lines.get(d[1]),c=this._buffer.translateBufferLineToString(d[1],!0,0,
d[0]),m.isWrapped?e[e.length-1]+=c:e.push(c))}return e.map(function(b){return b.replace(a," ")}).join(k.isMSWindows?"\r\n":"\n")},enumerable:!0,configurable:!0});l.prototype.clearSelection=function(){this._model.clearSelection();this._removeMouseDownListeners();this.refresh();this._onSelectionChange.fire()};l.prototype.refresh=function(a){var b=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(function(){return b._refresh()}));k.isLinux&&a&&this.selectionText.length&&
this._onLinuxMouseSelection.fire(this.selectionText)};l.prototype._refresh=function(){this._refreshAnimationFrame=null;this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:3===this._activeSelectionMode})};l.prototype.isClickInSelection=function(a){a=this._getMouseBufferCoords(a);var b=this._model.finalSelectionStart,d=this._model.finalSelectionEnd;return b&&d?this._areCoordsInSelection(a,b,d):!1};l.prototype._areCoordsInSelection=function(a,
b,d){return a[1]>b[1]&&a[1]<d[1]||b[1]===d[1]&&a[1]===b[1]&&a[0]>=b[0]&&a[0]<d[0]||b[1]<d[1]&&a[1]===d[1]&&a[0]<d[0]||b[1]<d[1]&&a[1]===b[1]&&a[0]>=b[0]};l.prototype.selectWordAtCursor=function(a){if(a=this._getMouseBufferCoords(a))this._selectWordAt(a,!1),this._model.selectionEnd=null,this.refresh(!0)};l.prototype.selectAll=function(){this._model.isSelectAllActive=!0;this.refresh();this._onSelectionChange.fire()};l.prototype.selectLines=function(a,b){this._model.clearSelection();a=Math.max(a,0);
b=Math.min(b,this._terminal.buffer.lines.length-1);this._model.selectionStart=[0,a];this._model.selectionEnd=[this._terminal.cols,b];this.refresh();this._onSelectionChange.fire()};l.prototype._onTrim=function(a){this._model.onTrim(a)&&this.refresh()};l.prototype._getMouseBufferCoords=function(a){a=this._terminal.mouseHelper.getCoords(a,this._terminal.screenElement,this._charMeasure,this._terminal.cols,this._terminal.rows,!0);if(!a)return null;a[0]--;a[1]--;a[1]+=this._terminal.buffer.ydisp;return a};
l.prototype._getMouseEventScrollAmount=function(a){a=c.MouseHelper.getCoordsRelativeToElement(a,this._terminal.screenElement)[1];var b=this._terminal.rows*Math.ceil(this._charMeasure.height*this._terminal.options.lineHeight);if(0<=a&&a<=b)return 0;a>b&&(a-=b);a=Math.min(Math.max(a,-50),50);a/=50;return a/Math.abs(a)+Math.round(14*a)};l.prototype.shouldForceSelection=function(a){return k.isMac?a.altKey&&this._terminal.options.macOptionClickForcesSelection:a.shiftKey};l.prototype.onMouseDown=function(a){this._mouseDownTimeStamp=
a.timeStamp;if((2!==a.button||!this.hasSelection)&&0===a.button){if(!this._enabled){if(!this.shouldForceSelection(a))return;a.stopPropagation()}a.preventDefault();this._dragScrollAmount=0;this._enabled&&a.shiftKey?this._onIncrementalClick(a):1===a.detail?this._onSingleClick(a):2===a.detail?this._onDoubleClick(a):3===a.detail&&this._onTripleClick(a);this._addMouseDownListeners();this.refresh(!0)}};l.prototype._addMouseDownListeners=function(){var a=this;this._terminal.element.ownerDocument.addEventListener("mousemove",
this._mouseMoveListener);this._terminal.element.ownerDocument.addEventListener("mouseup",this._mouseUpListener);this._dragScrollIntervalTimer=setInterval(function(){return a._dragScroll()},50)};l.prototype._removeMouseDownListeners=function(){this._terminal.element.ownerDocument&&(this._terminal.element.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._terminal.element.ownerDocument.removeEventListener("mouseup",this._mouseUpListener));clearInterval(this._dragScrollIntervalTimer);
this._dragScrollIntervalTimer=null};l.prototype._onIncrementalClick=function(a){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(a))};l.prototype._onSingleClick=function(a){this._model.selectionStartLength=0;this._model.isSelectAllActive=!1;this._activeSelectionMode=this.shouldColumnSelect(a)?3:0;this._model.selectionStart=this._getMouseBufferCoords(a);this._model.selectionStart&&(this._model.selectionEnd=null,(a=this._buffer.lines.get(this._model.selectionStart[1]))&&
(a.length>=this._model.selectionStart[0]||0===a.hasWidth(this._model.selectionStart[0])&&this._model.selectionStart[0]++))};l.prototype._onDoubleClick=function(a){if(a=this._getMouseBufferCoords(a))this._activeSelectionMode=1,this._selectWordAt(a,!0)};l.prototype._onTripleClick=function(a){if(a=this._getMouseBufferCoords(a))this._activeSelectionMode=2,this._selectLineAt(a[1])};l.prototype.shouldColumnSelect=function(a){return a.altKey&&!(k.isMac&&this._terminal.options.macOptionClickForcesSelection)};
l.prototype._onMouseMove=function(a){a.stopImmediatePropagation();var b=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;this._model.selectionEnd=this._getMouseBufferCoords(a);this._model.selectionEnd?(2===this._activeSelectionMode?this._model.selectionEnd[0]=this._model.selectionEnd[1]<this._model.selectionStart[1]?0:this._terminal.cols:1===this._activeSelectionMode&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(a),
3!==this._activeSelectionMode&&(0<this._dragScrollAmount?this._model.selectionEnd[0]=this._terminal.cols:0>this._dragScrollAmount&&(this._model.selectionEnd[0]=0)),this._model.selectionEnd[1]<this._buffer.lines.length&&0===this._buffer.lines.get(this._model.selectionEnd[1]).hasWidth(this._model.selectionEnd[0])&&this._model.selectionEnd[0]++,b&&b[0]===this._model.selectionEnd[0]&&b[1]===this._model.selectionEnd[1]||this.refresh(!0)):this.refresh(!0)};l.prototype._dragScroll=function(){this._dragScrollAmount&&
(this._terminal.scrollLines(this._dragScrollAmount,!1),0<this._dragScrollAmount?(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=this._terminal.cols),this._model.selectionEnd[1]=Math.min(this._terminal.buffer.ydisp+this._terminal.rows,this._terminal.buffer.lines.length-1)):(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=this._terminal.buffer.ydisp),this.refresh())};l.prototype._onMouseUp=function(a){var b=a.timeStamp-this._mouseDownTimeStamp;
this._removeMouseDownListeners();1>=this.selectionText.length&&500>b?(new e.AltClickHandler(a,this._terminal)).move():this.hasSelection&&this._onSelectionChange.fire()};l.prototype._onBufferActivate=function(a){var b=this;this.clearSelection();this._trimListener&&this._trimListener.dispose();this._trimListener=a.activeBuffer.lines.onTrim(function(a){return b._onTrim(a)})};l.prototype._convertViewportColToCharacterIndex=function(a,b){for(var d=b[0],e=0;b[0]>=e;e++){var h=a.loadCell(e,this._workCell).getChars().length;
0===this._workCell.getWidth()?d--:1<h&&b[0]!==e&&(d+=h-1)}return d};l.prototype.setSelection=function(a,b,d){this._model.clearSelection();this._removeMouseDownListeners();this._model.selectionStart=[a,b];this._model.selectionStartLength=d;this.refresh()};l.prototype._getWordAt=function(a,b,d,e){void 0===d&&(d=!0);void 0===e&&(e=!0);if(a[0]>=this._terminal.cols)return null;var h=this._buffer.lines.get(a[1]);if(!h)return null;var l=this._buffer.translateBufferLineToString(a[1],!1),c=this._convertViewportColToCharacterIndex(h,
a),k=c,m=a[0]-c,f=0,q=0,g=0,r=0;if(" "===l.charAt(c)){for(;0<c&&" "===l.charAt(c-1);)c--;for(;k<l.length&&" "===l.charAt(k+1);)k++}else{var v=a[0],n=a[0];0===h.getWidth(v)&&(f++,v--);2===h.getWidth(n)&&(q++,n++);var x=h.getString(n).length;1<x&&(r+=x-1,k+=x-1);for(;0<v&&0<c&&!this._isCharWordSeparator(h.loadCell(v-1,this._workCell));)h.loadCell(v-1,this._workCell),x=this._workCell.getChars().length,0===this._workCell.getWidth()?(f++,v--):1<x&&(g+=x-1,c-=x-1),c--,v--;for(;n<h.length&&k+1<l.length&&
!this._isCharWordSeparator(h.loadCell(n+1,this._workCell));)h.loadCell(n+1,this._workCell),v=this._workCell.getChars().length,2===this._workCell.getWidth()?(q++,n++):1<v&&(r+=v-1,k+=v-1),k++,n++}k++;m=c+m-f+g;f=Math.min(this._terminal.cols,k-c+f+q-g-r);if(!b&&""===l.slice(c,k).trim())return null;d&&0===m&&32!==h.getCodePoint(0)&&(b=this._buffer.lines.get(a[1]-1))&&h.isWrapped&&32!==b.getCodePoint(this._terminal.cols-1)&&(b=this._getWordAt([this._terminal.cols-1,a[1]-1],!1,!0,!1))&&(b=this._terminal.cols-
b.start,m-=b,f+=b);e&&m+f===this._terminal.cols&&32!==h.getCodePoint(this._terminal.cols-1)&&(e=this._buffer.lines.get(a[1]+1))&&e.isWrapped&&32!==e.getCodePoint(0)&&(a=this._getWordAt([0,a[1]+1],!1,!1,!0))&&(f+=a.length);return{start:m,length:f}};l.prototype._selectWordAt=function(a,b){if(b=this._getWordAt(a,b)){for(;0>b.start;)b.start+=this._terminal.cols,a[1]--;this._model.selectionStart=[b.start,a[1]];this._model.selectionStartLength=b.length}};l.prototype._selectToWordAt=function(a){var b=this._getWordAt(a,
!0);if(b){for(a=a[1];0>b.start;)b.start+=this._terminal.cols,a--;if(!this._model.areSelectionValuesReversed())for(;b.start+b.length>this._terminal.cols;)b.length-=this._terminal.cols,a++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?b.start:b.start+b.length,a]}};l.prototype._isCharWordSeparator=function(a){return 0===a.getWidth()?!1:0<=" ()[]{}'\"".indexOf(a.getChars())};l.prototype._selectLineAt=function(a){a=this._buffer.getWrappedRangeForLine(a);this._model.selectionStart=
[0,a.first];this._model.selectionEnd=[this._terminal.cols,a.last];this._model.selectionStartLength=0};return l}();f.SelectionManager=g},{"./MouseHelper":11,"./SelectionModel":14,"./common/EventEmitter2":23,"./common/Platform":25,"./core/buffer/BufferLine":29,"./handlers/AltClickHandler":35}],14:[function(g,n,f){Object.defineProperty(f,"__esModule",{value:!0});g=function(){function c(c){this._terminal=c;this.clearSelection()}c.prototype.clearSelection=function(){this.selectionEnd=this.selectionStart=
null;this.isSelectAllActive=!1;this.selectionStartLength=0};Object.defineProperty(c.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart?this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart:this.selectionStart},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"finalSelectionEnd",{get:function(){if(this.isSelectAllActive)return[this._terminal.cols,this._terminal.buffer.ybase+this._terminal.rows-
1];if(!this.selectionStart)return null;if(!this.selectionEnd||this.areSelectionValuesReversed()){var c=this.selectionStart[0]+this.selectionStartLength;return c>this._terminal.cols?[c%this._terminal.cols,this.selectionStart[1]+Math.floor(c/this._terminal.cols)]:[c,this.selectionStart[1]]}return this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?[Math.max(this.selectionStart[0]+this.selectionStartLength,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd},enumerable:!0,
configurable:!0});c.prototype.areSelectionValuesReversed=function(){var c=this.selectionStart,m=this.selectionEnd;return c&&m?c[1]>m[1]||c[1]===m[1]&&c[0]>m[0]:!1};c.prototype.onTrim=function(c){this.selectionStart&&(this.selectionStart[1]-=c);this.selectionEnd&&(this.selectionEnd[1]-=c);if(this.selectionEnd&&0>this.selectionEnd[1])return this.clearSelection(),!0;this.selectionStart&&0>this.selectionStart[1]&&(this.selectionStart[1]=0);return!1};return c}();f.SelectionModel=g},{}],15:[function(g,
n,f){Object.defineProperty(f,"__esModule",{value:!0});f.DEFAULT_BELL_SOUND="data:audio/wav;base64,UklGRigBAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQQBAADpAFgCwAMlBZoG/wdmCcoKRAypDQ8PbRDBEQQTOxRtFYcWlBePGIUZXhoiG88bcBz7HHIdzh0WHlMeZx51HmkeUx4WHs8dah0AHXwc3hs9G4saxRnyGBIYGBcQFv8U4RPAEoYRQBACD70NWwwHC6gJOwjWBloF7gOBAhABkf8b/qv8R/ve+Xf4Ife79W/0JfPZ8Z/wde9N7ijtE+wU6xvqM+lb6H7nw+YX5mrlxuQz5Mzje+Ma49fioeKD4nXiYeJy4pHitOL04j/jn+MN5IPkFOWs5U3mDefM55/ogOl36m7rdOyE7abuyu8D8Unyj/Pg9D/2qfcb+Yn6/vuK/Qj/lAAlAg==";
g=function(){function c(c){this._terminal=c}Object.defineProperty(c,"audioContext",{get:function(){if(!c._audioContext){var k=window.AudioContext||window.webkitAudioContext;if(!k)return console.warn("Web Audio API is not supported by this browser. Consider upgrading to the latest version"),null;c._audioContext=new k}return c._audioContext},enumerable:!0,configurable:!0});c.prototype.playBellSound=function(){var k=c.audioContext;if(k){var m=k.createBufferSource();k.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._terminal.options.bellSound)),
function(e){m.buffer=e;m.connect(k.destination);m.start(0)})}};c.prototype._base64ToArrayBuffer=function(c){c=window.atob(c);for(var k=c.length,e=new Uint8Array(k),d=0;d<k;d++)e[d]=c.charCodeAt(d);return e.buffer};c.prototype._removeMimeType=function(c){return c.split(",")[1]};return c}();f.SoundManager=g},{}],16:[function(g,n,f){Object.defineProperty(f,"__esModule",{value:!0});f.blankLine="Blank line";f.promptLabel="Terminal input";f.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},
{}],17:[function(g,n,f){var c=this&&this.__extends||function(){var a=function(b,d){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d])};return a(b,d)};return function(b,d){function e(){this.constructor=b}a(b,d);b.prototype=null===d?Object.create(d):(e.prototype=d.prototype,new e)}}();Object.defineProperty(f,"__esModule",{value:!0});var k=g("./BufferSet"),m=g("./Buffer"),e=g("./CompositionHelper");n=g("./common/EventEmitter");
var d=g("./Viewport"),b=g("./Clipboard"),a=g("./common/data/EscapeSequences"),l=g("./InputHandler"),h=g("./renderer/Renderer"),q=g("./Linkifier"),r=g("./SelectionManager"),v=g("./CharMeasure"),p=g("./common/Platform"),t=g("./ui/Lifecycle"),u=g("./Strings"),y=g("./MouseHelper"),D=g("./SoundManager"),H=g("./MouseZoneManager"),z=g("./AccessibilityManager"),B=g("./renderer/atlas/CharAtlasCache"),C=g("./renderer/dom/DomRenderer"),I=g("./core/input/Keyboard"),w=g("./common/Clone"),x=g("./common/EventEmitter2"),
F=g("./core/buffer/BufferLine"),G=g("./WindowsMode"),J=g("./ui/ColorManager"),K=g("./renderer/RenderCoordinator"),A="undefined"!==typeof window?window.document:null,L=["cols","rows"],E={cols:80,rows:24,convertEol:!1,termName:"xterm",cursorBlink:!1,cursorStyle:"block",bellSound:D.DEFAULT_BELL_SOUND,bellStyle:"none",drawBoldTextInBrightColors:!0,enableBold:!0,experimentalCharAtlas:"static",fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,
letterSpacing:0,scrollback:1E3,screenKeys:!1,screenReaderMode:!1,debug:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,cancelEvents:!1,disableStdin:!1,useFlowControl:!1,allowTransparency:!1,tabStopWidth:8,theme:void 0,rightClickSelectsWord:p.isMac,rendererType:"canvas",windowsMode:!1};g=function(f){function g(a){void 0===a&&(a={});var b=f.call(this)||this;b.browser=p;b._blankLine=null;b._onCursorMove=new x.EventEmitter2;b._onData=new x.EventEmitter2;b._onKey=new x.EventEmitter2;b._onLineFeed=
new x.EventEmitter2;b._onRender=new x.EventEmitter2;b._onResize=new x.EventEmitter2;b._onScroll=new x.EventEmitter2;b._onSelectionChange=new x.EventEmitter2;b._onTitleChange=new x.EventEmitter2;b.options=w.clone(a);b._setup();b.onCursorMove(function(){return b.emit("cursormove")});b.onData(function(a){return b.emit("data",a)});b.onKey(function(a){return b.emit("key",a.key,a.domEvent)});b.onLineFeed(function(){return b.emit("linefeed")});b.onRender(function(a){return b.emit("refresh",a)});b.onResize(function(a){return b.emit("resize",
a)});b.onSelectionChange(function(){return b.emit("selection")});b.onScroll(function(a){return b.emit("scroll",a)});b.onTitleChange(function(a){return b.emit("title",a)});return b}c(g,f);Object.defineProperty(g.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"onData",{get:function(){return this._onData.event},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"onKey",{get:function(){return this._onKey.event},
enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!0,
configurable:!0});Object.defineProperty(g.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!0,configurable:!0});g.prototype.dispose=function(){f.prototype.dispose.call(this);this._windowsMode&&(this._windowsMode.dispose(),this._windowsMode=void 0);this._customKeyEventHandler=null;B.removeTerminalFromCache(this);this.handler=
function(){};this.write=function(){};this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)};g.prototype.destroy=function(){this.dispose()};g.prototype._setup=function(){var a=this;Object.keys(E).forEach(function(b){if(null===a.options[b]||void 0===a.options[b])a.options[b]=E[b]});this._parent=A?A.body:null;this.cols=Math.max(this.options.cols,2);this.rows=Math.max(this.options.rows,1);if(this.options.handler)this.onData(this.options.handler);this.cursorState=0;this.cursorHidden=
!1;this._customKeyEventHandler=null;this.insertMode=this.originMode=this.applicationCursor=this.applicationKeypad=!1;this.wraparoundMode=!0;this.bracketedPasteMode=!1;this.gcharset=this.charset=null;this.glevel=0;this.charsets=[null];this.curAttrData=F.DEFAULT_ATTR_DATA.clone();this._eraseAttrData=F.DEFAULT_ATTR_DATA.clone();this.params=[];this.currentParam=0;this.writeBuffer=[];this.writeBufferUtf8=[];this._userScrolling=this._xoffSentToCatchUp=this._writeInProgress=!1;this._inputHandler=new l.InputHandler(this);
this._inputHandler.onCursorMove(function(){return a._onCursorMove.fire()});this._inputHandler.onLineFeed(function(){return a._onLineFeed.fire()});this._inputHandler.onData(function(b){return a._onData.fire(b)});this.register(this._inputHandler);this.selectionManager=this.selectionManager||null;this.linkifier=this.linkifier||new q.Linkifier(this);this._mouseZoneManager=this._mouseZoneManager||null;this.soundManager=this.soundManager||new D.SoundManager(this);this.buffers=new k.BufferSet(this);this.selectionManager&&
(this.selectionManager.clearSelection(),this.selectionManager.initBuffersListeners());this.options.windowsMode&&(this._windowsMode=G.applyWindowsMode(this))};Object.defineProperty(g.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!0,configurable:!0});g.prototype.eraseAttrData=function(){this._eraseAttrData.bg&=-67108864;this._eraseAttrData.bg|=this.curAttrData.bg&67108863;return this._eraseAttrData};g.prototype.focus=function(){this.textarea&&this.textarea.focus({preventScroll:!0})};
Object.defineProperty(g.prototype,"isFocused",{get:function(){return A.activeElement===this.textarea&&A.hasFocus()},enumerable:!0,configurable:!0});g.prototype.getOption=function(a){if(!(a in E))throw Error('No option with key "'+a+'"');return this.options[a]};g.prototype.setOption=function(a,b){if(!(a in E))throw Error('No option with key "'+a+'"');-1!==L.indexOf(a)&&console.error('Option "'+a+'" can only be set in the constructor');if(this.options[a]!==b){switch(a){case "bellStyle":b||(b="none");
break;case "cursorStyle":b||(b="block");break;case "fontWeight":b||(b="normal");break;case "fontWeightBold":b||(b="bold");break;case "lineHeight":if(1>b){console.warn(a+" cannot be less than 1, value: "+b);return}case "rendererType":b||(b="canvas");break;case "tabStopWidth":if(1>b){console.warn(a+" cannot be less than 1, value: "+b);return}break;case "theme":this._setTheme(b);break;case "scrollback":b=Math.min(b,m.MAX_BUFFER_SIZE);if(0>b){console.warn(a+" cannot be less than 0, value: "+b);return}if(this.options[a]!==
b){var d=this.rows+b;if(this.buffer.lines.length>d){d=this.buffer.lines.length-d;var e=0>this.buffer.ydisp-d;this.buffer.lines.trimStart(d);this.buffer.ybase=Math.max(this.buffer.ybase-d,0);this.buffer.ydisp=Math.max(this.buffer.ydisp-d,0);e&&this.refresh(0,this.rows-1)}}}this.options[a]=b;switch(a){case "fontFamily":case "fontSize":this._renderCoordinator&&(this._renderCoordinator.clear(),this.charMeasure.measure(this.options));break;case "drawBoldTextInBrightColors":case "experimentalCharAtlas":case "enableBold":case "letterSpacing":case "lineHeight":case "fontWeight":case "fontWeightBold":this._renderCoordinator&&
(this._renderCoordinator.clear(),this._renderCoordinator.onResize(this.cols,this.rows),this.refresh(0,this.rows-1));break;case "rendererType":this._renderCoordinator&&this._renderCoordinator.setRenderer(this._createRenderer());break;case "scrollback":this.buffers.resize(this.cols,this.rows);this.viewport&&this.viewport.syncScrollArea();break;case "screenReaderMode":b?!this._accessibilityManager&&this._renderCoordinator&&(this._accessibilityManager=new z.AccessibilityManager(this,this._renderCoordinator.dimensions)):
this._accessibilityManager&&(this._accessibilityManager.dispose(),this._accessibilityManager=null);break;case "tabStopWidth":this.buffers.setupTabStops();break;case "windowsMode":b?this._windowsMode||(this._windowsMode=G.applyWindowsMode(this)):this._windowsMode&&(this._windowsMode.dispose(),this._windowsMode=void 0)}if(this._renderCoordinator)this._renderCoordinator.onOptionsChanged()}};g.prototype._onTextAreaFocus=function(b){this.sendFocus&&this.handler(a.C0.ESC+"[I");this.updateCursorStyle(b);
this.element.classList.add("focus");this.showCursor();this.emit("focus")};g.prototype.blur=function(){return this.textarea.blur()};g.prototype._onTextAreaBlur=function(){this.textarea.value="";this.refresh(this.buffer.y,this.buffer.y);this.sendFocus&&this.handler(a.C0.ESC+"[O");this.element.classList.remove("focus");this.emit("blur")};g.prototype._initGlobal=function(){var a=this;this._bindKeys();this.register(t.addDisposableDomListener(this.element,"copy",function(d){a.hasSelection()&&b.copyHandler(d,
a,a.selectionManager)}));var d=function(d){return b.pasteHandler(d,a)};this.register(t.addDisposableDomListener(this.textarea,"paste",d));this.register(t.addDisposableDomListener(this.element,"paste",d));p.isFirefox?this.register(t.addDisposableDomListener(this.element,"mousedown",function(d){2===d.button&&b.rightClickHandler(d,a,a.selectionManager,a.options.rightClickSelectsWord)})):this.register(t.addDisposableDomListener(this.element,"contextmenu",function(d){b.rightClickHandler(d,a,a.selectionManager,
a.options.rightClickSelectsWord)}));p.isLinux&&this.register(t.addDisposableDomListener(this.element,"auxclick",function(d){1===d.button&&b.moveTextAreaUnderMouseCursor(d,a)}))};g.prototype._bindKeys=function(){var a=this,b=this;this.register(t.addDisposableDomListener(this.element,"keydown",function(a){A.activeElement===this&&b._keyDown(a)},!0));this.register(t.addDisposableDomListener(this.element,"keypress",function(a){A.activeElement===this&&b._keyPress(a)},!0));this.register(t.addDisposableDomListener(this.element,
"keyup",function(d){16!==d.keyCode&&17!==d.keyCode&&18!==d.keyCode&&a.focus();b._keyUp(d)},!0));this.register(t.addDisposableDomListener(this.textarea,"keydown",function(b){return a._keyDown(b)},!0));this.register(t.addDisposableDomListener(this.textarea,"keypress",function(b){return a._keyPress(b)},!0));this.register(t.addDisposableDomListener(this.textarea,"compositionstart",function(){return a._compositionHelper.compositionstart()}));this.register(t.addDisposableDomListener(this.textarea,"compositionupdate",
function(b){return a._compositionHelper.compositionupdate(b)}));this.register(t.addDisposableDomListener(this.textarea,"compositionend",function(){return a._compositionHelper.compositionend()}));this.register(this.onRender(function(){return a._compositionHelper.updateCompositionElements()}));this.register(this.onRender(function(b){return a._queueLinkification(b.start,b.end)}))};g.prototype.open=function(a){var b=this;this._parent=a||this._parent;if(!this._parent)throw Error("Terminal requires a parent element.");
this._context=this._parent.ownerDocument.defaultView;this._document=this._parent.ownerDocument;this.element=this._document.createElement("div");this.element.dir="ltr";this.element.classList.add("terminal");this.element.classList.add("xterm");this.element.setAttribute("tabindex","0");this._parent.appendChild(this.element);a=A.createDocumentFragment();this._viewportElement=A.createElement("div");this._viewportElement.classList.add("xterm-viewport");a.appendChild(this._viewportElement);this._viewportScrollArea=
A.createElement("div");this._viewportScrollArea.classList.add("xterm-scroll-area");this._viewportElement.appendChild(this._viewportScrollArea);this.screenElement=A.createElement("div");this.screenElement.classList.add("xterm-screen");this._helperContainer=A.createElement("div");this._helperContainer.classList.add("xterm-helpers");this.screenElement.appendChild(this._helperContainer);a.appendChild(this.screenElement);this._mouseZoneManager=new H.MouseZoneManager(this);this.register(this._mouseZoneManager);
this.register(this.onScroll(function(){return b._mouseZoneManager.clearAll()}));this.linkifier.attachToDom(this._mouseZoneManager);this.textarea=A.createElement("textarea");this.textarea.classList.add("xterm-helper-textarea");this.textarea.setAttribute("aria-label",u.promptLabel);this.textarea.setAttribute("aria-multiline","false");this.textarea.setAttribute("autocorrect","off");this.textarea.setAttribute("autocapitalize","off");this.textarea.setAttribute("spellcheck","false");this.textarea.tabIndex=
0;this.register(t.addDisposableDomListener(this.textarea,"focus",function(a){return b._onTextAreaFocus(a)}));this.register(t.addDisposableDomListener(this.textarea,"blur",function(){return b._onTextAreaBlur()}));this._helperContainer.appendChild(this.textarea);this._compositionView=A.createElement("div");this._compositionView.classList.add("composition-view");this._compositionHelper=new e.CompositionHelper(this.textarea,this._compositionView,this);this._helperContainer.appendChild(this._compositionView);
this.charMeasure=new v.CharMeasure(A,this._helperContainer);this.element.appendChild(a);this._theme=this.options.theme;this._colorManager=new J.ColorManager(A,this.options.allowTransparency);this._colorManager.setTheme(this._theme);a=this._createRenderer();this._renderCoordinator=new K.RenderCoordinator(a,this.rows,this.screenElement);this._renderCoordinator.onRender(function(a){return b._onRender.fire(a)});this.onResize(function(a){return b._renderCoordinator.resize(a.cols,a.rows)});this.viewport=
new d.Viewport(this,this._viewportElement,this._viewportScrollArea,this.charMeasure,this._renderCoordinator.dimensions);this.viewport.onThemeChange(this._colorManager.colors);this.register(this.viewport);this.register(this.onCursorMove(function(){return b._renderCoordinator.onCursorMove()}));this.register(this.onResize(function(){return b._renderCoordinator.onResize(b.cols,b.rows)}));this.register(this.addDisposableListener("blur",function(){return b._renderCoordinator.onBlur()}));this.register(this.addDisposableListener("focus",
function(){return b._renderCoordinator.onFocus()}));this.register(this.charMeasure.onCharSizeChanged(function(){return b._renderCoordinator.onCharSizeChanged()}));this.register(this._renderCoordinator.onDimensionsChange(function(){return b.viewport.syncScrollArea()}));this.selectionManager=new r.SelectionManager(this,this.charMeasure);this.register(this.selectionManager.onSelectionChange(function(){return b._onSelectionChange.fire()}));this.register(t.addDisposableDomListener(this.element,"mousedown",
function(a){return b.selectionManager.onMouseDown(a)}));this.register(this.selectionManager.onRedrawRequest(function(a){return b._renderCoordinator.onSelectionChanged(a.start,a.end,a.columnSelectMode)}));this.register(this.selectionManager.onLinuxMouseSelection(function(a){b.textarea.value=a;b.textarea.focus();b.textarea.select()}));this.register(this.onScroll(function(){b.viewport.syncScrollArea();b.selectionManager.refresh()}));this.register(t.addDisposableDomListener(this._viewportElement,"scroll",
function(){return b.selectionManager.refresh()}));this.mouseHelper=new y.MouseHelper(this._renderCoordinator);this.element.classList.toggle("enable-mouse-events",this.mouseEvents);this.mouseEvents?this.selectionManager.disable():this.selectionManager.enable();this.options.screenReaderMode&&(this._accessibilityManager=new z.AccessibilityManager(this,this._renderCoordinator.dimensions),this._accessibilityManager.register(this._renderCoordinator.onDimensionsChange(function(a){return b._accessibilityManager.setDimensions(a)})));
this.charMeasure.measure(this.options);this.refresh(0,this.rows-1);this._initGlobal();this.bindMouse()};g.prototype._createRenderer=function(){switch(this.options.rendererType){case "canvas":return new h.Renderer(this,this._colorManager.colors);case "dom":return new C.DomRenderer(this,this._colorManager.colors);default:throw Error('Unrecognized rendererType "'+this.options.rendererType+'"');}};g.prototype._setTheme=function(a){this._theme=a;this._colorManager&&this._colorManager.setTheme(a);this._renderCoordinator&&
this._renderCoordinator.setColors(this._colorManager.colors);if(this.viewport)this.viewport.onThemeChange(this._colorManager.colors)};g.prototype.bindMouse=function(){function b(a){switch(a.overrideType||a.type){case "mousedown":var b=null!==a.button&&void 0!==a.button?+a.button:null!==a.which&&void 0!==a.which?a.which-1:null;p.isMSIE&&(b=1===b?0:4===b?1:b);break;case "mouseup":b=3;break;case "DOMMouseScroll":b=0>a.detail?64:65;break;case "wheel":b=0>a.deltaY?64:65}var d=a.shiftKey?4:0;var h=a.metaKey?
8:0;var l=a.ctrlKey?16:0;d=d|h|l;c.vt200Mouse?d&=l:c.normalMouse||(d=0);b=32+(d<<2)+b;if(l=c.mouseHelper.getRawByteCoords(a,c.screenElement,c.charMeasure,c.cols,c.rows))switch(e(b,l),a.overrideType||a.type){case "mousedown":k=b;break;case "mouseup":k=32}}function d(a,b){if(!c.utfMouse){if(255===b){a.push(0);return}127<b&&(b=127)}else if(2047<b){a.push(2047);return}a.push(b)}function e(b,e){if(c._vt300Mouse){b&=3;e.x-=32;e.y-=32;var h=a.C0.ESC+"[24";if(0===b)h+="1";else if(1===b)h+="3";else if(2===
b)h+="5";else{if(3===b)return;h+="0"}h+="~["+e.x+","+e.y+"]\r";c.handler(h)}else c._decLocator?(b&=3,e.x-=32,e.y-=32,0===b?b=2:1===b?b=4:2===b?b=6:3===b&&(b=3),c.handler(a.C0.ESC+"["+b+";"+(3===b?4:0)+";"+e.y+";"+e.x+";"+e.page||"0&w")):c.urxvtMouse?(e.x-=32,e.y-=32,e.x++,e.y++,c.handler(a.C0.ESC+"["+b+";"+e.x+";"+e.y+"M")):c.sgrMouse?(e.x-=32,e.y-=32,c.handler(a.C0.ESC+"[<"+((3===(b&3)?b&-4:b)-32)+";"+e.x+";"+e.y+(3===(b&3)?"m":"M"))):(h=[],d(h,b),d(h,e.x),d(h,e.y),c.handler(a.C0.ESC+"[M"+String.fromCharCode.apply(String,
h)))}var h=this,l=this.element,c=this,k=32;this.register(t.addDisposableDomListener(l,"mousedown",function(a){a.preventDefault();h.focus();if(h.mouseEvents&&!h.selectionManager.shouldForceSelection(a)){b(a);if(h.vt200Mouse)return a.overrideType="mouseup",b(a),h.cancel(a);if(h.normalMouse){var d=function(a){if(h.normalMouse){var b=k;(a=c.mouseHelper.getRawByteCoords(a,c.screenElement,c.charMeasure,c.cols,c.rows))&&e(b+32,a)}};h._document.addEventListener("mousemove",d)}var l=function(a){h.normalMouse&&
!h.x10Mouse&&b(a);d&&(h._document.removeEventListener("mousemove",d),d=null);h._document.removeEventListener("mouseup",l);return h.cancel(a)};h._document.addEventListener("mouseup",l);return h.cancel(a)}}));this.register(t.addDisposableDomListener(l,"wheel",function(d){if(h.mouseEvents)h.x10Mouse||h._vt300Mouse||h._decLocator||(b(d),d.preventDefault());else if(!h.buffer.hasScrollback){var e=h.viewport.getLinesScrolled(d);if(0!==e){d=a.C0.ESC+(h.applicationCursor?"O":"[")+(0>d.deltaY?"A":"B");for(var l=
"",c=0;c<Math.abs(e);c++)l+=d;h.handler(l)}}}));this.register(t.addDisposableDomListener(l,"wheel",function(a){if(!h.mouseEvents)return h.viewport.onWheel(a),h.cancel(a)}));this.register(t.addDisposableDomListener(l,"touchstart",function(a){if(!h.mouseEvents)return h.viewport.onTouchStart(a),h.cancel(a)}));this.register(t.addDisposableDomListener(l,"touchmove",function(a){if(!h.mouseEvents)return h.viewport.onTouchMove(a),h.cancel(a)}))};g.prototype.refresh=function(a,b){this._renderCoordinator&&
this._renderCoordinator.refreshRows(a,b)};g.prototype._queueLinkification=function(a,b){this.linkifier&&this.linkifier.linkifyRows(a,b)};g.prototype.updateCursorStyle=function(a){this.selectionManager&&this.selectionManager.shouldColumnSelect(a)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")};g.prototype.showCursor=function(){this.cursorState||(this.cursorState=1,this.refresh(this.buffer.y,this.buffer.y))};g.prototype.scroll=function(a){void 0===a&&(a=!1);
var b=this._blankLine;var d=this.eraseAttrData();b&&b.length===this.cols&&b.getFg(0)===d.fg&&b.getBg(0)===d.bg||(this._blankLine=b=this.buffer.getBlankLine(d,a));b.isWrapped=a;d=this.buffer.ybase+this.buffer.scrollTop;a=this.buffer.ybase+this.buffer.scrollBottom;0===this.buffer.scrollTop?(d=this.buffer.lines.isFull,a===this.buffer.lines.length-1?d?this.buffer.lines.recycle().copyFrom(b):this.buffer.lines.push(b.clone()):this.buffer.lines.splice(a+1,0,b.clone()),d)?this._userScrolling&&(this.buffer.ydisp=
Math.max(this.buffer.ydisp-1,0)):(this.buffer.ybase++,this._userScrolling||this.buffer.ydisp++):(this.buffer.lines.shiftElements(d+1,a-d+1-1,-1),this.buffer.lines.set(a,b.clone()));this._userScrolling||(this.buffer.ydisp=this.buffer.ybase);this.updateRange(this.buffer.scrollTop);this.updateRange(this.buffer.scrollBottom);this._onScroll.fire(this.buffer.ydisp)};g.prototype.scrollLines=function(a,b){if(0>a){if(0===this.buffer.ydisp)return;this._userScrolling=!0}else a+this.buffer.ydisp>=this.buffer.ybase&&
(this._userScrolling=!1);var d=this.buffer.ydisp;this.buffer.ydisp=Math.max(Math.min(this.buffer.ydisp+a,this.buffer.ybase),0);d!==this.buffer.ydisp&&(b||this._onScroll.fire(this.buffer.ydisp),this.refresh(0,this.rows-1))};g.prototype.scrollPages=function(a){this.scrollLines(a*(this.rows-1))};g.prototype.scrollToTop=function(){this.scrollLines(-this.buffer.ydisp)};g.prototype.scrollToBottom=function(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)};g.prototype.scrollToLine=function(a){a-=this.buffer.ydisp;
0!==a&&this.scrollLines(a)};g.prototype.writeUtf8=function(b){var d=this;!this._isDisposed&&b&&(this.writeBufferUtf8.push(b),this.options.useFlowControl&&!this._xoffSentToCatchUp&&5<=this.writeBufferUtf8.length&&(this.handler(a.C0.DC3),this._xoffSentToCatchUp=!0),!this._writeInProgress&&0<this.writeBufferUtf8.length&&(this._writeInProgress=!0,setTimeout(function(){d._innerWriteUtf8()})))};g.prototype._innerWriteUtf8=function(b){var d=this;void 0===b&&(b=0);this._isDisposed&&(this.writeBufferUtf8=
[]);for(var e=Date.now();this.writeBufferUtf8.length>b;){var h=this.writeBufferUtf8[b];b++;this._xoffSentToCatchUp&&this.writeBufferUtf8.length===b&&(this.handler(a.C0.DC1),this._xoffSentToCatchUp=!1);this._refreshEnd=this._refreshStart=this.buffer.y;this._inputHandler.parseUtf8(h);this.updateRange(this.buffer.y);this.refresh(this._refreshStart,this._refreshEnd);if(12<=Date.now()-e)break}this.writeBufferUtf8.length>b?(50<b&&(this.writeBufferUtf8=this.writeBufferUtf8.slice(b),b=0),setTimeout(function(){return d._innerWriteUtf8(b)},
0)):(this._writeInProgress=!1,this.writeBufferUtf8=[])};g.prototype.write=function(b){var d=this;!this._isDisposed&&b&&(this.writeBuffer.push(b),this.options.useFlowControl&&!this._xoffSentToCatchUp&&5<=this.writeBuffer.length&&(this.handler(a.C0.DC3),this._xoffSentToCatchUp=!0),!this._writeInProgress&&0<this.writeBuffer.length&&(this._writeInProgress=!0,setTimeout(function(){d._innerWrite()})))};g.prototype._innerWrite=function(b){var d=this;void 0===b&&(b=0);this._isDisposed&&(this.writeBuffer=
[]);for(var e=Date.now();this.writeBuffer.length>b;){var h=this.writeBuffer[b];b++;this._xoffSentToCatchUp&&this.writeBuffer.length===b&&(this.handler(a.C0.DC1),this._xoffSentToCatchUp=!1);this._refreshEnd=this._refreshStart=this.buffer.y;this._inputHandler.parse(h);this.updateRange(this.buffer.y);this.refresh(this._refreshStart,this._refreshEnd);if(12<=Date.now()-e)break}this.writeBuffer.length>b?(50<b&&(this.writeBuffer=this.writeBuffer.slice(b),b=0),setTimeout(function(){return d._innerWrite(b)},
0)):(this._writeInProgress=!1,this.writeBuffer=[])};g.prototype.writeln=function(a){this.write(a+"\r\n")};g.prototype.attachCustomKeyEventHandler=function(a){this._customKeyEventHandler=a};g.prototype.addCsiHandler=function(a,b){return this._inputHandler.addCsiHandler(a,b)};g.prototype.addOscHandler=function(a,b){return this._inputHandler.addOscHandler(a,b)};g.prototype.registerLinkMatcher=function(a,b,d){a=this.linkifier.registerLinkMatcher(a,b,d);this.refresh(0,this.rows-1);return a};g.prototype.deregisterLinkMatcher=
function(a){this.linkifier.deregisterLinkMatcher(a)&&this.refresh(0,this.rows-1)};g.prototype.registerCharacterJoiner=function(a){a=this._renderCoordinator.registerCharacterJoiner(a);this.refresh(0,this.rows-1);return a};g.prototype.deregisterCharacterJoiner=function(a){this._renderCoordinator.deregisterCharacterJoiner(a)&&this.refresh(0,this.rows-1)};Object.defineProperty(g.prototype,"markers",{get:function(){return this.buffer.markers},enumerable:!0,configurable:!0});g.prototype.addMarker=function(a){if(this.buffer===
this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+a)};g.prototype.hasSelection=function(){return this.selectionManager?this.selectionManager.hasSelection:!1};g.prototype.select=function(a,b,d){this.selectionManager.setSelection(a,b,d)};g.prototype.getSelection=function(){return this.selectionManager?this.selectionManager.selectionText:""};g.prototype.getSelectionPosition=function(){if(this.selectionManager.hasSelection)return{startColumn:this.selectionManager.selectionStart[0],
startRow:this.selectionManager.selectionStart[1],endColumn:this.selectionManager.selectionEnd[0],endRow:this.selectionManager.selectionEnd[1]}};g.prototype.clearSelection=function(){this.selectionManager&&this.selectionManager.clearSelection()};g.prototype.selectAll=function(){this.selectionManager&&this.selectionManager.selectAll()};g.prototype.selectLines=function(a,b){this.selectionManager&&this.selectionManager.selectLines(a,b)};g.prototype._keyDown=function(a){if(this._customKeyEventHandler&&
!1===this._customKeyEventHandler(a))return!1;if(!this._compositionHelper.keydown(a))return this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;var b=I.evaluateKeyboardEvent(a,this.applicationCursor,this.browser.isMac,this.options.macOptionIsMeta);this.updateCursorStyle(a);if(3===b.type||2===b.type){var d=this.rows-1;this.scrollLines(2===b.type?-d:d);return this.cancel(a,!0)}1===b.type&&this.selectAll();if(this._isThirdLevelShift(this.browser,a))return!0;b.cancel&&this.cancel(a,!0);if(!b.key)return!0;
this.emit("keydown",a);this._onKey.fire({key:b.key,domEvent:a});this.showCursor();this.handler(b.key);return this.cancel(a,!0)};g.prototype._isThirdLevelShift=function(a,b){a=a.isMac&&!this.options.macOptionIsMeta&&b.altKey&&!b.ctrlKey&&!b.metaKey||a.isMSWindows&&b.altKey&&b.ctrlKey&&!b.metaKey;return"keypress"===b.type?a:a&&(!b.keyCode||47<b.keyCode)};g.prototype.setgLevel=function(a){this.glevel=a;this.charset=this.charsets[a]};g.prototype.setgCharset=function(a,b){this.charsets[a]=b;this.glevel===
a&&(this.charset=b)};g.prototype._keyUp=function(a){this.updateCursorStyle(a)};g.prototype._keyPress=function(a){if(this._customKeyEventHandler&&!1===this._customKeyEventHandler(a))return!1;this.cancel(a);if(a.charCode)var b=a.charCode;else if(null===a.which||void 0===a.which)b=a.keyCode;else if(0!==a.which&&0!==a.charCode)b=a.which;else return!1;if(!b||(a.altKey||a.ctrlKey||a.metaKey)&&!this._isThirdLevelShift(this.browser,a))return!1;b=String.fromCharCode(b);this.emit("keypress",b,a);this._onKey.fire({key:b,
domEvent:a});this.showCursor();this.handler(b);return!0};g.prototype.bell=function(){var a=this;this.emit("bell");this._soundBell()&&this.soundManager.playBellSound();this._visualBell()&&(this.element.classList.add("visual-bell-active"),clearTimeout(this._visualBellTimer),this._visualBellTimer=window.setTimeout(function(){a.element.classList.remove("visual-bell-active")},200))};g.prototype.log=function(a,b){this.options.debug&&this._context.console&&this._context.console.log&&this._context.console.log(a,
b)};g.prototype.error=function(a,b){this.options.debug&&this._context.console&&this._context.console.error&&this._context.console.error(a,b)};g.prototype.resize=function(a,b){isNaN(a)||isNaN(b)||(a===this.cols&&b===this.rows?!this.charMeasure||this.charMeasure.width&&this.charMeasure.height||this.charMeasure.measure(this.options):(2>a&&(a=2),1>b&&(b=1),this.buffers.resize(a,b),this.cols=a,this.rows=b,this.buffers.setupTabStops(this.cols),this.charMeasure&&this.charMeasure.measure(this.options),this.refresh(0,
this.rows-1),this._onResize.fire({cols:a,rows:b})))};g.prototype.updateRange=function(a){a<this._refreshStart&&(this._refreshStart=a);a>this._refreshEnd&&(this._refreshEnd=a)};g.prototype.maxRange=function(){this._refreshStart=0;this._refreshEnd=this.rows-1};g.prototype.clear=function(){if(0!==this.buffer.ybase||0!==this.buffer.y){this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y));this.buffer.lines.length=1;this.buffer.ydisp=0;this.buffer.ybase=0;this.buffer.y=0;for(var a=
1;a<this.rows;a++)this.buffer.lines.push(this.buffer.getBlankLine(F.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1);this._onScroll.fire(this.buffer.ydisp)}};g.prototype.is=function(a){return 0===(this.options.termName+"").indexOf(a)};g.prototype.handler=function(a){this.options.disableStdin||(this.selectionManager&&this.selectionManager.hasSelection&&this.selectionManager.clearSelection(),this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),this._onData.fire(a))};g.prototype.handleTitle=function(a){this._onTitleChange.fire(a)};
g.prototype.index=function(){this.buffer.y++;this.buffer.y>this.buffer.scrollBottom&&(this.buffer.y--,this.scroll());this.buffer.x>=this.cols&&this.buffer.x--};g.prototype.reverseIndex=function(){this.buffer.y===this.buffer.scrollTop?(this.buffer.lines.shiftElements(this.buffer.y+this.buffer.ybase,this.buffer.scrollBottom-this.buffer.scrollTop,1),this.buffer.lines.set(this.buffer.y+this.buffer.ybase,this.buffer.getBlankLine(this.eraseAttrData())),this.updateRange(this.buffer.scrollTop),this.updateRange(this.buffer.scrollBottom)):
this.buffer.y--};g.prototype.reset=function(){this.options.rows=this.rows;this.options.cols=this.cols;var a=this._customKeyEventHandler,b=this._inputHandler,d=this.cursorState,e=this.writeBuffer,h=this.writeBufferUtf8,l=this._writeInProgress,c=this._xoffSentToCatchUp,k=this._userScrolling;this._setup();this._customKeyEventHandler=a;this._inputHandler=b;this.cursorState=d;this.writeBuffer=e;this.writeBufferUtf8=h;this._writeInProgress=l;this._xoffSentToCatchUp=c;this._userScrolling=k;this.refresh(0,
this.rows-1);this.viewport&&this.viewport.syncScrollArea()};g.prototype.tabSet=function(){this.buffer.tabs[this.buffer.x]=!0};g.prototype.cancel=function(a,b){if(this.options.cancelEvents||b)return a.preventDefault(),a.stopPropagation(),!1};g.prototype._visualBell=function(){return!1};g.prototype._soundBell=function(){return"sound"===this.options.bellStyle};return g}(n.EventEmitter);f.Terminal=g},{"./AccessibilityManager":1,"./Buffer":2,"./BufferSet":3,"./CharMeasure":4,"./Clipboard":6,"./CompositionHelper":7,
"./InputHandler":9,"./Linkifier":10,"./MouseHelper":11,"./MouseZoneManager":12,"./SelectionManager":13,"./SoundManager":15,"./Strings":16,"./Viewport":18,"./WindowsMode":19,"./common/Clone":21,"./common/EventEmitter":22,"./common/EventEmitter2":23,"./common/Platform":25,"./common/data/EscapeSequences":28,"./core/buffer/BufferLine":29,"./core/input/Keyboard":33,"./renderer/RenderCoordinator":43,"./renderer/Renderer":44,"./renderer/atlas/CharAtlasCache":48,"./renderer/dom/DomRenderer":56,"./ui/ColorManager":58,
"./ui/Lifecycle":59}],18:[function(g,n,f){var c=this&&this.__extends||function(){var c=function(e,d){c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,a){b.__proto__=a}||function(b,a){for(var d in a)a.hasOwnProperty(d)&&(b[d]=a[d])};return c(e,d)};return function(e,d){function b(){this.constructor=e}c(e,d);e.prototype=null===d?Object.create(d):(b.prototype=d.prototype,new b)}}();Object.defineProperty(f,"__esModule",{value:!0});n=g("./common/Lifecycle");var k=g("./ui/Lifecycle");
g=function(m){function e(d,b,a,e,h){var l=m.call(this)||this;l._terminal=d;l._viewportElement=b;l._scrollArea=a;l._charMeasure=e;l._dimensions=h;l.scrollBarWidth=0;l._currentRowHeight=0;l._lastRecordedBufferLength=0;l._lastRecordedViewportHeight=0;l._lastRecordedBufferHeight=0;l._lastScrollTop=0;l._wheelPartialScroll=0;l._refreshAnimationFrame=null;l._ignoreNextScrollEvent=!1;l.scrollBarWidth=l._viewportElement.offsetWidth-l._scrollArea.offsetWidth||15;l.register(k.addDisposableDomListener(l._viewportElement,
"scroll",l._onScroll.bind(l)));setTimeout(function(){return l.syncScrollArea()},0);return l}c(e,m);e.prototype.onDimensionsChance=function(d){this._dimensions=d};e.prototype.onThemeChange=function(d){this._viewportElement.style.backgroundColor=d.background.css};e.prototype._refresh=function(){var d=this;null===this._refreshAnimationFrame&&(this._refreshAnimationFrame=requestAnimationFrame(function(){return d._innerRefresh()}))};e.prototype._innerRefresh=function(){if(0<this._charMeasure.height){this._currentRowHeight=
this._dimensions.scaledCellHeight/window.devicePixelRatio;this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;var d=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._dimensions.canvasHeight);this._lastRecordedBufferHeight!==d&&(this._lastRecordedBufferHeight=d,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}d=this._terminal.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==d&&(this._ignoreNextScrollEvent=
!0,this._viewportElement.scrollTop=d);this._refreshAnimationFrame=null};e.prototype.syncScrollArea=function(){this._lastRecordedBufferLength!==this._terminal.buffer.lines.length?(this._lastRecordedBufferLength=this._terminal.buffer.lines.length,this._refresh()):this._lastRecordedViewportHeight!==this._dimensions.canvasHeight?this._refresh():this._lastScrollTop!==this._terminal.buffer.ydisp*this._currentRowHeight?this._refresh():this._lastScrollTop!==this._viewportElement.scrollTop?this._refresh():
this._dimensions.scaledCellHeight/window.devicePixelRatio!==this._currentRowHeight&&this._refresh()};e.prototype._onScroll=function(d){this._lastScrollTop=this._viewportElement.scrollTop;this._viewportElement.offsetParent&&(this._ignoreNextScrollEvent?this._ignoreNextScrollEvent=!1:this._terminal.scrollLines(Math.round(this._lastScrollTop/this._currentRowHeight)-this._terminal.buffer.ydisp,!0))};e.prototype.onWheel=function(d){var b=this._getPixelsScrolled(d);0!==b&&(this._viewportElement.scrollTop+=
b,d.preventDefault())};e.prototype._getPixelsScrolled=function(d){if(0===d.deltaY)return 0;var b=d.deltaY;d.deltaMode===WheelEvent.DOM_DELTA_LINE?b*=this._currentRowHeight:d.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(b*=this._currentRowHeight*this._terminal.rows);return b};e.prototype.getLinesScrolled=function(d){if(0===d.deltaY)return 0;var b=d.deltaY;d.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(b/=this._currentRowHeight+0,this._wheelPartialScroll+=b,b=Math.floor(Math.abs(this._wheelPartialScroll))*(0<
this._wheelPartialScroll?1:-1),this._wheelPartialScroll%=1):d.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(b*=this._terminal.rows);return b};e.prototype.onTouchStart=function(d){this._lastTouchY=d.touches[0].pageY};e.prototype.onTouchMove=function(d){var b=this._lastTouchY-d.touches[0].pageY;this._lastTouchY=d.touches[0].pageY;0!==b&&(this._viewportElement.scrollTop+=b,d.preventDefault())};return e}(n.Disposable);f.Viewport=g},{"./common/Lifecycle":24,"./ui/Lifecycle":59}],19:[function(g,n,f){Object.defineProperty(f,
"__esModule",{value:!0});var c=g("./core/buffer/BufferLine");f.applyWindowsMode=function(k){return k.onLineFeed(function(){var m=k.buffer.lines.get(k.buffer.ybase+k.buffer.y-1).get(k.cols-1);k.buffer.lines.get(k.buffer.ybase+k.buffer.y).isWrapped=m[c.CHAR_DATA_CODE_INDEX]!==c.NULL_CELL_CODE&&m[c.CHAR_DATA_CODE_INDEX]!==c.WHITESPACE_CELL_CODE})}},{"./core/buffer/BufferLine":29}],20:[function(g,n,f){Object.defineProperty(f,"__esModule",{value:!0});var c=g("./EventEmitter2");g=function(){function k(k){this._maxLength=
k;this.onDeleteEmitter=new c.EventEmitter2;this.onInsertEmitter=new c.EventEmitter2;this.onTrimEmitter=new c.EventEmitter2;this._array=Array(this._maxLength);this._length=this._startIndex=0}Object.defineProperty(k.prototype,"onDelete",{get:function(){return this.onDeleteEmitter.event},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"onInsert",{get:function(){return this.onInsertEmitter.event},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"onTrim",{get:function(){return this.onTrimEmitter.event},
enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"maxLength",{get:function(){return this._maxLength},set:function(c){if(this._maxLength!==c){for(var e=Array(c),d=0;d<Math.min(c,this.length);d++)e[d]=this._array[this._getCyclicIndex(d)];this._array=e;this._maxLength=c;this._startIndex=0}},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"length",{get:function(){return this._length},set:function(c){if(c>this._length)for(var e=this._length;e<c;e++)this._array[e]=void 0;
this._length=c},enumerable:!0,configurable:!0});k.prototype.get=function(c){return this._array[this._getCyclicIndex(c)]};k.prototype.set=function(c,e){this._array[this._getCyclicIndex(c)]=e};k.prototype.push=function(c){this._array[this._getCyclicIndex(this._length)]=c;this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++};k.prototype.recycle=function(){if(this._length!==this._maxLength)throw Error("Can only recycle when the buffer is full");
this._startIndex=++this._startIndex%this._maxLength;this.onTrimEmitter.fire(1);return this._array[this._getCyclicIndex(this._length-1)]};Object.defineProperty(k.prototype,"isFull",{get:function(){return this._length===this._maxLength},enumerable:!0,configurable:!0});k.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length-- -1)]};k.prototype.splice=function(c,e){for(var d=[],b=2;b<arguments.length;b++)d[b-2]=arguments[b];if(e){for(b=c;b<this._length-e;b++)this._array[this._getCyclicIndex(b)]=
this._array[this._getCyclicIndex(b+e)];this._length-=e}for(b=this._length-1;b>=c;b--)this._array[this._getCyclicIndex(b+d.length)]=this._array[this._getCyclicIndex(b)];for(b=0;b<d.length;b++)this._array[this._getCyclicIndex(c+b)]=d[b];this._length+d.length>this._maxLength?(d=this._length+d.length-this._maxLength,this._startIndex+=d,this._length=this._maxLength,this.onTrimEmitter.fire(d)):this._length+=d.length};k.prototype.trimStart=function(c){c>this._length&&(c=this._length);this._startIndex+=c;
this._length-=c;this.onTrimEmitter.fire(c)};k.prototype.shiftElements=function(c,e,d){if(!(0>=e)){if(0>c||c>=this._length)throw Error("start argument out of range");if(0>c+d)throw Error("Cannot shift elements in list beyond index 0");if(0<d){for(var b=e-1;0<=b;b--)this.set(c+b+d,this.get(c+b));c=c+e+d-this._length;if(0<c)for(this._length+=c;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(b=0;b<e;b++)this.set(c+b+d,this.get(c+b))}};k.prototype._getCyclicIndex=
function(c){return(this._startIndex+c)%this._maxLength};return k}();f.CircularList=g},{"./EventEmitter2":23}],21:[function(g,n,f){function c(k,f){void 0===f&&(f=5);if("object"!==typeof k)return k;if(null===k)return null;var e=Array.isArray(k)?[]:{},d;for(d in k)e[d]=1>=f?k[d]:c(k[d],f-1);return e}Object.defineProperty(f,"__esModule",{value:!0});f.clone=c},{}],22:[function(g,n,f){var c=this&&this.__extends||function(){var c=function(k,e){c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,
b){d.__proto__=b}||function(d,b){for(var a in b)b.hasOwnProperty(a)&&(d[a]=b[a])};return c(k,e)};return function(k,e){function d(){this.constructor=k}c(k,e);k.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();Object.defineProperty(f,"__esModule",{value:!0});g=function(k){function f(){var e=k.call(this)||this;e._events=e._events||{};return e}c(f,k);f.prototype.on=function(e,d){this._events[e]=this._events[e]||[];this._events[e].push(d)};f.prototype.addDisposableListener=function(e,
d){var b=this;this.on(e,d);var a=!1;return{dispose:function(){a||(b.off(e,d),a=!0)}}};f.prototype.off=function(e,d){if(this._events[e]){e=this._events[e];for(var b=e.length;b--;)if(e[b]===d){e.splice(b,1);break}}};f.prototype.removeAllListeners=function(e){this._events[e]&&delete this._events[e]};f.prototype.emit=function(e){for(var d=[],b=1;b<arguments.length;b++)d[b-1]=arguments[b];if(this._events[e]){b=this._events[e];for(var a=0;a<b.length;a++)b[a].apply(this,d)}};f.prototype.emitMayRemoveListeners=
function(e){for(var d=[],b=1;b<arguments.length;b++)d[b-1]=arguments[b];if(this._events[e]){b=this._events[e];for(var a=b.length,c=0;c<b.length;c++)b[c].apply(this,d),c-=a-b.length,a=b.length}};f.prototype.listeners=function(e){return this._events[e]||[]};f.prototype.dispose=function(){k.prototype.dispose.call(this);this._events={}};return f}(g("./Lifecycle").Disposable);f.EventEmitter=g},{"./Lifecycle":24}],23:[function(g,n,f){Object.defineProperty(f,"__esModule",{value:!0});g=function(){function c(){this._listeners=
[]}Object.defineProperty(c.prototype,"event",{get:function(){var c=this;this._event||(this._event=function(k){c._listeners.push(k);return{dispose:function(){for(var e=0;e<c._listeners.length;e++)if(c._listeners[e]===k){c._listeners.splice(e,1);break}}}});return this._event},enumerable:!0,configurable:!0});c.prototype.fire=function(c){for(var k=[],e=0;e<this._listeners.length;e++)k.push(this._listeners[e]);for(e=0;e<k.length;e++)k[e].call(void 0,c)};return c}();f.EventEmitter2=g},{}],24:[function(g,
n,f){Object.defineProperty(f,"__esModule",{value:!0});g=function(){function c(){this._disposables=[];this._isDisposed=!1}c.prototype.dispose=function(){this._isDisposed=!0;this._disposables.forEach(function(c){return c.dispose()});this._disposables.length=0};c.prototype.register=function(c){this._disposables.push(c)};c.prototype.unregister=function(c){c=this._disposables.indexOf(c);-1!==c&&this._disposables.splice(c,1)};return c}();f.Disposable=g},{}],25:[function(g,n,f){Object.defineProperty(f,"__esModule",
{value:!0});n=(g="undefined"===typeof navigator?!0:!1)?"node":navigator.userAgent;g=g?"node":navigator.platform;f.isFirefox=!!~n.indexOf("Firefox");f.isSafari=/^((?!chrome|android).)*safari/i.test(n);f.isMSIE=!!~n.indexOf("MSIE")||!!~n.indexOf("Trident");n=0<=["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(g);f.isMac=n;f.isIpad="iPad"===g;f.isIphone="iPhone"===g;n=0<=["Windows","Win16","Win32","WinCE"].indexOf(g);f.isMSWindows=n;f.isLinux=0<=g.indexOf("Linux")},{}],26:[function(g,n,f){function c(c,
f,e,d){void 0===e&&(e=0);void 0===d&&(d=c.length);if(e>=c.length)return c;e=(c.length+e)%c.length;for(d=d>=c.length?c.length:(c.length+d)%c.length;e<d;++e)c[e]=f;return c}Object.defineProperty(f,"__esModule",{value:!0});f.fill=function(k,f,e,d){return k.fill?k.fill(f,e,d):c(k,f,e,d)};f.fillFallback=c;f.concat=function(c,f){var e=new c.constructor(c.length+f.length);e.set(c);e.set(f,c.length);return e}},{}],27:[function(g,n,f){Object.defineProperty(f,"__esModule",{value:!0});f.DEFAULT_COLOR=256},{}],
28:[function(g,n,f){Object.defineProperty(f,"__esModule",{value:!0});(function(c){c.NUL="\x00";c.SOH="\u0001";c.STX="\u0002";c.ETX="\u0003";c.EOT="\u0004";c.ENQ="\u0005";c.ACK="\u0006";c.BEL="\u0007";c.BS="\b";c.HT="\t";c.LF="\n";c.VT="\x0B";c.FF="\f";c.CR="\r";c.SO="\u000e";c.SI="\u000f";c.DLE="\u0010";c.DC1="\u0011";c.DC2="\u0012";c.DC3="\u0013";c.DC4="\u0014";c.NAK="\u0015";c.SYN="\u0016";c.ETB="\u0017";c.CAN="\u0018";c.EM="\u0019";c.SUB="\u001a";c.ESC="\u001b";c.FS="\u001c";c.GS="\u001d";c.RS=
"\u001e";c.US="\u001f";c.SP=" ";c.DEL="\u007f"})(f.C0||(f.C0={}));(function(c){c.PAD="\u0080";c.HOP="\u0081";c.BPH="\u0082";c.NBH="\u0083";c.IND="\u0084";c.NEL="\u0085";c.SSA="\u0086";c.ESA="\u0087";c.HTS="\u0088";c.HTJ="\u0089";c.VTS="\u008a";c.PLD="\u008b";c.PLU="\u008c";c.RI="\u008d";c.SS2="\u008e";c.SS3="\u008f";c.DCS="\u0090";c.PU1="\u0091";c.PU2="\u0092";c.STS="\u0093";c.CCH="\u0094";c.MW="\u0095";c.SPA="\u0096";c.EPA="\u0097";c.SOS="\u0098";c.SGCI="\u0099";c.SCI="\u009a";c.CSI="\u009b";c.ST=
"\u009c";c.OSC="\u009d";c.PM="\u009e";c.APC="\u009f"})(f.C1||(f.C1={}))},{}],29:[function(g,n,f){var c=this&&this.__extends||function(){var e=function(d,b){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d])};return e(d,b)};return function(d,b){function a(){this.constructor=d}e(d,b);d.prototype=null===b?Object.create(b):(a.prototype=b.prototype,new a)}}();Object.defineProperty(f,"__esModule",{value:!0});
var k=g("../input/TextDecoder");g=g("../../common/Types");f.DEFAULT_ATTR=g.DEFAULT_COLOR<<9|256;f.CHAR_DATA_ATTR_INDEX=0;f.CHAR_DATA_CHAR_INDEX=1;f.CHAR_DATA_WIDTH_INDEX=2;f.CHAR_DATA_CODE_INDEX=3;f.NULL_CELL_CHAR="";f.NULL_CELL_WIDTH=1;f.NULL_CELL_CODE=0;f.WHITESPACE_CELL_CHAR=" ";f.WHITESPACE_CELL_WIDTH=1;f.WHITESPACE_CELL_CODE=32;g=function(){function e(){this.bg=this.fg=0}e.toColorRGB=function(d){return[d>>>16&255,d>>>8&255,d&255]};e.fromColorRGB=function(d){return(d[0]&255)<<16|(d[1]&255)<<8|
d[2]&255};e.prototype.clone=function(){var d=new e;d.fg=this.fg;d.bg=this.bg;return d};e.prototype.isInverse=function(){return this.fg&67108864};e.prototype.isBold=function(){return this.fg&134217728};e.prototype.isUnderline=function(){return this.fg&268435456};e.prototype.isBlink=function(){return this.fg&536870912};e.prototype.isInvisible=function(){return this.fg&1073741824};e.prototype.isItalic=function(){return this.bg&67108864};e.prototype.isDim=function(){return this.bg&134217728};e.prototype.getFgColorMode=
function(){return this.fg&50331648};e.prototype.getBgColorMode=function(){return this.bg&50331648};e.prototype.isFgRGB=function(){return 50331648===(this.fg&50331648)};e.prototype.isBgRGB=function(){return 50331648===(this.bg&50331648)};e.prototype.isFgPalette=function(){return 16777216===(this.fg&50331648)||33554432===(this.fg&50331648)};e.prototype.isBgPalette=function(){return 16777216===(this.bg&50331648)||33554432===(this.bg&50331648)};e.prototype.isFgDefault=function(){return 0===(this.fg&50331648)};
e.prototype.isBgDefault=function(){return 0===(this.bg&50331648)};e.prototype.getFgColor=function(){switch(this.fg&50331648){case 16777216:case 33554432:return this.fg&255;case 50331648:return this.fg&16777215;default:return-1}};e.prototype.getBgColor=function(){switch(this.bg&50331648){case 16777216:case 33554432:return this.bg&255;case 50331648:return this.bg&16777215;default:return-1}};return e}();f.AttributeData=g;f.DEFAULT_ATTR_DATA=Object.freeze(new g);var m=function(e){function d(){var b=null!==
e&&e.apply(this,arguments)||this;b.content=0;b.fg=0;b.bg=0;b.combinedData="";return b}c(d,e);d.fromCharData=function(b){var a=new d;a.setFromCharData(b);return a};d.prototype.isCombined=function(){return this.content&2097152};d.prototype.getWidth=function(){return this.content>>22};d.prototype.getChars=function(){return this.content&2097152?this.combinedData:this.content&2097151?k.stringFromCodePoint(this.content&2097151):""};d.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-
1):this.content&2097151};d.prototype.setFromCharData=function(b){this.fg=b[f.CHAR_DATA_ATTR_INDEX];this.bg=0;var a=!1;if(2<b[f.CHAR_DATA_CHAR_INDEX].length)a=!0;else if(2===b[f.CHAR_DATA_CHAR_INDEX].length){var d=b[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=d&&56319>=d){var e=b[f.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=e&&57343>=e?this.content=1024*(d-55296)+e-56320+65536|b[f.CHAR_DATA_WIDTH_INDEX]<<22:a=!0}else a=!0}else this.content=b[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|b[f.CHAR_DATA_WIDTH_INDEX]<<
22;a&&(this.combinedData=b[f.CHAR_DATA_CHAR_INDEX],this.content=2097152|b[f.CHAR_DATA_WIDTH_INDEX]<<22)};d.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]};return d}(g);f.CellData=m;g=function(){function e(d,b,a){void 0===a&&(a=!1);this.isWrapped=a;this._combined={};this._data=new Uint32Array(3*d);b=b||m.fromCharData([0,f.NULL_CELL_CHAR,f.NULL_CELL_WIDTH,f.NULL_CELL_CODE]);for(a=0;a<d;++a)this.setCell(a,b);this.length=d}e.prototype.get=function(d){var b=
this._data[3*d],a=b&2097151;return[this._data[3*d+1],b&2097152?this._combined[d]:a?k.stringFromCodePoint(a):"",b>>22,b&2097152?this._combined[d].charCodeAt(this._combined[d].length-1):a]};e.prototype.set=function(d,b){this._data[3*d+1]=b[f.CHAR_DATA_ATTR_INDEX];1<b[f.CHAR_DATA_CHAR_INDEX].length?(this._combined[d]=b[1],this._data[3*d]=d|2097152|b[f.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*d]=b[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|b[f.CHAR_DATA_WIDTH_INDEX]<<22};e.prototype.getWidth=function(d){return this._data[3*
d]>>22};e.prototype.hasWidth=function(d){return this._data[3*d]&12582912};e.prototype.getFg=function(d){return this._data[3*d+1]};e.prototype.getBg=function(d){return this._data[3*d+2]};e.prototype.hasContent=function(d){return this._data[3*d]&4194303};e.prototype.getCodePoint=function(d){var b=this._data[3*d];return b&2097152?this._combined[d].charCodeAt(this._combined[d].length-1):b&2097151};e.prototype.isCombined=function(d){return this._data[3*d]&2097152};e.prototype.getString=function(d){var b=
this._data[3*d];return b&2097152?this._combined[d]:b&2097151?k.stringFromCodePoint(b&2097151):""};e.prototype.loadCell=function(d,b){var a=3*d;b.content=this._data[a+0];b.fg=this._data[a+1];b.bg=this._data[a+2];b.content&2097152&&(b.combinedData=this._combined[d]);return b};e.prototype.setCell=function(d,b){b.content&2097152&&(this._combined[d]=b.combinedData);this._data[3*d]=b.content;this._data[3*d+1]=b.fg;this._data[3*d+2]=b.bg};e.prototype.setCellFromCodePoint=function(d,b,a,e,c){this._data[3*
d]=b|a<<22;this._data[3*d+1]=e;this._data[3*d+2]=c};e.prototype.addCodepointToCell=function(d,b){var a=this._data[3*d];a&2097152?this._combined[d]+=k.stringFromCodePoint(b):(a&2097151?(this._combined[d]=k.stringFromCodePoint(a&2097151)+k.stringFromCodePoint(b),a=a&-2097152|2097152):a=b|4194304,this._data[3*d]=a)};e.prototype.insertCells=function(d,b,a){d%=this.length;if(b<this.length-d){for(var e=new m,c=this.length-d-b-1;0<=c;--c)this.setCell(d+b+c,this.loadCell(d+c,e));for(c=0;c<b;++c)this.setCell(d+
c,a)}else for(c=d;c<this.length;++c)this.setCell(c,a)};e.prototype.deleteCells=function(d,b,a){d%=this.length;if(b<this.length-d){for(var e=new m,c=0;c<this.length-d-b;++c)this.setCell(d+c,this.loadCell(d+b+c,e));c=this.length-b}else c=d;for(;c<this.length;++c)this.setCell(c,a)};e.prototype.replaceCells=function(d,b,a){for(;d<b&&d<this.length;)this.setCell(d++,a)};e.prototype.resize=function(d,b){if(d!==this.length){if(d>this.length){var a=new Uint32Array(3*d);this.length&&(3*d<this._data.length?
a.set(this._data.subarray(0,3*d)):a.set(this._data));this._data=a;for(a=this.length;a<d;++a)this.setCell(a,b)}else if(d)for(a=new Uint32Array(3*d),a.set(this._data.subarray(0,3*d)),this._data=a,b=Object.keys(this._combined),a=0;a<b.length;a++){var e=parseInt(b[a],10);e>=d&&delete this._combined[e]}else this._data=new Uint32Array(0),this._combined={};this.length=d}};e.prototype.fill=function(d){this._combined={};for(var b=0;b<this.length;++b)this.setCell(b,d)};e.prototype.copyFrom=function(d){this.length!==
d.length?this._data=new Uint32Array(d._data):this._data.set(d._data);this.length=d.length;this._combined={};for(var b in d._combined)this._combined[b]=d._combined[b];this.isWrapped=d.isWrapped};e.prototype.clone=function(){var d=new e(0);d._data=new Uint32Array(this._data);d.length=this.length;for(var b in this._combined)d._combined[b]=this._combined[b];d.isWrapped=this.isWrapped;return d};e.prototype.getTrimmedLength=function(){for(var d=this.length-1;0<=d;--d)if(this._data[3*d]&4194303)return d+
(this._data[3*d]>>22);return 0};e.prototype.copyCellsFrom=function(d,b,a,e,c){var h=d._data;if(c)for(var l=e-1;0<=l;l--)for(c=0;3>c;c++)this._data[3*(a+l)+c]=h[3*(b+l)+c];else for(l=0;l<e;l++)for(c=0;3>c;c++)this._data[3*(a+l)+c]=h[3*(b+l)+c];e=Object.keys(d._combined);for(c=0;c<e.length;c++)h=parseInt(e[c],10),h>=b&&(this._combined[h-b+a]=d._combined[h])};e.prototype.translateToString=function(d,b,a){void 0===d&&(d=!1);void 0===b&&(b=0);void 0===a&&(a=this.length);d&&(a=Math.min(a,this.getTrimmedLength()));
for(d="";b<a;){var e=this._data[3*b],c=e&2097151;d+=e&2097152?this._combined[b]:c?k.stringFromCodePoint(c):f.WHITESPACE_CELL_CHAR;b+=e>>22||1}return d};return e}();f.BufferLine=g},{"../../common/Types":27,"../input/TextDecoder":34}],30:[function(g,n,f){function c(c,f,e){if(f===c.length-1)return c[f].getTrimmedLength();var d=!c[f].hasContent(e-1)&&1===c[f].getWidth(e-1);c=2===c[f+1].getWidth(0);return d&&c?e-1:e}Object.defineProperty(f,"__esModule",{value:!0});f.reflowLargerGetLinesToRemove=function(k,
f,e,d,b){for(var a=[],l=0;l<k.length-1;l++){var h=l,g=k.get(++h);if(g.isWrapped){for(var m=[k.get(l)];h<k.length&&g.isWrapped;)m.push(g),g=k.get(++h);if(!(d>=l&&d<h)){h=0;g=c(m,h,f);for(var v=1,p=0;v<m.length;){var n=c(m,v,f),u=Math.min(n-p,e-g);m[h].copyCellsFrom(m[v],p,g,u,!1);g+=u;g===e&&(h++,g=0);p+=u;p===n&&(v++,p=0);0===g&&0!==h&&2===m[h-1].getWidth(e-1)&&(m[h].copyCellsFrom(m[h-1],e-1,g++,1,!1),m[h-1].setCell(e-1,b))}m[h].replaceCells(g,e,b);g=0;for(v=m.length-1;0<v;v--)if(v>h||0===m[v].getTrimmedLength())g++;
else break;0<g&&(a.push(l+m.length-g),a.push(g))}l+=m.length-1}}return a};f.reflowLargerCreateNewLayout=function(c,f){for(var e=[],d=0,b=f[d],a=0,l=0;l<c.length;l++)b===l?(b=f[++d],c.onDeleteEmitter.fire({index:l-a,amount:b}),l+=b-1,a+=b,b=f[++d]):e.push(l);return{layout:e,countRemoved:a}};f.reflowLargerApplyNewLayout=function(c,f){for(var e=[],d=0;d<f.length;d++)e.push(c.get(f[d]));for(d=0;d<e.length;d++)c.set(d,e[d]);c.length=f.length};f.reflowSmallerGetNewLineLengths=function(k,f,e){for(var d=
[],b=k.map(function(a,b){return c(k,b,f)}).reduce(function(a,b){return a+b}),a=0,l=0,h=0;h<b;){if(b-h<e){d.push(b-h);break}a+=e;var g=c(k,l,f);a>g&&(a-=g,l++);(g=2===k[l].getWidth(a-1))&&a--;g=g?e-1:e;d.push(g);h+=g}return d};f.getWrappedLineTrimmedLength=c},{}],31:[function(g,n,f){var c=this&&this.__extends||function(){var c=function(e,d){c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,a){b.__proto__=a}||function(b,a){for(var d in a)a.hasOwnProperty(d)&&(b[d]=a[d])};return c(e,
d)};return function(e,d){function b(){this.constructor=e}c(e,d);e.prototype=null===d?Object.create(d):(b.prototype=d.prototype,new b)}}();Object.defineProperty(f,"__esModule",{value:!0});var k=g("../../common/EventEmitter2");g=function(f){function e(d){var b=f.call(this)||this;b.line=d;b._id=e._nextId++;b.isDisposed=!1;b._onDispose=new k.EventEmitter2;return b}c(e,f);Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,
"onDispose",{get:function(){return this._onDispose.event},enumerable:!0,configurable:!0});e.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._onDispose.fire())};e._nextId=1;return e}(g("../../common/Lifecycle").Disposable);f.Marker=g},{"../../common/EventEmitter2":23,"../../common/Lifecycle":24}],32:[function(g,n,f){Object.defineProperty(f,"__esModule",{value:!0});f.CHARSETS={};f.DEFAULT_CHARSET=f.CHARSETS.B;f.CHARSETS["0"]={"`":"\u25c6",a:"\u2592",b:"\t",c:"\f",d:"\r",e:"\n",
f:"\u00b0",g:"\u00b1",h:"\u2424",i:"\x0B",j:"\u2518",k:"\u2510",l:"\u250c",m:"\u2514",n:"\u253c",o:"\u23ba",p:"\u23bb",q:"\u2500",r:"\u23bc",s:"\u23bd",t:"\u251c",u:"\u2524",v:"\u2534",w:"\u252c",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03c0","|":"\u2260","}":"\u00a3","~":"\u00b7"};f.CHARSETS.A={"#":"\u00a3"};f.CHARSETS.B=null;f.CHARSETS["4"]={"#":"\u00a3","@":"\u00be","[":"ij","\\":"\u00bd","]":"|","{":"\u00a8","|":"f","}":"\u00bc","~":"\u00b4"};f.CHARSETS.C=f.CHARSETS["5"]={"[":"\u00c4","\\":"\u00d6",
"]":"\u00c5","^":"\u00dc","`":"\u00e9","{":"\u00e4","|":"\u00f6","}":"\u00e5","~":"\u00fc"};f.CHARSETS.R={"#":"\u00a3","@":"\u00e0","[":"\u00b0","\\":"\u00e7","]":"\u00a7","{":"\u00e9","|":"\u00f9","}":"\u00e8","~":"\u00a8"};f.CHARSETS.Q={"@":"\u00e0","[":"\u00e2","\\":"\u00e7","]":"\u00ea","^":"\u00ee","`":"\u00f4","{":"\u00e9","|":"\u00f9","}":"\u00e8","~":"\u00fb"};f.CHARSETS.K={"@":"\u00a7","[":"\u00c4","\\":"\u00d6","]":"\u00dc","{":"\u00e4","|":"\u00f6","}":"\u00fc","~":"\u00df"};f.CHARSETS.Y=
{"#":"\u00a3","@":"\u00a7","[":"\u00b0","\\":"\u00e7","]":"\u00e9","`":"\u00f9","{":"\u00e0","|":"\u00f2","}":"\u00e8","~":"\u00ec"};f.CHARSETS.E=f.CHARSETS["6"]={"@":"\u00c4","[":"\u00c6","\\":"\u00d8","]":"\u00c5","^":"\u00dc","`":"\u00e4","{":"\u00e6","|":"\u00f8","}":"\u00e5","~":"\u00fc"};f.CHARSETS.Z={"#":"\u00a3","@":"\u00a7","[":"\u00a1","\\":"\u00d1","]":"\u00bf","{":"\u00b0","|":"\u00f1","}":"\u00e7"};f.CHARSETS.H=f.CHARSETS["7"]={"@":"\u00c9","[":"\u00c4","\\":"\u00d6","]":"\u00c5","^":"\u00dc",
"`":"\u00e9","{":"\u00e4","|":"\u00f6","}":"\u00e5","~":"\u00fc"};f.CHARSETS["="]={"#":"\u00f9","@":"\u00e0","[":"\u00e9","\\":"\u00e7","]":"\u00ea","^":"\u00ee",_:"\u00e8","`":"\u00f4","{":"\u00e4","|":"\u00f6","}":"\u00fc","~":"\u00fb"}},{}],33:[function(g,n,f){Object.defineProperty(f,"__esModule",{value:!0});var c=g("../../common/data/EscapeSequences"),k={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],
187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};f.evaluateKeyboardEvent=function(f,e,d,b){var a={type:0,cancel:!1,key:void 0},l=(f.shiftKey?1:0)|(f.altKey?2:0)|(f.ctrlKey?4:0)|(f.metaKey?8:0);switch(f.keyCode){case 0:"UIKeyInputUpArrow"===f.key?a.key=e?c.C0.ESC+"OA":c.C0.ESC+"[A":"UIKeyInputLeftArrow"===f.key?a.key=e?c.C0.ESC+"OD":c.C0.ESC+"[D":"UIKeyInputRightArrow"===f.key?a.key=e?c.C0.ESC+"OC":c.C0.ESC+
"[C":"UIKeyInputDownArrow"===f.key&&(a.key=e?c.C0.ESC+"OB":c.C0.ESC+"[B");break;case 8:if(f.shiftKey){a.key=c.C0.BS;break}else if(f.altKey){a.key=c.C0.ESC+c.C0.DEL;break}a.key=c.C0.DEL;break;case 9:if(f.shiftKey){a.key=c.C0.ESC+"[Z";break}a.key=c.C0.HT;a.cancel=!0;break;case 13:a.key=c.C0.CR;a.cancel=!0;break;case 27:a.key=c.C0.ESC;a.cancel=!0;break;case 37:l?(a.key=c.C0.ESC+"[1;"+(l+1)+"D",a.key===c.C0.ESC+"[1;3D"&&(a.key=d?c.C0.ESC+"b":c.C0.ESC+"[1;5D")):a.key=e?c.C0.ESC+"OD":c.C0.ESC+"[D";break;
case 39:l?(a.key=c.C0.ESC+"[1;"+(l+1)+"C",a.key===c.C0.ESC+"[1;3C"&&(a.key=d?c.C0.ESC+"f":c.C0.ESC+"[1;5C")):a.key=e?c.C0.ESC+"OC":c.C0.ESC+"[C";break;case 38:l?(a.key=c.C0.ESC+"[1;"+(l+1)+"A",a.key===c.C0.ESC+"[1;3A"&&(a.key=c.C0.ESC+"[1;5A")):a.key=e?c.C0.ESC+"OA":c.C0.ESC+"[A";break;case 40:l?(a.key=c.C0.ESC+"[1;"+(l+1)+"B",a.key===c.C0.ESC+"[1;3B"&&(a.key=c.C0.ESC+"[1;5B")):a.key=e?c.C0.ESC+"OB":c.C0.ESC+"[B";break;case 45:f.shiftKey||f.ctrlKey||(a.key=c.C0.ESC+"[2~");break;case 46:a.key=l?c.C0.ESC+
"[3;"+(l+1)+"~":c.C0.ESC+"[3~";break;case 36:a.key=l?c.C0.ESC+"[1;"+(l+1)+"H":e?c.C0.ESC+"OH":c.C0.ESC+"[H";break;case 35:a.key=l?c.C0.ESC+"[1;"+(l+1)+"F":e?c.C0.ESC+"OF":c.C0.ESC+"[F";break;case 33:f.shiftKey?a.type=2:a.key=c.C0.ESC+"[5~";break;case 34:f.shiftKey?a.type=3:a.key=c.C0.ESC+"[6~";break;case 112:a.key=l?c.C0.ESC+"[1;"+(l+1)+"P":c.C0.ESC+"OP";break;case 113:a.key=l?c.C0.ESC+"[1;"+(l+1)+"Q":c.C0.ESC+"OQ";break;case 114:a.key=l?c.C0.ESC+"[1;"+(l+1)+"R":c.C0.ESC+"OR";break;case 115:a.key=
l?c.C0.ESC+"[1;"+(l+1)+"S":c.C0.ESC+"OS";break;case 116:a.key=l?c.C0.ESC+"[15;"+(l+1)+"~":c.C0.ESC+"[15~";break;case 117:a.key=l?c.C0.ESC+"[17;"+(l+1)+"~":c.C0.ESC+"[17~";break;case 118:a.key=l?c.C0.ESC+"[18;"+(l+1)+"~":c.C0.ESC+"[18~";break;case 119:a.key=l?c.C0.ESC+"[19;"+(l+1)+"~":c.C0.ESC+"[19~";break;case 120:a.key=l?c.C0.ESC+"[20;"+(l+1)+"~":c.C0.ESC+"[20~";break;case 121:a.key=l?c.C0.ESC+"[21;"+(l+1)+"~":c.C0.ESC+"[21~";break;case 122:a.key=l?c.C0.ESC+"[23;"+(l+1)+"~":c.C0.ESC+"[23~";break;
case 123:a.key=l?c.C0.ESC+"[24;"+(l+1)+"~":c.C0.ESC+"[24~";break;default:!f.ctrlKey||f.shiftKey||f.altKey||f.metaKey?d&&!b||!f.altKey||f.metaKey?d&&!f.altKey&&!f.ctrlKey&&f.metaKey?65===f.keyCode&&(a.type=1):f.key&&!f.ctrlKey&&!f.altKey&&!f.metaKey&&48<=f.keyCode&&1===f.key.length?a.key=f.key:f.key&&f.ctrlKey&&"_"===f.key&&(a.key=c.C0.US):(e=(e=k[f.keyCode])&&e[f.shiftKey?1:0])?a.key=c.C0.ESC+e:65<=f.keyCode&&90>=f.keyCode&&(a.key=c.C0.ESC+String.fromCharCode(f.ctrlKey?f.keyCode-64:f.keyCode+32)):
65<=f.keyCode&&90>=f.keyCode?a.key=String.fromCharCode(f.keyCode-64):32===f.keyCode?a.key=String.fromCharCode(0):51<=f.keyCode&&55>=f.keyCode?a.key=String.fromCharCode(f.keyCode-51+27):56===f.keyCode?a.key=String.fromCharCode(127):219===f.keyCode?a.key=String.fromCharCode(27):220===f.keyCode?a.key=String.fromCharCode(28):221===f.keyCode&&(a.key=String.fromCharCode(29))}return a}},{"../../common/data/EscapeSequences":28}],34:[function(g,n,f){Object.defineProperty(f,"__esModule",{value:!0});f.stringFromCodePoint=
function(c){return 65535<c?(c-=65536,String.fromCharCode((c>>10)+55296)+String.fromCharCode(c%1024+56320)):String.fromCharCode(c)};f.utf32ToString=function(c,f,g){void 0===f&&(f=0);void 0===g&&(g=c.length);for(var e="";f<g;++f){var d=c[f];65535<d?(d-=65536,e+=String.fromCharCode((d>>10)+55296)+String.fromCharCode(d%1024+56320)):e+=String.fromCharCode(d)}return e};g=function(){function c(){this._interim=0}c.prototype.clear=function(){this._interim=0};c.prototype.decode=function(c,f){var e=c.length;
if(!e)return 0;var d=0,b=0;if(this._interim){var a=c.charCodeAt(b++);56320<=a&&57343>=a?f[d++]=1024*(this._interim-55296)+a-56320+65536:(f[d++]=this._interim,f[d++]=a);this._interim=0}for(;b<e;++b){var l=c.charCodeAt(b);if(55296<=l&&56319>=l){if(++b>=e){this._interim=l;break}a=c.charCodeAt(b);56320<=a&&57343>=a?f[d++]=1024*(l-55296)+a-56320+65536:(f[d++]=l,f[d++]=a)}else f[d++]=l}return d};return c}();f.StringToUtf32=g;g=function(){function c(){this.interim=new Uint8Array(3)}c.prototype.clear=function(){this.interim.fill(0)};
c.prototype.decode=function(c,f){var e=c.length;if(!e)return 0;var d=0,b,a,l,h,k=0,g=0;if(this.interim[0]){var m=!1,p=this.interim[0];p&=192===(p&224)?31:224===(p&240)?15:7;for(var n=0,u;(u=this.interim[++n]&63)&&4>n;)p<<=6,p|=u;for(var y=192===(this.interim[0]&224)?2:224===(this.interim[0]&240)?3:4,D=y-n;g<D;){if(g>=e)return 0;u=c[g++];if(128!==(u&192)){g--;m=!0;break}else this.interim[n++]=u,p<<=6,p|=u&63}m||(2===y?128>p?g--:f[d++]=p:3===y?2048>p||55296<=p&&57343>=p||(f[d++]=p):65536>k||1114111<
k||(f[d++]=p));this.interim.fill(0)}for(m=e-4;g<e;){for(;!(!(g<m)||(b=c[g])&128||(a=c[g+1])&128||(l=c[g+2])&128||(h=c[g+3])&128);)f[d++]=b,f[d++]=a,f[d++]=l,f[d++]=h,g+=4;b=c[g++];if(128>b)f[d++]=b;else if(192===(b&224)){if(g>=e){this.interim[0]=b;break}a=c[g++];128!==(a&192)?g--:(k=(b&31)<<6|a&63,128>k?g--:f[d++]=k)}else if(224===(b&240)){if(g>=e){this.interim[0]=b;break}a=c[g++];if(128!==(a&192))g--;else{if(g>=e){this.interim[0]=b;this.interim[1]=a;break}l=c[g++];128!==(l&192)?g--:(k=(b&15)<<12|
(a&63)<<6|l&63,2048>k||55296<=k&&57343>=k||(f[d++]=k))}}else if(240===(b&248)){if(g>=e){this.interim[0]=b;break}a=c[g++];if(128!==(a&192))g--;else{if(g>=e){this.interim[0]=b;this.interim[1]=a;break}l=c[g++];if(128!==(l&192))g--;else{if(g>=e){this.interim[0]=b;this.interim[1]=a;this.interim[2]=l;break}h=c[g++];128!==(h&192)?g--:(k=(b&7)<<18|(a&63)<<12|(l&63)<<6|h&63,65536>k||1114111<k||(f[d++]=k))}}}}return d};return c}();f.Utf8ToUtf32=g},{}],35:[function(g,n,f){function c(c,e){c=Math.floor(c);for(var d=
"",b=0;b<c;b++)d+=e;return d}Object.defineProperty(f,"__esModule",{value:!0});var k=g("../common/data/EscapeSequences");g=function(){function f(c,d){this._mouseEvent=c;this._terminal=d;this._lines=this._terminal.buffer.lines;this._startCol=this._terminal.buffer.x;this._startRow=this._terminal.buffer.y;if(c=this._terminal.mouseHelper.getCoords(this._mouseEvent,this._terminal.element,this._terminal.charMeasure,this._terminal.cols,this._terminal.rows,!1))c=c.map(function(b){return b-1}),this._endCol=
c[0],this._endRow=c[1]}f.prototype.move=function(){this._mouseEvent.altKey&&void 0!==this._endCol&&void 0!==this._endRow&&this._terminal.handler(this._arrowSequences())};f.prototype._arrowSequences=function(){return this._terminal.buffer.hasScrollback?this._moveHorizontallyOnly():this._resetStartingRow()+this._moveToRequestedRow()+this._moveToRequestedCol()};f.prototype._resetStartingRow=function(){return 0===this._moveToRequestedRow().length?"":c(this._bufferLine(this._startCol,this._startRow,this._startCol,
this._startRow-this._wrappedRowsForRow(this._startRow),!1).length,this._sequence("D"))};f.prototype._moveToRequestedRow=function(){var e=this._startRow-this._wrappedRowsForRow(this._startRow),d=this._endRow-this._wrappedRowsForRow(this._endRow);e=Math.abs(e-d)-this._wrappedRowsCount();return c(e,this._sequence(this._verticalDirection()))};f.prototype._moveToRequestedCol=function(){var e=0<this._moveToRequestedRow().length?this._endRow-this._wrappedRowsForRow(this._endRow):this._startRow;var d=this._endRow,
b=this._horizontalDirection();return c(this._bufferLine(this._startCol,e,this._endCol,d,"C"===b).length,this._sequence(b))};f.prototype._moveHorizontallyOnly=function(){var e=this._horizontalDirection();return c(Math.abs(this._startCol-this._endCol),this._sequence(e))};f.prototype._wrappedRowsCount=function(){for(var c=0,d=this._startRow-this._wrappedRowsForRow(this._startRow),b=this._endRow-this._wrappedRowsForRow(this._endRow),a=0;a<Math.abs(d-b);a++){var l="A"===this._verticalDirection()?-1:1;
this._lines.get(d+l*a).isWrapped&&c++}return c};f.prototype._wrappedRowsForRow=function(c){for(var d=0,b=this._lines.get(c).isWrapped;b&&0<=c&&c<this._terminal.rows;)d++,c--,b=this._lines.get(c).isWrapped;return d};f.prototype._horizontalDirection=function(){var c=0<this._moveToRequestedRow().length?this._endRow-this._wrappedRowsForRow(this._endRow):this._startRow;return this._startCol<this._endCol&&c<=this._endRow||this._startCol>=this._endCol&&c<this._endRow?"C":"D"};f.prototype._verticalDirection=
function(){return this._startRow>this._endRow?"A":"B"};f.prototype._bufferLine=function(c,d,b,a,l){for(var e=c,f="";e!==b||d!==a;)e+=l?1:-1,l&&e>this._terminal.cols-1?(f+=this._terminal.buffer.translateBufferLineToString(d,!1,c,e),c=e=0,d++):!l&&0>e&&(f+=this._terminal.buffer.translateBufferLineToString(d,!1,0,c+1),c=e=this._terminal.cols-1,d--);return f+this._terminal.buffer.translateBufferLineToString(d,!1,c,e)};f.prototype._sequence=function(c){return k.C0.ESC+(this._terminal.applicationCursor?
"O":"[")+c};return f}();f.AltClickHandler=g},{"../common/data/EscapeSequences":28}],36:[function(g,n,f){Object.defineProperty(f,"__esModule",{value:!0});g=function(){function c(){this._addons=[]}c.prototype.dispose=function(){for(var c=this._addons.length-1;0<=c;c--)this._addons[c].instance.dispose()};c.prototype.loadAddon=function(c,f){var e=this,d={instance:f,dispose:f.dispose,isDisposed:!1};this._addons.push(d);f.dispose=function(){return e._wrappedAddonDispose(d)};f.activate(c)};c.prototype._wrappedAddonDispose=
function(c){if(!c.isDisposed){for(var f=-1,e=0;e<this._addons.length;e++)if(this._addons[e]===c){f=e;break}if(-1===f)throw Error("Could not dispose an addon that has not been loaded");c.isDisposed=!0;c.dispose.apply(c.instance);this._addons.splice(f,1)}};return c}();f.AddonManager=g},{}],37:[function(g,n,f){Object.defineProperty(f,"__esModule",{value:!0});var c=g("../Terminal"),k=g("../Strings"),m=g("./AddonManager");g=function(){function a(a){this._core=new c.Terminal(a);this._addonManager=new m.AddonManager}
Object.defineProperty(a.prototype,"onCursorMove",{get:function(){return this._core.onCursorMove},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"onLineFeed",{get:function(){return this._core.onLineFeed},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"onSelectionChange",{get:function(){return this._core.onSelectionChange},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"onData",{get:function(){return this._core.onData},enumerable:!0,configurable:!0});
Object.defineProperty(a.prototype,"onTitleChange",{get:function(){return this._core.onTitleChange},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"onScroll",{get:function(){return this._core.onScroll},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"onKey",{get:function(){return this._core.onKey},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"onRender",{get:function(){return this._core.onRender},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"onResize",{get:function(){return this._core.onResize},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"element",{get:function(){return this._core.element},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"textarea",{get:function(){return this._core.textarea},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"rows",{get:function(){return this._core.rows},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"cols",{get:function(){return this._core.cols},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"buffer",{get:function(){return new e(this._core.buffer)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"markers",{get:function(){return this._core.markers},enumerable:!0,configurable:!0});a.prototype.blur=function(){this._core.blur()};a.prototype.focus=function(){this._core.focus()};a.prototype.on=function(a,b){this._core.on(a,b)};a.prototype.off=function(a,b){this._core.off(a,b)};a.prototype.emit=function(a,b){this._core.emit(a,
b)};a.prototype.addDisposableListener=function(a,b){return this._core.addDisposableListener(a,b)};a.prototype.resize=function(a,b){this._core.resize(a,b)};a.prototype.writeln=function(a){this._core.writeln(a)};a.prototype.open=function(a){this._core.open(a)};a.prototype.attachCustomKeyEventHandler=function(a){this._core.attachCustomKeyEventHandler(a)};a.prototype.addCsiHandler=function(a,b){return this._core.addCsiHandler(a,b)};a.prototype.addOscHandler=function(a,b){return this._core.addOscHandler(a,
b)};a.prototype.registerLinkMatcher=function(a,b,d){return this._core.registerLinkMatcher(a,b,d)};a.prototype.deregisterLinkMatcher=function(a){this._core.deregisterLinkMatcher(a)};a.prototype.registerCharacterJoiner=function(a){return this._core.registerCharacterJoiner(a)};a.prototype.deregisterCharacterJoiner=function(a){this._core.deregisterCharacterJoiner(a)};a.prototype.addMarker=function(a){return this._core.addMarker(a)};a.prototype.hasSelection=function(){return this._core.hasSelection()};
a.prototype.select=function(a,b,d){this._core.select(a,b,d)};a.prototype.getSelection=function(){return this._core.getSelection()};a.prototype.getSelectionPosition=function(){return this._core.getSelectionPosition()};a.prototype.clearSelection=function(){this._core.clearSelection()};a.prototype.selectAll=function(){this._core.selectAll()};a.prototype.selectLines=function(a,b){this._core.selectLines(a,b)};a.prototype.dispose=function(){this._addonManager.dispose();this._core.dispose()};a.prototype.destroy=
function(){this._core.destroy()};a.prototype.scrollLines=function(a){this._core.scrollLines(a)};a.prototype.scrollPages=function(a){this._core.scrollPages(a)};a.prototype.scrollToTop=function(){this._core.scrollToTop()};a.prototype.scrollToBottom=function(){this._core.scrollToBottom()};a.prototype.scrollToLine=function(a){this._core.scrollToLine(a)};a.prototype.clear=function(){this._core.clear()};a.prototype.write=function(a){this._core.write(a)};a.prototype.writeUtf8=function(a){this._core.writeUtf8(a)};
a.prototype.getOption=function(a){return this._core.getOption(a)};a.prototype.setOption=function(a,b){this._core.setOption(a,b)};a.prototype.refresh=function(a,b){this._core.refresh(a,b)};a.prototype.reset=function(){this._core.reset()};a.applyAddon=function(b){b.apply(a)};a.prototype.loadAddon=function(a){return this._addonManager.loadAddon(this,a)};Object.defineProperty(a,"strings",{get:function(){return k},enumerable:!0,configurable:!0});return a}();f.Terminal=g;var e=function(){function a(a){this._buffer=
a}Object.defineProperty(a.prototype,"cursorY",{get:function(){return this._buffer.y},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"cursorX",{get:function(){return this._buffer.x},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"viewportY",{get:function(){return this._buffer.ydisp},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"baseY",{get:function(){return this._buffer.ybase},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"length",{get:function(){return this._buffer.lines.length},enumerable:!0,configurable:!0});a.prototype.getLine=function(a){if(a=this._buffer.lines.get(a))return new d(a)};return a}(),d=function(){function a(a){this._line=a}Object.defineProperty(a.prototype,"isWrapped",{get:function(){return this._line.isWrapped},enumerable:!0,configurable:!0});a.prototype.getCell=function(a){if(!(0>a||a>=this._line.length))return new b(this._line,a)};a.prototype.translateToString=function(a,b,d){return this._line.translateToString(a,
b,d)};return a}(),b=function(){function a(a,b){this._line=a;this._x=b}Object.defineProperty(a.prototype,"char",{get:function(){return this._line.getString(this._x)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"width",{get:function(){return this._line.getWidth(this._x)},enumerable:!0,configurable:!0});return a}()},{"../Strings":16,"../Terminal":17,"./AddonManager":36}],38:[function(g,n,f){Object.defineProperty(f,"__esModule",{value:!0});var c=g("../common/Types"),k=g("./atlas/Types"),
m=g("./atlas/CharAtlasCache"),e=g("../core/buffer/BufferLine");g=function(){function d(b,a,d,c,e){this._container=b;this._alpha=c;this._colors=e;this._scaledCharTop=this._scaledCharLeft=this._scaledCellHeight=this._scaledCellWidth=this._scaledCharHeight=this._scaledCharWidth=0;this._currentGlyphIdentifier={chars:"",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1};this._canvas=document.createElement("canvas");this._canvas.classList.add("xterm-"+a+"-layer");this._canvas.style.zIndex=d.toString();this._initCanvas();
this._container.appendChild(this._canvas)}d.prototype.dispose=function(){this._container.removeChild(this._canvas);this._charAtlas&&this._charAtlas.dispose()};d.prototype._initCanvas=function(){this._ctx=this._canvas.getContext("2d",{alpha:this._alpha});this._alpha||this.clearAll()};d.prototype.onOptionsChanged=function(b){};d.prototype.onBlur=function(b){};d.prototype.onFocus=function(b){};d.prototype.onCursorMove=function(b){};d.prototype.onGridChanged=function(b,a,d){};d.prototype.onSelectionChanged=
function(b,a,d,c){};d.prototype.setColors=function(b,a){this._refreshCharAtlas(b,a)};d.prototype.setTransparency=function(b,a){if(a!==this._alpha){var d=this._canvas;this._alpha=a;this._canvas=this._canvas.cloneNode();this._initCanvas();this._container.replaceChild(this._canvas,d);this._refreshCharAtlas(b,this._colors);this.onGridChanged(b,0,b.rows-1)}};d.prototype._refreshCharAtlas=function(b,a){0>=this._scaledCharWidth&&0>=this._scaledCharHeight||(this._charAtlas=m.acquireCharAtlas(b,a,this._scaledCharWidth,
this._scaledCharHeight),this._charAtlas.warmUp())};d.prototype.resize=function(b,a){this._scaledCellWidth=a.scaledCellWidth;this._scaledCellHeight=a.scaledCellHeight;this._scaledCharWidth=a.scaledCharWidth;this._scaledCharHeight=a.scaledCharHeight;this._scaledCharLeft=a.scaledCharLeft;this._scaledCharTop=a.scaledCharTop;this._canvas.width=a.scaledCanvasWidth;this._canvas.height=a.scaledCanvasHeight;this._canvas.style.width=a.canvasWidth+"px";this._canvas.style.height=a.canvasHeight+"px";this._alpha||
this.clearAll();this._refreshCharAtlas(b,this._colors)};d.prototype.fillCells=function(b,a,d,c){this._ctx.fillRect(b*this._scaledCellWidth,a*this._scaledCellHeight,d*this._scaledCellWidth,c*this._scaledCellHeight)};d.prototype.fillBottomLineAtCells=function(b,a,d){void 0===d&&(d=1);this._ctx.fillRect(b*this._scaledCellWidth,(a+1)*this._scaledCellHeight-window.devicePixelRatio-1,d*this._scaledCellWidth,window.devicePixelRatio)};d.prototype.fillLeftLineAtCell=function(b,a){this._ctx.fillRect(b*this._scaledCellWidth,
a*this._scaledCellHeight,window.devicePixelRatio,this._scaledCellHeight)};d.prototype.strokeRectAtCell=function(b,a,d,c){this._ctx.lineWidth=window.devicePixelRatio;this._ctx.strokeRect(b*this._scaledCellWidth+window.devicePixelRatio/2,a*this._scaledCellHeight+window.devicePixelRatio/2,d*this._scaledCellWidth-window.devicePixelRatio,c*this._scaledCellHeight-window.devicePixelRatio)};d.prototype.clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=
this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))};d.prototype.clearCells=function(b,a,d,c){this._alpha?this._ctx.clearRect(b*this._scaledCellWidth,a*this._scaledCellHeight,d*this._scaledCellWidth,c*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(b*this._scaledCellWidth,a*this._scaledCellHeight,d*this._scaledCellWidth,c*this._scaledCellHeight))};d.prototype.fillCharTrueColor=function(b,a,d,c){this._ctx.font=this._getFont(b,
!1,!1);this._ctx.textBaseline="middle";this._clipRow(b,c);this._ctx.fillText(a.getChars(),d*this._scaledCellWidth+this._scaledCharLeft,c*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight/2)};d.prototype.drawChars=function(b,a,d,h){if(a.isFgRGB()||a.isBgRGB())this._drawUncachedChars(b,a,d,h);else{if(a.isInverse()){var l=a.isBgDefault()?k.INVERTED_DEFAULT_COLOR:a.getBgColor();var f=a.isFgDefault()?k.INVERTED_DEFAULT_COLOR:a.getFgColor()}else f=a.isBgDefault()?c.DEFAULT_COLOR:a.getBgColor(),
l=a.isFgDefault()?c.DEFAULT_COLOR:a.getFgColor();var g=b.options.drawBoldTextInBrightColors&&a.isBold()&&8>l&&l!==k.INVERTED_DEFAULT_COLOR;l+=g?8:0;this._currentGlyphIdentifier.chars=a.getChars()||e.WHITESPACE_CELL_CHAR;this._currentGlyphIdentifier.code=a.getCode()||e.WHITESPACE_CELL_CODE;this._currentGlyphIdentifier.bg=f;this._currentGlyphIdentifier.fg=l;this._currentGlyphIdentifier.bold=a.isBold()&&b.options.enableBold;this._currentGlyphIdentifier.dim=!!a.isDim();this._currentGlyphIdentifier.italic=
!!a.isItalic();this._charAtlas&&this._charAtlas.draw(this._ctx,this._currentGlyphIdentifier,d*this._scaledCellWidth+this._scaledCharLeft,h*this._scaledCellHeight+this._scaledCharTop)||this._drawUncachedChars(b,a,d,h)}};d.prototype._drawUncachedChars=function(b,a,d,c){this._ctx.save();this._ctx.font=this._getFont(b,a.isBold()&&b.options.enableBold,!!a.isItalic());this._ctx.textBaseline="middle";if(a.isInverse())a.isBgDefault()?this._ctx.fillStyle=this._colors.background.css:a.isBgRGB()?this._ctx.fillStyle=
"rgb("+e.AttributeData.toColorRGB(a.getBgColor()).join(",")+")":this._ctx.fillStyle=this._colors.ansi[a.getBgColor()].css;else if(a.isFgDefault())this._ctx.fillStyle=this._colors.foreground.css;else if(a.isFgRGB())this._ctx.fillStyle="rgb("+e.AttributeData.toColorRGB(a.getFgColor()).join(",")+")";else{var h=a.getFgColor();b.options.drawBoldTextInBrightColors&&a.isBold()&&8>h&&(h+=8);this._ctx.fillStyle=this._colors.ansi[h].css}this._clipRow(b,c);a.isDim()&&(this._ctx.globalAlpha=k.DIM_OPACITY);this._ctx.fillText(a.getChars(),
d*this._scaledCellWidth+this._scaledCharLeft,c*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight/2);this._ctx.restore()};d.prototype._clipRow=function(b,a){this._ctx.beginPath();this._ctx.rect(0,a*this._scaledCellHeight,b.cols*this._scaledCellWidth,this._scaledCellHeight);this._ctx.clip()};d.prototype._getFont=function(b,a,d){return(d?"italic":"")+" "+(a?b.options.fontWeightBold:b.options.fontWeight)+" "+b.options.fontSize*window.devicePixelRatio+"px "+b.options.fontFamily};return d}();
f.BaseRenderLayer=g},{"../common/Types":27,"../core/buffer/BufferLine":29,"./atlas/CharAtlasCache":48,"./atlas/Types":55}],39:[function(g,n,f){var c=this&&this.__extends||function(){var c=function(e,d){c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,a){b.__proto__=a}||function(b,a){for(var d in a)a.hasOwnProperty(d)&&(b[d]=a[d])};return c(e,d)};return function(e,d){function b(){this.constructor=e}c(e,d);e.prototype=null===d?Object.create(d):(b.prototype=d.prototype,new b)}}();
Object.defineProperty(f,"__esModule",{value:!0});var k=g("../core/buffer/BufferLine");g=function(f){function e(d,b,a){var c=f.call(this)||this;c.content=0;c.fg=d.fg;c.bg=d.bg;c.combinedData=b;c._width=a;return c}c(e,f);e.prototype.isCombined=function(){return 2097152};e.prototype.getWidth=function(){return this._width};e.prototype.getChars=function(){return this.combinedData};e.prototype.getCode=function(){return 2097151};e.prototype.setFromCharData=function(d){throw Error("not implemented");};e.prototype.getAsCharData=
function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]};return e}(k.AttributeData);f.JoinedCellData=g;g=function(){function c(c){this._terminal=c;this._characterJoiners=[];this._nextCharacterJoinerId=0;this._workCell=new k.CellData}c.prototype.registerCharacterJoiner=function(c){c={id:this._nextCharacterJoinerId++,handler:c};this._characterJoiners.push(c);return c.id};c.prototype.deregisterCharacterJoiner=function(c){for(var d=0;d<this._characterJoiners.length;d++)if(this._characterJoiners[d].id===
c)return this._characterJoiners.splice(d,1),!0;return!1};c.prototype.getJoinedCharacters=function(c){if(0===this._characterJoiners.length)return[];c=this._terminal.buffer.lines.get(c);if(0===c.length)return[];for(var d=[],b=c.translateToString(!0),a=0,e=0,h=0,f=c.getFg(0),g=c.getBg(0),m=0;m<c.getTrimmedLength();m++)if(c.loadCell(m,this._workCell),0!==this._workCell.getWidth()){if(this._workCell.fg!==f||this._workCell.bg!==g){if(1<m-a)for(a=this._getJoinedRanges(b,h,e,c,a),h=0;h<a.length;h++)d.push(a[h]);
a=m;h=e;f=this._workCell.fg;g=this._workCell.bg}e+=this._workCell.getChars().length||k.WHITESPACE_CELL_CHAR.length}if(1<this._terminal.cols-a)for(a=this._getJoinedRanges(b,h,e,c,a),h=0;h<a.length;h++)d.push(a[h]);return d};c.prototype._getJoinedRanges=function(e,d,b,a,l){e=e.substring(d,b);d=this._characterJoiners[0].handler(e);for(b=1;b<this._characterJoiners.length;b++)for(var h=this._characterJoiners[b].handler(e),f=0;f<h.length;f++)c._mergeRanges(d,h[f]);this._stringRangesToCellRanges(d,a,l);
return d};c.prototype._stringRangesToCellRanges=function(c,d,b){var a=0,e=!1,h=0,f=c[a];if(f){for(;b<this._terminal.cols;b++){var g=d.getWidth(b),m=d.getString(b).length||k.WHITESPACE_CELL_CHAR.length;if(0!==g){!e&&f[0]<=h&&(f[0]=b,e=!0);if(f[1]<=h){f[1]=b;f=c[++a];if(!f)break;f[0]<=h?(f[0]=b,e=!0):e=!1}h+=m}}f&&(f[1]=this._terminal.cols)}};c._mergeRanges=function(c,d){for(var b=!1,a=0;a<c.length;a++){var e=c[a];if(b){if(d[1]<=e[0])return c[a-1][1]=d[1],c;if(d[1]<=e[1])return c[a-1][1]=Math.max(d[1],
e[1]),c.splice(a,1),c;c.splice(a,1);a--}else{if(d[1]<=e[0])return c.splice(a,0,d),c;if(d[1]<=e[1])return e[0]=Math.min(d[0],e[0]),c;d[0]<e[1]&&(e[0]=Math.min(d[0],e[0]),b=!0)}}b?c[c.length-1][1]=d[1]:c.push(d);return c};return c}();f.CharacterJoinerRegistry=g},{"../core/buffer/BufferLine":29}],40:[function(g,n,f){var c=this&&this.__extends||function(){var c=function(d,b){c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var d in b)b.hasOwnProperty(d)&&
(a[d]=b[d])};return c(d,b)};return function(d,b){function a(){this.constructor=d}c(d,b);d.prototype=null===b?Object.create(b):(a.prototype=b.prototype,new a)}}();Object.defineProperty(f,"__esModule",{value:!0});n=g("./BaseRenderLayer");var k=g("../core/buffer/BufferLine");g=function(e){function d(b,a,d){b=e.call(this,b,"cursor",a,!0,d)||this;b._cell=new k.CellData;b._state={x:null,y:null,isFocused:null,style:null,width:null};b._cursorRenderers={bar:b._renderBarCursor.bind(b),block:b._renderBlockCursor.bind(b),
underline:b._renderUnderlineCursor.bind(b)};return b}c(d,e);d.prototype.resize=function(b,a){e.prototype.resize.call(this,b,a);this._state={x:null,y:null,isFocused:null,style:null,width:null}};d.prototype.reset=function(b){this._clearCursor();this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=null,this.onOptionsChanged(b))};d.prototype.onBlur=function(b){this._cursorBlinkStateManager&&this._cursorBlinkStateManager.pause();b.refresh(b.buffer.y,b.buffer.y)};
d.prototype.onFocus=function(b){this._cursorBlinkStateManager?this._cursorBlinkStateManager.resume(b):b.refresh(b.buffer.y,b.buffer.y)};d.prototype.onOptionsChanged=function(b){var a=this;b.options.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new m(b,function(){a._render(b,!0)})):(this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=null),b.refresh(b.buffer.y,b.buffer.y))};d.prototype.onCursorMove=function(b){this._cursorBlinkStateManager&&
this._cursorBlinkStateManager.restartBlinkAnimation(b)};d.prototype.onGridChanged=function(b,a,d){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(b,!1):this._cursorBlinkStateManager.restartBlinkAnimation(b)};d.prototype._render=function(b,a){if(!b.cursorState||b.cursorHidden)this._clearCursor();else{a=b.buffer.ybase+b.buffer.y;var d=a-b.buffer.ydisp;if(0>d||d>=b.rows)this._clearCursor();else if(b.buffer.lines.get(a).loadCell(b.buffer.x,this._cell),void 0!==this._cell.content)if(b.isFocused)if(this._cursorBlinkStateManager&&
!this._cursorBlinkStateManager.isCursorVisible)this._clearCursor();else{if(this._state){if(this._state.x===b.buffer.x&&this._state.y===d&&this._state.isFocused===b.isFocused&&this._state.style===b.options.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save();this._cursorRenderers[b.options.cursorStyle||"block"](b,b.buffer.x,d,this._cell);this._ctx.restore();this._state.x=b.buffer.x;this._state.y=d;this._state.isFocused=!1;this._state.style=b.options.cursorStyle;
this._state.width=this._cell.getWidth()}else this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._renderBlurCursor(b,b.buffer.x,d,this._cell),this._ctx.restore(),this._state.x=b.buffer.x,this._state.y=d,this._state.isFocused=!1,this._state.style=b.options.cursorStyle,this._state.width=this._cell.getWidth()}};d.prototype._clearCursor=function(){this._state&&(this.clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:null,y:null,isFocused:null,
style:null,width:null})};d.prototype._renderBarCursor=function(b,a,d,c){this._ctx.save();this._ctx.fillStyle=this._colors.cursor.css;this.fillLeftLineAtCell(a,d);this._ctx.restore()};d.prototype._renderBlockCursor=function(b,a,d,c){this._ctx.save();this._ctx.fillStyle=this._colors.cursor.css;this.fillCells(a,d,c.getWidth(),1);this._ctx.fillStyle=this._colors.cursorAccent.css;this.fillCharTrueColor(b,c,a,d);this._ctx.restore()};d.prototype._renderUnderlineCursor=function(b,a,d,c){this._ctx.save();
this._ctx.fillStyle=this._colors.cursor.css;this.fillBottomLineAtCells(a,d);this._ctx.restore()};d.prototype._renderBlurCursor=function(b,a,d,c){this._ctx.save();this._ctx.strokeStyle=this._colors.cursor.css;this.strokeRectAtCell(a,d,c.getWidth(),1);this._ctx.restore()};return d}(n.BaseRenderLayer);f.CursorRenderLayer=g;var m=function(){function c(d,b){this._renderCallback=b;this.isCursorVisible=!0;d.isFocused&&this._restartInterval()}Object.defineProperty(c.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||
this._blinkInterval)},enumerable:!0,configurable:!0});c.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=null);this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=null);this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=null)};c.prototype.restartBlinkAnimation=function(d){var b=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=
!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){b._renderCallback();b._animationFrame=null})))};c.prototype._restartInterval=function(d){var b=this;void 0===d&&(d=600);this._blinkInterval&&window.clearInterval(this._blinkInterval);this._blinkStartTimeout=setTimeout(function(){if(b._animationTimeRestarted){var a=600-(Date.now()-b._animationTimeRestarted);b._animationTimeRestarted=null;if(0<a){b._restartInterval(a);return}}b.isCursorVisible=!1;b._animationFrame=
window.requestAnimationFrame(function(){b._renderCallback();b._animationFrame=null});b._blinkInterval=setInterval(function(){if(b._animationTimeRestarted){var a=600-(Date.now()-b._animationTimeRestarted);b._animationTimeRestarted=null;b._restartInterval(a)}else b.isCursorVisible=!b.isCursorVisible,b._animationFrame=window.requestAnimationFrame(function(){b._renderCallback();b._animationFrame=null})},600)},d)};c.prototype.pause=function(){this.isCursorVisible=!0;this._blinkInterval&&(window.clearInterval(this._blinkInterval),
this._blinkInterval=null);this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=null);this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=null)};c.prototype.resume=function(d){this._animationTimeRestarted=null;this._restartInterval();this.restartBlinkAnimation(d)};return c}()},{"../core/buffer/BufferLine":29,"./BaseRenderLayer":38}],41:[function(g,n,f){Object.defineProperty(f,"__esModule",{value:!0});g=function(){function c(){this.cache=
[]}c.prototype.resize=function(c,f){for(var e=0;e<c;e++){this.cache.length<=e&&this.cache.push([]);for(var d=this.cache[e].length;d<f;d++)this.cache[e].push(null);this.cache[e].length=f}this.cache.length=c};c.prototype.clear=function(){for(var c=0;c<this.cache.length;c++)for(var f=0;f<this.cache[c].length;f++)this.cache[c][f]=null};return c}();f.GridCache=g},{}],42:[function(g,n,f){var c=this&&this.__extends||function(){var c=function(d,b){c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&
function(a,b){a.__proto__=b}||function(a,b){for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d])};return c(d,b)};return function(d,b){function a(){this.constructor=d}c(d,b);d.prototype=null===b?Object.create(b):(a.prototype=b.prototype,new a)}}();Object.defineProperty(f,"__esModule",{value:!0});n=g("./BaseRenderLayer");var k=g("./atlas/Types"),m=g("./atlas/CharAtlasUtils");g=function(e){function d(b,a,d,c){var h=e.call(this,b,"link",a,!0,d)||this;h._state=null;c.linkifier.onLinkHover(function(a){return h._onLinkHover(a)});
c.linkifier.onLinkLeave(function(a){return h._onLinkLeave(a)});return h}c(d,e);d.prototype.resize=function(b,a){e.prototype.resize.call(this,b,a);this._state=null};d.prototype.reset=function(b){this._clearCurrentLink()};d.prototype._clearCurrentLink=function(){if(this._state){this.clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var b=this._state.y2-this._state.y1-1;0<b&&this.clearCells(0,this._state.y1+1,this._state.cols,b);this.clearCells(0,this._state.y2,this._state.x2,
1);this._state=null}};d.prototype._onLinkHover=function(b){b.fg===k.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._colors.background.css:m.is256Color(b.fg)?this._ctx.fillStyle=this._colors.ansi[b.fg].css:this._ctx.fillStyle=this._colors.foreground.css;if(b.y1===b.y2)this.fillBottomLineAtCells(b.x1,b.y1,b.x2-b.x1);else{this.fillBottomLineAtCells(b.x1,b.y1,b.cols-b.x1);for(var a=b.y1+1;a<b.y2;a++)this.fillBottomLineAtCells(0,a,b.cols);this.fillBottomLineAtCells(0,b.y2,b.x2)}this._state=b};d.prototype._onLinkLeave=
function(b){this._clearCurrentLink()};return d}(n.BaseRenderLayer);f.LinkRenderLayer=g},{"./BaseRenderLayer":38,"./atlas/CharAtlasUtils":50,"./atlas/Types":55}],43:[function(g,n,f){var c=this&&this.__extends||function(){var b=function(a,d){b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d])};return b(a,d)};return function(a,d){function c(){this.constructor=a}b(a,d);a.prototype=null===d?Object.create(d):
(c.prototype=d.prototype,new c)}}();Object.defineProperty(f,"__esModule",{value:!0});var k=g("../ui/RenderDebouncer"),m=g("../common/EventEmitter2");n=g("../common/Lifecycle");var e=g("../ui/ScreenDprMonitor"),d=g("../ui/Lifecycle");g=function(b){function a(a,c,f){var h=b.call(this)||this;h._renderer=a;h._rowCount=c;h._isPaused=!1;h._needsFullRefresh=!1;h._canvasWidth=0;h._canvasHeight=0;h._onDimensionsChange=new m.EventEmitter2;h._onRender=new m.EventEmitter2;h._onRefreshRequest=new m.EventEmitter2;
h._renderDebouncer=new k.RenderDebouncer(function(a,b){return h._renderRows(a,b)});h.register(h._renderDebouncer);h._screenDprMonitor=new e.ScreenDprMonitor;h._screenDprMonitor.setListener(function(){return h._renderer.onDevicePixelRatioChange()});h.register(h._screenDprMonitor);h.register(d.addDisposableDomListener(window,"resize",function(){return h._renderer.onDevicePixelRatioChange()}));if("IntersectionObserver"in window){var l=new IntersectionObserver(function(a){return h._onIntersectionChange(a[a.length-
1])},{threshold:0});l.observe(f);h.register({dispose:function(){return l.disconnect()}})}return h}c(a,b);Object.defineProperty(a.prototype,"onDimensionsChange",{get:function(){return this._onDimensionsChange.event},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"onRefreshRequest",{get:function(){return this._onRefreshRequest.event},enumerable:!0,configurable:!0});
Object.defineProperty(a.prototype,"dimensions",{get:function(){return this._renderer.dimensions},enumerable:!0,configurable:!0});a.prototype._onIntersectionChange=function(a){this._isPaused=0===a.intersectionRatio;!this._isPaused&&this._needsFullRefresh&&(this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)};a.prototype.refreshRows=function(a,b){this._isPaused?this._needsFullRefresh=!0:this._renderDebouncer.refresh(a,b,this._rowCount)};a.prototype._renderRows=function(a,b){this._renderer.renderRows(a,
b);this._onRender.fire({start:a,end:b})};a.prototype.resize=function(a,b){this._rowCount=b;this._fireOnCanvasResize()};a.prototype.changeOptions=function(){this._renderer.onOptionsChanged();this._fireOnCanvasResize()};a.prototype._fireOnCanvasResize=function(){this._renderer.dimensions.canvasWidth===this._canvasWidth&&this._renderer.dimensions.canvasHeight===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions)};a.prototype.setRenderer=function(a){this._renderer.dispose();this._renderer=
a};a.prototype._fullRefresh=function(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount)};a.prototype.setColors=function(a){this._renderer.setColors(a);this._fullRefresh()};a.prototype.onDevicePixelRatioChange=function(){this._renderer.onDevicePixelRatioChange()};a.prototype.onResize=function(a,b){this._renderer.onResize(a,b);this._fullRefresh()};a.prototype.onCharSizeChanged=function(){this._renderer.onCharSizeChanged()};a.prototype.onBlur=function(){this._renderer.onBlur()};
a.prototype.onFocus=function(){this._renderer.onFocus()};a.prototype.onSelectionChanged=function(a,b,d){this._renderer.onSelectionChanged(a,b,d)};a.prototype.onCursorMove=function(){this._renderer.onCursorMove()};a.prototype.onOptionsChanged=function(){this._renderer.onOptionsChanged()};a.prototype.clear=function(){this._renderer.clear()};a.prototype.registerCharacterJoiner=function(a){return this._renderer.registerCharacterJoiner(a)};a.prototype.deregisterCharacterJoiner=function(a){return this._renderer.deregisterCharacterJoiner(a)};
return a}(n.Disposable);f.RenderCoordinator=g},{"../common/EventEmitter2":23,"../common/Lifecycle":24,"../ui/Lifecycle":59,"../ui/RenderDebouncer":60,"../ui/ScreenDprMonitor":61}],44:[function(g,n,f){var c=this&&this.__extends||function(){var a=function(b,d){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d])};return a(b,d)};return function(b,d){function c(){this.constructor=b}a(b,d);b.prototype=null===
d?Object.create(d):(c.prototype=d.prototype,new c)}}();Object.defineProperty(f,"__esModule",{value:!0});var k=g("./TextRenderLayer"),m=g("./SelectionRenderLayer"),e=g("./CursorRenderLayer"),d=g("./LinkRenderLayer"),b=g("../renderer/CharacterJoinerRegistry");g=function(a){function f(c,f){var h=a.call(this)||this;h._terminal=c;h._colors=f;f=h._terminal.options.allowTransparency;h._characterJoinerRegistry=new b.CharacterJoinerRegistry(c);h._renderLayers=[new k.TextRenderLayer(h._terminal.screenElement,
0,h._colors,h._characterJoinerRegistry,f),new m.SelectionRenderLayer(h._terminal.screenElement,1,h._colors),new d.LinkRenderLayer(h._terminal.screenElement,2,h._colors,h._terminal),new e.CursorRenderLayer(h._terminal.screenElement,3,h._colors)];h.dimensions={scaledCharWidth:null,scaledCharHeight:null,scaledCellWidth:null,scaledCellHeight:null,scaledCharLeft:null,scaledCharTop:null,scaledCanvasWidth:null,scaledCanvasHeight:null,canvasWidth:null,canvasHeight:null,actualCellWidth:null,actualCellHeight:null};
h._devicePixelRatio=window.devicePixelRatio;h._updateDimensions();h.onOptionsChanged();return h}c(f,a);f.prototype.dispose=function(){a.prototype.dispose.call(this);this._renderLayers.forEach(function(a){return a.dispose()})};f.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._terminal.cols,this._terminal.rows))};f.prototype.setColors=function(a){var b=this;this._colors=a;this._renderLayers.forEach(function(a){a.setColors(b._terminal,
b._colors);a.reset(b._terminal)})};f.prototype.onResize=function(a,b){var d=this;this._updateDimensions();this._renderLayers.forEach(function(a){return a.resize(d._terminal,d.dimensions)});this._terminal.screenElement.style.width=this.dimensions.canvasWidth+"px";this._terminal.screenElement.style.height=this.dimensions.canvasHeight+"px"};f.prototype.onCharSizeChanged=function(){this.onResize(this._terminal.cols,this._terminal.rows)};f.prototype.onBlur=function(){var a=this;this._runOperation(function(b){return b.onBlur(a._terminal)})};
f.prototype.onFocus=function(){var a=this;this._runOperation(function(b){return b.onFocus(a._terminal)})};f.prototype.onSelectionChanged=function(a,b,d){var c=this;void 0===d&&(d=!1);this._runOperation(function(e){return e.onSelectionChanged(c._terminal,a,b,d)})};f.prototype.onCursorMove=function(){var a=this;this._runOperation(function(b){return b.onCursorMove(a._terminal)})};f.prototype.onOptionsChanged=function(){var a=this;this._runOperation(function(b){return b.onOptionsChanged(a._terminal)})};
f.prototype.clear=function(){var a=this;this._runOperation(function(b){return b.reset(a._terminal)})};f.prototype._runOperation=function(a){this._renderLayers.forEach(function(b){return a(b)})};f.prototype.renderRows=function(a,b){var d=this;this._renderLayers.forEach(function(c){return c.onGridChanged(d._terminal,a,b)})};f.prototype._updateDimensions=function(){this._terminal.charMeasure.width&&this._terminal.charMeasure.height&&(this.dimensions.scaledCharWidth=Math.floor(this._terminal.charMeasure.width*
window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._terminal.charMeasure.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._terminal.options.lineHeight),this.dimensions.scaledCharTop=1===this._terminal.options.lineHeight?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._terminal.options.letterSpacing),
this.dimensions.scaledCharLeft=Math.floor(this._terminal.options.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._terminal.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._terminal.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/
this._terminal.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._terminal.cols)};f.prototype.registerCharacterJoiner=function(a){return this._characterJoinerRegistry.registerCharacterJoiner(a)};f.prototype.deregisterCharacterJoiner=function(a){return this._characterJoinerRegistry.deregisterCharacterJoiner(a)};return f}(g("../common/Lifecycle").Disposable);f.Renderer=g},{"../common/Lifecycle":24,"../renderer/CharacterJoinerRegistry":39,"./CursorRenderLayer":40,"./LinkRenderLayer":42,
"./SelectionRenderLayer":45,"./TextRenderLayer":46}],45:[function(g,n,f){var c=this&&this.__extends||function(){var c=function(f,e){c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var a in b)b.hasOwnProperty(a)&&(d[a]=b[a])};return c(f,e)};return function(f,e){function d(){this.constructor=f}c(f,e);f.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();Object.defineProperty(f,"__esModule",{value:!0});g=function(f){function g(c,
d,b){c=f.call(this,c,"selection",d,!0,b)||this;c._clearState();return c}c(g,f);g.prototype._clearState=function(){this._state={start:null,end:null,columnSelectMode:null,ydisp:null}};g.prototype.resize=function(c,d){f.prototype.resize.call(this,c,d);this._clearState()};g.prototype.reset=function(c){this._state.start&&this._state.end&&(this._clearState(),this.clearAll())};g.prototype.onSelectionChanged=function(c,d,b,a){if(this._didStateChange(d,b,a,c.buffer.ydisp))if(this.clearAll(),d&&b){var e=d[1]-
c.buffer.ydisp,f=b[1]-c.buffer.ydisp,g=Math.max(e,0),k=Math.min(f,c.rows-1);g>=c.rows||0>k||(this._ctx.fillStyle=this._colors.selection.css,a?(e=d[0],this.fillCells(e,g,b[0]-e,k-g+1)):(e=e===g?d[0]:0,this.fillCells(e,g,(g===k?b[0]:c.cols)-e,1),this.fillCells(0,g+1,c.cols,Math.max(k-g-1,0)),g!==k&&this.fillCells(0,k,f===k?b[0]:c.cols,1)),this._state.start=[d[0],d[1]],this._state.end=[b[0],b[1]],this._state.columnSelectMode=a,this._state.ydisp=c.buffer.ydisp)}else this._clearState()};g.prototype._didStateChange=
function(c,d,b,a){return!this._areCoordinatesEqual(c,this._state.start)||!this._areCoordinatesEqual(d,this._state.end)||b!==this._state.columnSelectMode||a!==this._state.ydisp};g.prototype._areCoordinatesEqual=function(c,d){return c&&d?c[0]===d[0]&&c[1]===d[1]:!1};return g}(g("./BaseRenderLayer").BaseRenderLayer);f.SelectionRenderLayer=g},{"./BaseRenderLayer":38}],46:[function(g,n,f){var c=this&&this.__extends||function(){var d=function(b,a){d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&
function(a,b){a.__proto__=b}||function(a,b){for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d])};return d(b,a)};return function(b,a){function c(){this.constructor=b}d(b,a);b.prototype=null===a?Object.create(a):(c.prototype=a.prototype,new c)}}();Object.defineProperty(f,"__esModule",{value:!0});var k=g("./GridCache");n=g("./BaseRenderLayer");var m=g("../core/buffer/BufferLine"),e=g("./CharacterJoinerRegistry");g=function(d){function b(a,b,c,e,f){a=d.call(this,a,"text",b,f,c)||this;a._characterOverlapCache=
{};a._workCell=new m.CellData;a._state=new k.GridCache;a._characterJoinerRegistry=e;return a}c(b,d);b.prototype.resize=function(a,b){d.prototype.resize.call(this,a,b);var c=this._getFont(a,!1,!1);if(this._characterWidth!==b.scaledCharWidth||this._characterFont!==c)this._characterWidth=b.scaledCharWidth,this._characterFont=c,this._characterOverlapCache={};this._state.clear();this._state.resize(a.cols,a.rows)};b.prototype.reset=function(a){this._state.clear();this.clearAll()};b.prototype._forEachCell=
function(a,b,d,c,f){for(;b<=d;b++){var h=b+a.buffer.ydisp,g=a.buffer.lines.get(h);h=c?c.getJoinedCharacters(h):[];for(var l=0;l<a.cols;l++){g.loadCell(l,this._workCell);var k=this._workCell,q=!1,r=l;0!==k.getWidth()&&(0<h.length&&l===h[0][0]&&(q=!0,r=h.shift(),k=new e.JoinedCellData(this._workCell,g.translateToString(!0,r[0],r[1]),r[1]-r[0]),r=r[1]-1),!q&&this._isOverlapping(k)&&r<g.length-1&&g.getCodePoint(r+1)===m.NULL_CELL_CODE&&(k.content&=-12582913,k.content|=8388608),f(k,l,b),l=r)}}};b.prototype._drawBackground=
function(a,b,d){var c=this,e=this._ctx,f=a.cols,h=0,g=0,l=null;e.save();this._forEachCell(a,b,d,null,function(a,b,d){var k=null;a.isInverse()?k=a.isFgDefault()?c._colors.foreground.css:a.isFgRGB()?"rgb("+m.AttributeData.toColorRGB(a.getFgColor()).join(",")+")":c._colors.ansi[a.getFgColor()].css:a.isBgRGB()?k="rgb("+m.AttributeData.toColorRGB(a.getBgColor()).join(",")+")":a.isBgPalette()&&(k=c._colors.ansi[a.getBgColor()].css);null===l&&(h=b,g=d);d!==g?(e.fillStyle=l,c.fillCells(h,g,f-h,1),h=b,g=d):
l!==k&&(e.fillStyle=l,c.fillCells(h,g,b-h,1),h=b,g=d);l=k});null!==l&&(e.fillStyle=l,this.fillCells(h,g,f-h,1));e.restore()};b.prototype._drawForeground=function(a,b,d){var c=this;this._forEachCell(a,b,d,this._characterJoinerRegistry,function(b,d,e){if(!b.isInvisible()&&(c.drawChars(a,b,d,e),b.isUnderline())){c._ctx.save();if(b.isInverse())b.isBgDefault()?c._ctx.fillStyle=c._colors.background.css:b.isBgRGB()?c._ctx.fillStyle="rgb("+m.AttributeData.toColorRGB(b.getBgColor()).join(",")+")":c._ctx.fillStyle=
c._colors.ansi[b.getBgColor()].css;else if(b.isFgDefault())c._ctx.fillStyle=c._colors.foreground.css;else if(b.isFgRGB())c._ctx.fillStyle="rgb("+m.AttributeData.toColorRGB(b.getFgColor()).join(",")+")";else{var f=b.getFgColor();a.options.drawBoldTextInBrightColors&&b.isBold()&&8>f&&(f+=8);c._ctx.fillStyle=c._colors.ansi[f].css}c.fillBottomLineAtCells(d,e,b.getWidth());c._ctx.restore()}})};b.prototype.onGridChanged=function(a,b,d){0!==this._state.cache.length&&(this._charAtlas&&this._charAtlas.beginFrame(),
this.clearCells(0,b,a.cols,d-b+1),this._drawBackground(a,b,d),this._drawForeground(a,b,d))};b.prototype.onOptionsChanged=function(a){this.setTransparency(a,a.options.allowTransparency)};b.prototype._isOverlapping=function(a){if(1!==a.getWidth()||256>a.getCode())return!1;a=a.getChars();if(this._characterOverlapCache.hasOwnProperty(a))return this._characterOverlapCache[a];this._ctx.save();this._ctx.font=this._characterFont;var b=Math.floor(this._ctx.measureText(a).width)>this._characterWidth;this._ctx.restore();
return this._characterOverlapCache[a]=b};return b}(n.BaseRenderLayer);f.TextRenderLayer=g},{"../core/buffer/BufferLine":29,"./BaseRenderLayer":38,"./CharacterJoinerRegistry":39,"./GridCache":41}],47:[function(g,n,f){Object.defineProperty(f,"__esModule",{value:!0});g=function(){function c(){this._didWarmUp=!1}c.prototype.dispose=function(){};c.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)};c.prototype._doWarmUp=function(){};c.prototype.beginFrame=function(){};return c}();
f.default=g},{}],48:[function(g,n,f){Object.defineProperty(f,"__esModule",{value:!0});var c=g("./CharAtlasUtils");n=g("./DynamicCharAtlas");var k=g("./NoneCharAtlas");g=g("./StaticCharAtlas");var m={none:k.default,"static":g.default,dynamic:n.default},e=[];f.acquireCharAtlas=function(d,b,a,f){b=c.generateConfig(a,f,d,b);for(a=0;a<e.length;a++){f=e[a];var h=f.ownedBy.indexOf(d);if(0<=h){if(c.configEquals(f.config,b))return f.atlas;1===f.ownedBy.length?(f.atlas.dispose(),e.splice(a,1)):f.ownedBy.splice(h,
1);break}}for(a=0;a<e.length;a++)if(f=e[a],c.configEquals(f.config,b))return f.ownedBy.push(d),f.atlas;d={atlas:new m[d.options.experimentalCharAtlas](document,b),config:b,ownedBy:[d]};e.push(d);return d.atlas};f.removeTerminalFromCache=function(d){for(var b=0;b<e.length;b++){var a=e[b].ownedBy.indexOf(d);if(-1!==a){1===e[b].ownedBy.length?(e[b].atlas.dispose(),e.splice(b,1)):e[b].ownedBy.splice(a,1);break}}}},{"./CharAtlasUtils":50,"./DynamicCharAtlas":51,"./NoneCharAtlas":53,"./StaticCharAtlas":54}],
49:[function(g,n,f){function c(d,b){var a=!0,c=b.rgba>>>24,e=b.rgba>>>16&255;b=b.rgba>>>8&255;for(var f=0;f<d.data.length;f+=4)d.data[f]===c&&d.data[f+1]===e&&d.data[f+2]===b?d.data[f+3]=0:a=!1;return a}function k(d,b){return d+" "+b.fontSize*b.devicePixelRatio+"px "+b.fontFamily}Object.defineProperty(f,"__esModule",{value:!0});var m=g("../../common/Platform"),e=g("./Types");f.generateStaticCharAtlasTexture=function(d,b,a){var f=a.scaledCharWidth+e.CHAR_ATLAS_CELL_SPACING,h=a.scaledCharHeight+e.CHAR_ATLAS_CELL_SPACING;
b=b(255*f,34*h);var g=b.getContext("2d",{alpha:a.allowTransparency});g.fillStyle=a.colors.background.css;g.fillRect(0,0,b.width,b.height);g.save();g.fillStyle=a.colors.foreground.css;g.font=k(a.fontWeight,a);g.textBaseline="middle";for(var r=0;256>r;r++)g.save(),g.beginPath(),g.rect(r*f,0,f,h),g.clip(),g.fillText(String.fromCharCode(r),r*f,h/2),g.restore();g.save();g.font=k(a.fontWeightBold,a);for(r=0;256>r;r++)g.save(),g.beginPath(),g.rect(r*f,h,f,h),g.clip(),g.fillText(String.fromCharCode(r),r*
f,1.5*h),g.restore();g.restore();g.font=k(a.fontWeight,a);for(var n=0;16>n;n++){var p=(n+2)*h;for(r=0;256>r;r++)g.save(),g.beginPath(),g.rect(r*f,p,f,h),g.clip(),g.fillStyle=a.colors.ansi[n].css,g.fillText(String.fromCharCode(r),r*f,p+h/2),g.restore()}g.font=k(a.fontWeightBold,a);for(n=0;16>n;n++)for(p=(n+2+16)*h,r=0;256>r;r++)g.save(),g.beginPath(),g.rect(r*f,p,f,h),g.clip(),g.fillStyle=a.colors.ansi[n].css,g.fillText(String.fromCharCode(r),r*f,p+h/2),g.restore();g.restore();if(!("createImageBitmap"in
d)||m.isFirefox||m.isSafari)return b;f=g.getImageData(0,0,b.width,b.height);c(f,a.colors.background);return d.createImageBitmap(f)};f.clearColor=c},{"../../common/Platform":25,"./Types":55}],50:[function(g,n,f){Object.defineProperty(f,"__esModule",{value:!0});var c=g("../../common/Types");f.generateConfig=function(c,f,e,d){d={foreground:d.foreground,background:d.background,cursor:null,cursorAccent:null,selection:null,ansi:d.ansi.slice(0,16)};return{type:e.options.experimentalCharAtlas,devicePixelRatio:window.devicePixelRatio,
scaledCharWidth:c,scaledCharHeight:f,fontFamily:e.options.fontFamily,fontSize:e.options.fontSize,fontWeight:e.options.fontWeight,fontWeightBold:e.options.fontWeightBold,allowTransparency:e.options.allowTransparency,colors:d}};f.configEquals=function(c,f){for(var e=0;e<c.colors.ansi.length;e++)if(c.colors.ansi[e].rgba!==f.colors.ansi[e].rgba)return!1;return c.type===f.type&&c.devicePixelRatio===f.devicePixelRatio&&c.fontFamily===f.fontFamily&&c.fontSize===f.fontSize&&c.fontWeight===f.fontWeight&&c.fontWeightBold===
f.fontWeightBold&&c.allowTransparency===f.allowTransparency&&c.scaledCharWidth===f.scaledCharWidth&&c.scaledCharHeight===f.scaledCharHeight&&c.colors.foreground===f.colors.foreground&&c.colors.background===f.colors.background};f.is256Color=function(f){return f<c.DEFAULT_COLOR}},{"../../common/Types":27}],51:[function(g,n,f){function c(a){return a.code<<21|a.bg<<12|a.fg<<3|(a.bold?0:4)+(a.dim?0:2)+(a.italic?0:1)}var k=this&&this.__extends||function(){var a=function(b,d){a=Object.setPrototypeOf||{__proto__:[]}instanceof
Array&&function(a,b){a.__proto__=b}||function(a,b){for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d])};return a(b,d)};return function(b,d){function c(){this.constructor=b}a(b,d);b.prototype=null===d?Object.create(d):(c.prototype=d.prototype,new c)}}();Object.defineProperty(f,"__esModule",{value:!0});var m=g("./Types");n=g("./BaseCharAtlas");var e=g("../../ui/ColorManager"),d=g("./CharAtlasGenerator"),b=g("./LRUMap"),a=g("../../common/Platform"),l={css:"rgba(0, 0, 0, 0)",rgba:0};f.getGlyphCacheKey=c;
g=function(f){function h(a,d){var c=f.call(this)||this;c._config=d;c._drawToCacheCount=0;c._glyphsWaitingOnBitmap=[];c._bitmapCommitTimeout=null;c._bitmap=null;c._cacheCanvas=a.createElement("canvas");c._cacheCanvas.width=1024;c._cacheCanvas.height=1024;c._cacheCtx=c._cacheCanvas.getContext("2d",{alpha:!0});a=a.createElement("canvas");a.width=c._config.scaledCharWidth;a.height=c._config.scaledCharHeight;c._tmpCtx=a.getContext("2d",{alpha:c._config.allowTransparency});c._width=Math.floor(1024/c._config.scaledCharWidth);
c._height=Math.floor(1024/c._config.scaledCharHeight);a=c._width*c._height;c._cacheMap=new b.default(a);c._cacheMap.prealloc(a);return c}k(h,f);h.prototype.dispose=function(){null!==this._bitmapCommitTimeout&&(window.clearTimeout(this._bitmapCommitTimeout),this._bitmapCommitTimeout=null)};h.prototype.beginFrame=function(){this._drawToCacheCount=0};h.prototype.draw=function(a,b,d,e){if(32===b.code)return!0;if(!this._canCache(b))return!1;var f=c(b),h=this._cacheMap.get(f);return null!==h&&void 0!==
h?(this._drawFromCache(a,h,d,e),!0):100>this._drawToCacheCount?(h=this._cacheMap.size<this._cacheMap.capacity?this._cacheMap.size:this._cacheMap.peek().index,b=this._drawToCache(b,h),this._cacheMap.set(f,b),this._drawFromCache(a,b,d,e),!0):!1};h.prototype._canCache=function(a){return 256>a.code};h.prototype._toCoordinateX=function(a){return a%this._width*this._config.scaledCharWidth};h.prototype._toCoordinateY=function(a){return Math.floor(a/this._width)*this._config.scaledCharHeight};h.prototype._drawFromCache=
function(a,b,d,c){if(!b.isEmpty){var e=this._toCoordinateX(b.index),f=this._toCoordinateY(b.index);a.drawImage(b.inBitmap?this._bitmap:this._cacheCanvas,e,f,this._config.scaledCharWidth,this._config.scaledCharHeight,d,c,this._config.scaledCharWidth,this._config.scaledCharHeight)}};h.prototype._getColorFromAnsiIndex=function(a){return a<this._config.colors.ansi.length?this._config.colors.ansi[a]:e.DEFAULT_ANSI_COLORS[a]};h.prototype._getBackgroundColor=function(a){return this._config.allowTransparency?
l:a.bg===m.INVERTED_DEFAULT_COLOR?this._config.colors.foreground:256>a.bg?this._getColorFromAnsiIndex(a.bg):this._config.colors.background};h.prototype._getForegroundColor=function(a){return a.fg===m.INVERTED_DEFAULT_COLOR?this._config.colors.background:256>a.fg?this._getColorFromAnsiIndex(a.fg):this._config.colors.foreground};h.prototype._drawToCache=function(a,b){this._drawToCacheCount++;this._tmpCtx.save();var c=this._getBackgroundColor(a);this._tmpCtx.globalCompositeOperation="copy";this._tmpCtx.fillStyle=
c.css;this._tmpCtx.fillRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight);this._tmpCtx.globalCompositeOperation="source-over";this._tmpCtx.font=(a.italic?"italic":"")+" "+(a.bold?this._config.fontWeightBold:this._config.fontWeight)+" "+this._config.fontSize*this._config.devicePixelRatio+"px "+this._config.fontFamily;this._tmpCtx.textBaseline="middle";this._tmpCtx.fillStyle=this._getForegroundColor(a).css;a.dim&&(this._tmpCtx.globalAlpha=m.DIM_OPACITY);this._tmpCtx.fillText(a.chars,
0,this._config.scaledCharHeight/2);this._tmpCtx.restore();a=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight);var e=!1;this._config.allowTransparency||(e=d.clearColor(a,c));c=this._toCoordinateX(b);var f=this._toCoordinateY(b);this._cacheCtx.putImageData(a,c,f);b={index:b,isEmpty:e,inBitmap:!1};this._addGlyphToBitmap(b);return b};h.prototype._addGlyphToBitmap=function(b){var d=this;"createImageBitmap"in window&&!a.isFirefox&&!a.isSafari&&(this._glyphsWaitingOnBitmap.push(b),
null===this._bitmapCommitTimeout&&(this._bitmapCommitTimeout=window.setTimeout(function(){return d._generateBitmap()},100)))};h.prototype._generateBitmap=function(){var a=this,b=this._glyphsWaitingOnBitmap;this._glyphsWaitingOnBitmap=[];window.createImageBitmap(this._cacheCanvas).then(function(d){a._bitmap=d;for(d=0;d<b.length;d++)b[d].inBitmap=!0});this._bitmapCommitTimeout=null};return h}(n.default);f.default=g},{"../../common/Platform":25,"../../ui/ColorManager":58,"./BaseCharAtlas":47,"./CharAtlasGenerator":49,
"./LRUMap":52,"./Types":55}],52:[function(g,n,f){Object.defineProperty(f,"__esModule",{value:!0});g=function(){function c(c){this.capacity=c;this._map={};this._tail=this._head=null;this._nodePool=[];this.size=0}c.prototype._unlinkNode=function(c){var f=c.prev,e=c.next;c===this._head&&(this._head=e);c===this._tail&&(this._tail=f);null!==f&&(f.next=e);null!==e&&(e.prev=f)};c.prototype._appendNode=function(c){var f=this._tail;null!==f&&(f.next=c);c.prev=f;c.next=null;this._tail=c;null===this._head&&
(this._head=c)};c.prototype.prealloc=function(c){for(var f=this._nodePool,e=0;e<c;e++)f.push({prev:null,next:null,key:null,value:null})};c.prototype.get=function(c){c=this._map[c];return void 0!==c?(this._unlinkNode(c),this._appendNode(c),c.value):null};c.prototype.peekValue=function(c){c=this._map[c];return void 0!==c?c.value:null};c.prototype.peek=function(){var c=this._head;return null===c?null:c.value};c.prototype.set=function(c,f){var e=this._map[c];void 0!==e?(e=this._map[c],this._unlinkNode(e),
e.value=f):this.size>=this.capacity?(e=this._head,this._unlinkNode(e),delete this._map[e.key],e.key=c,e.value=f,this._map[c]=e):(e=this._nodePool,0<e.length?(e=e.pop(),e.key=c,e.value=f):e={prev:null,next:null,key:c,value:f},this._map[c]=e,this.size++);this._appendNode(e)};return c}();f.default=g},{}],53:[function(g,n,f){var c=this&&this.__extends||function(){var c=function(f,e){c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,b){c.__proto__=b}||function(c,b){for(var a in b)b.hasOwnProperty(a)&&
(c[a]=b[a])};return c(f,e)};return function(f,e){function d(){this.constructor=f}c(f,e);f.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();Object.defineProperty(f,"__esModule",{value:!0});g=function(f){function g(c,d){return f.call(this)||this}c(g,f);g.prototype.draw=function(c,d,b,a){return!1};return g}(g("./BaseCharAtlas").default);f.default=g},{"./BaseCharAtlas":47}],54:[function(g,n,f){var c=this&&this.__extends||function(){var b=function(a,c){b=Object.setPrototypeOf||{__proto__:[]}instanceof
Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return b(a,c)};return function(a,c){function d(){this.constructor=a}b(a,c);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(f,"__esModule",{value:!0});var k=g("./Types"),m=g("./CharAtlasGenerator");n=g("./BaseCharAtlas");var e=g("./CharAtlasUtils"),d=g("../../common/Types");g=function(b){function a(a,c){var d=b.call(this)||this;d._document=a;d._config=
c;d._canvasFactory=function(a,b){var c=d._document.createElement("canvas");c.width=a;c.height=b;return c};return d}c(a,b);a.prototype._doWarmUp=function(){var a=this,b=m.generateStaticCharAtlasTexture(window,this._canvasFactory,this._config);b instanceof HTMLCanvasElement?this._texture=b:b.then(function(b){a._texture=b})};a.prototype._isCached=function(a,b){b=16>a.fg;var c=a.fg===d.DEFAULT_COLOR,e=a.bg===d.DEFAULT_COLOR;return 256>a.code&&(b||c)&&e&&!a.italic};a.prototype.draw=function(a,b,c,f){if(null===
this._texture||void 0===this._texture)return!1;var h=0;e.is256Color(b.fg)?h=2+b.fg+(b.bold?16:0):b.fg===d.DEFAULT_COLOR&&b.bold&&(h=1);if(!this._isCached(b,h))return!1;a.save();var g=this._config.scaledCharWidth+k.CHAR_ATLAS_CELL_SPACING,l=this._config.scaledCharHeight+k.CHAR_ATLAS_CELL_SPACING;b.dim&&(a.globalAlpha=k.DIM_OPACITY);a.drawImage(this._texture,b.code*g,h*l,g,this._config.scaledCharHeight,c,f,g,this._config.scaledCharHeight);a.restore();return!0};return a}(n.default);f.default=g},{"../../common/Types":27,
"./BaseCharAtlas":47,"./CharAtlasGenerator":49,"./CharAtlasUtils":50,"./Types":55}],55:[function(g,n,f){Object.defineProperty(f,"__esModule",{value:!0});f.INVERTED_DEFAULT_COLOR=257;f.DIM_OPACITY=.5;f.CHAR_ATLAS_CELL_SPACING=1},{}],56:[function(g,n,f){var c=this&&this.__extends||function(){var c=function(b,a){c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return c(b,a)};return function(b,a){function d(){this.constructor=
b}c(b,a);b.prototype=null===a?Object.create(a):(d.prototype=a.prototype,new d)}}();Object.defineProperty(f,"__esModule",{value:!0});var k=g("./DomRendererRowFactory"),m=g("../atlas/Types"),e=1;g=function(d){function b(a,b){var c=d.call(this)||this;c._terminal=a;c._colors=b;c._terminalClass=e++;c._rowElements=[];c._rowContainer=document.createElement("div");c._rowContainer.classList.add("xterm-rows");c._rowContainer.style.lineHeight="normal";c._rowContainer.setAttribute("aria-hidden","true");c._refreshRowElements(c._terminal.cols,
c._terminal.rows);c._selectionContainer=document.createElement("div");c._selectionContainer.classList.add("xterm-selection");c._selectionContainer.setAttribute("aria-hidden","true");c.dimensions={scaledCharWidth:null,scaledCharHeight:null,scaledCellWidth:null,scaledCellHeight:null,scaledCharLeft:null,scaledCharTop:null,scaledCanvasWidth:null,scaledCanvasHeight:null,canvasWidth:null,canvasHeight:null,actualCellWidth:null,actualCellHeight:null};c._updateDimensions();c._injectCss();c._rowFactory=new k.DomRendererRowFactory(a.options,
document);c._terminal.element.classList.add("xterm-dom-renderer-owner-"+c._terminalClass);c._terminal.screenElement.appendChild(c._rowContainer);c._terminal.screenElement.appendChild(c._selectionContainer);c._terminal.linkifier.onLinkHover(function(a){return c._onLinkHover(a)});c._terminal.linkifier.onLinkLeave(function(a){return c._onLinkLeave(a)});return c}c(b,d);b.prototype.dispose=function(){this._terminal.element.classList.remove("xterm-dom-renderer-owner-"+this._terminalClass);this._terminal.screenElement.removeChild(this._rowContainer);
this._terminal.screenElement.removeChild(this._selectionContainer);this._terminal.screenElement.removeChild(this._themeStyleElement);this._terminal.screenElement.removeChild(this._dimensionsStyleElement);d.prototype.dispose.call(this)};b.prototype._updateDimensions=function(){var a=this;this.dimensions.scaledCharWidth=this._terminal.charMeasure.width*window.devicePixelRatio;this.dimensions.scaledCharHeight=Math.ceil(this._terminal.charMeasure.height*window.devicePixelRatio);this.dimensions.scaledCellWidth=
this.dimensions.scaledCharWidth+Math.round(this._terminal.options.letterSpacing);this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._terminal.options.lineHeight);this.dimensions.scaledCharLeft=0;this.dimensions.scaledCharTop=0;this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*this._terminal.cols;this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this._terminal.rows;this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/
window.devicePixelRatio);this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio);this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._terminal.cols;this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._terminal.rows;this._rowElements.forEach(function(b){b.style.width=a.dimensions.canvasWidth+"px";b.style.height=a.dimensions.actualCellHeight+"px";b.style.lineHeight=a.dimensions.actualCellHeight+"px";b.style.overflow="hidden"});
this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._terminal.screenElement.appendChild(this._dimensionsStyleElement));this._dimensionsStyleElement.innerHTML=this._terminalSelector+" .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: "+(this.dimensions.actualCellWidth+"px}");this._selectionContainer.style.height=this._terminal._viewportElement.style.height;this._terminal.screenElement.style.width=this.dimensions.canvasWidth+
"px";this._terminal.screenElement.style.height=this.dimensions.canvasHeight+"px"};b.prototype.setColors=function(a){this._colors=a;this._injectCss()};b.prototype._injectCss=function(){var a=this;this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._terminal.screenElement.appendChild(this._themeStyleElement));var b=this._terminalSelector+" .xterm-rows { color: "+(this._colors.foreground.css+"; background-color: ")+(this._colors.background.css+"; font-family: ")+(this._terminal.options.fontFamily+
"; font-size: ")+(this._terminal.options.fontSize+"px;}");b+=this._terminalSelector+" span:not(."+k.BOLD_CLASS+") { font-weight: "+(this._terminal.options.fontWeight+";}")+(this._terminalSelector+" span."+k.BOLD_CLASS+" { font-weight: ")+(this._terminal.options.fontWeightBold+";}")+(this._terminalSelector+" span."+k.ITALIC_CLASS+" { font-style: italic;}");b+="@keyframes blink { 0% { opacity: 1.0; } 50% { opacity: 0.0; } 100% { opacity: 1.0; }}";b+=this._terminalSelector+" .xterm-rows:not(.xterm-focus) ."+
k.CURSOR_CLASS+" { outline: 1px solid "+(this._colors.cursor.css+"; outline-offset: -1px;}")+(this._terminalSelector+" .xterm-rows.xterm-focus ."+k.CURSOR_CLASS+"."+k.CURSOR_BLINK_CLASS+" { animation: blink 1s step-end infinite;}")+(this._terminalSelector+" .xterm-rows.xterm-focus ."+k.CURSOR_CLASS+"."+k.CURSOR_STYLE_BLOCK_CLASS+" { background-color: ")+(this._colors.cursor.css+"; color: ")+(this._colors.cursorAccent.css+";}")+(this._terminalSelector+" .xterm-rows.xterm-focus ."+k.CURSOR_CLASS+"."+
k.CURSOR_STYLE_BAR_CLASS+" { box-shadow: 1px 0 0 ")+(this._colors.cursor.css+" inset;}")+(this._terminalSelector+" .xterm-rows.xterm-focus ."+k.CURSOR_CLASS+"."+k.CURSOR_STYLE_UNDERLINE_CLASS+" { box-shadow: 0 -1px 0 ")+(this._colors.cursor.css+" inset;}");b+=this._terminalSelector+" .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}"+(this._terminalSelector+" .xterm-selection div { position: absolute; background-color: ")+(this._colors.selection.css+";}");
this._colors.ansi.forEach(function(c,d){b+=a._terminalSelector+" .xterm-fg-"+d+" { color: "+c.css+"; }"+(a._terminalSelector+" .xterm-bg-"+d+" { background-color: "+c.css+"; }")});b+=this._terminalSelector+" .xterm-fg-"+m.INVERTED_DEFAULT_COLOR+" { color: "+this._colors.background.css+"; }"+(this._terminalSelector+" .xterm-bg-"+m.INVERTED_DEFAULT_COLOR+" { background-color: "+this._colors.foreground.css+"; }");this._themeStyleElement.innerHTML=b};b.prototype.onDevicePixelRatioChange=function(){this._updateDimensions()};
b.prototype._refreshRowElements=function(a,b){for(a=this._rowElements.length;a<=b;a++){var c=document.createElement("div");this._rowContainer.appendChild(c);this._rowElements.push(c)}for(;this._rowElements.length>b;)this._rowContainer.removeChild(this._rowElements.pop())};b.prototype.onResize=function(a,b){this._refreshRowElements(a,b);this._updateDimensions()};b.prototype.onCharSizeChanged=function(){this._updateDimensions()};b.prototype.onBlur=function(){this._rowContainer.classList.remove("xterm-focus")};
b.prototype.onFocus=function(){this._rowContainer.classList.add("xterm-focus")};b.prototype.onSelectionChanged=function(a,b,c){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(a&&b){var d=a[1]-this._terminal.buffer.ydisp,e=b[1]-this._terminal.buffer.ydisp,f=Math.max(d,0),h=Math.min(e,this._terminal.rows-1);if(!(f>=this._terminal.rows||0>h)){var g=document.createDocumentFragment();c?g.appendChild(this._createSelectionElement(f,
a[0],b[0],h-f+1)):(g.appendChild(this._createSelectionElement(f,d===f?a[0]:0,f===h?b[0]:this._terminal.cols)),g.appendChild(this._createSelectionElement(f+1,0,this._terminal.cols,h-f-1)),f!==h&&g.appendChild(this._createSelectionElement(h,0,e===h?b[0]:this._terminal.cols)));this._selectionContainer.appendChild(g)}}};b.prototype._createSelectionElement=function(a,b,c,d){void 0===d&&(d=1);var e=document.createElement("div");e.style.height=d*this.dimensions.actualCellHeight+"px";e.style.top=a*this.dimensions.actualCellHeight+
"px";e.style.left=b*this.dimensions.actualCellWidth+"px";e.style.width=this.dimensions.actualCellWidth*(c-b)+"px";return e};b.prototype.onCursorMove=function(){};b.prototype.onOptionsChanged=function(){this._updateDimensions();this._injectCss();this._terminal.refresh(0,this._terminal.rows-1)};b.prototype.clear=function(){this._rowElements.forEach(function(a){return a.innerHTML=""})};b.prototype.renderRows=function(a,b){for(var c=this._terminal,d=c.buffer.ybase+c.buffer.y,e=this._terminal.buffer.x,
f=this._terminal.options.cursorBlink;a<=b;a++){var g=this._rowElements[a];g.innerHTML="";var k=a+c.buffer.ydisp,l=c.buffer.lines.get(k);g.appendChild(this._rowFactory.createRow(l,k===d,c.options.cursorStyle,e,f,this.dimensions.actualCellWidth,c.cols))}};Object.defineProperty(b.prototype,"_terminalSelector",{get:function(){return".xterm-dom-renderer-owner-"+this._terminalClass},enumerable:!0,configurable:!0});b.prototype.registerCharacterJoiner=function(a){return-1};b.prototype.deregisterCharacterJoiner=
function(a){return!1};b.prototype._onLinkHover=function(a){this._setCellUnderline(a.x1,a.x2,a.y1,a.y2,a.cols,!0)};b.prototype._onLinkLeave=function(a){this._setCellUnderline(a.x1,a.x2,a.y1,a.y2,a.cols,!1)};b.prototype._setCellUnderline=function(a,b,c,d,e,f){for(;a!==b||c!==d;){var h=this._rowElements[c];if(!h)break;if(h=h.children[a])h.style.textDecoration=f?"underline":"none";++a>=e&&(a=0,c++)}};return b}(g("../../common/Lifecycle").Disposable);f.DomRenderer=g},{"../../common/Lifecycle":24,"../atlas/Types":55,
"./DomRendererRowFactory":57}],57:[function(g,n,f){Object.defineProperty(f,"__esModule",{value:!0});var c=g("../atlas/Types"),k=g("../../core/buffer/BufferLine");f.BOLD_CLASS="xterm-bold";f.DIM_CLASS="xterm-dim";f.ITALIC_CLASS="xterm-italic";f.UNDERLINE_CLASS="xterm-underline";f.CURSOR_CLASS="xterm-cursor";f.CURSOR_BLINK_CLASS="xterm-cursor-blink";f.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block";f.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar";f.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";g=function(){function g(c,
d){this._terminalOptions=c;this._document=d;this._workCell=new k.CellData}g.prototype.createRow=function(e,d,b,a,g,h,m){var l=this._document.createDocumentFragment(),n=0;for(m=Math.min(e.length,m)-1;0<=m;m--)if(e.loadCell(m,this._workCell).getCode()!==k.NULL_CELL_CODE||d&&m===a){n=m+1;break}for(m=0;m<n;m++){e.loadCell(m,this._workCell);var p=this._workCell.getWidth();if(0!==p){var q=this._document.createElement("span");1<p&&(q.style.width=h*p+"px");if(d&&m===a)switch(q.classList.add(f.CURSOR_CLASS),
g&&q.classList.add(f.CURSOR_BLINK_CLASS),b){case "bar":q.classList.add(f.CURSOR_STYLE_BAR_CLASS);break;case "underline":q.classList.add(f.CURSOR_STYLE_UNDERLINE_CLASS);break;default:q.classList.add(f.CURSOR_STYLE_BLOCK_CLASS)}this._workCell.isBold()&&this._terminalOptions.enableBold&&q.classList.add(f.BOLD_CLASS);this._workCell.isItalic()&&q.classList.add(f.ITALIC_CLASS);this._workCell.isDim()&&q.classList.add(f.DIM_CLASS);this._workCell.isUnderline()&&q.classList.add(f.UNDERLINE_CLASS);q.textContent=
this._workCell.getChars()||k.WHITESPACE_CELL_CHAR;p=this._workCell.isInverse();if(this._workCell.isFgRGB()){var u=q.getAttribute("style")||"";u+=(p?"background-":"")+"color:rgb("+k.AttributeData.toColorRGB(this._workCell.getFgColor()).join(",")+");";q.setAttribute("style",u)}else this._workCell.isFgPalette()?(u=this._workCell.getFgColor(),this._workCell.isBold()&&8>u&&!p&&this._terminalOptions.enableBold&&this._terminalOptions.drawBoldTextInBrightColors&&(u+=8),q.classList.add("xterm-"+(p?"b":"f")+
"g-"+u)):p&&q.classList.add("xterm-bg-"+c.INVERTED_DEFAULT_COLOR);this._workCell.isBgRGB()?(u=q.getAttribute("style")||"",u+=(p?"":"background-")+"color:rgb("+k.AttributeData.toColorRGB(this._workCell.getBgColor()).join(",")+");",q.setAttribute("style",u)):this._workCell.isBgPalette()?q.classList.add("xterm-"+(p?"f":"b")+"g-"+this._workCell.getBgColor()):p&&q.classList.add("xterm-fg-"+c.INVERTED_DEFAULT_COLOR);l.appendChild(q)}}return l};return g}();f.DomRendererRowFactory=g},{"../../core/buffer/BufferLine":29,
"../atlas/Types":55}],58:[function(g,n,f){function c(a){return{css:a,rgba:parseInt(a.slice(1),16)<<8|255}}function k(a){a=a.toString(16);return 2>a.length?"0"+a:a}Object.defineProperty(f,"__esModule",{value:!0});var m=c("#ffffff"),e=c("#000000"),d=c("#ffffff"),b=c("#000000"),a={css:"rgba(255, 255, 255, 0.3)",rgba:4294967159};f.DEFAULT_ANSI_COLORS=function(){for(var a=[c("#2e3436"),c("#cc0000"),c("#4e9a06"),c("#c4a000"),c("#3465a4"),c("#75507b"),c("#06989a"),c("#d3d7cf"),c("#555753"),c("#ef2929"),
c("#8ae234"),c("#fce94f"),c("#729fcf"),c("#ad7fa8"),c("#34e2e2"),c("#eeeeec")],b=[0,95,135,175,215,255],d=0;216>d;d++){var e=b[d/36%6|0],f=b[d/6%6|0],g=b[d%6];a.push({css:"#"+k(e)+k(f)+k(g),rgba:(e<<24|f<<16|g<<8|255)>>>0})}for(d=0;24>d;d++)b=8+10*d,e=k(b),a.push({css:"#"+e+e+e,rgba:(b<<24|b<<16|b<<8|255)>>>0});return a}();g=function(){function c(c,g){this.allowTransparency=g;c=c.createElement("canvas");c.width=1;c.height=1;c=c.getContext("2d");if(!c)throw Error("Could not get rendering context");
this._ctx=c;this._ctx.globalCompositeOperation="copy";this._litmusColor=this._ctx.createLinearGradient(0,0,1,1);this.colors={foreground:m,background:e,cursor:d,cursorAccent:b,selection:a,ansi:f.DEFAULT_ANSI_COLORS.slice()}}c.prototype.setTheme=function(c){void 0===c&&(c={});this.colors.foreground=this._parseColor(c.foreground,m);this.colors.background=this._parseColor(c.background,e);this.colors.cursor=this._parseColor(c.cursor,d,!0);this.colors.cursorAccent=this._parseColor(c.cursorAccent,b,!0);
this.colors.selection=this._parseColor(c.selection,a,!0);this.colors.ansi[0]=this._parseColor(c.black,f.DEFAULT_ANSI_COLORS[0]);this.colors.ansi[1]=this._parseColor(c.red,f.DEFAULT_ANSI_COLORS[1]);this.colors.ansi[2]=this._parseColor(c.green,f.DEFAULT_ANSI_COLORS[2]);this.colors.ansi[3]=this._parseColor(c.yellow,f.DEFAULT_ANSI_COLORS[3]);this.colors.ansi[4]=this._parseColor(c.blue,f.DEFAULT_ANSI_COLORS[4]);this.colors.ansi[5]=this._parseColor(c.magenta,f.DEFAULT_ANSI_COLORS[5]);this.colors.ansi[6]=
this._parseColor(c.cyan,f.DEFAULT_ANSI_COLORS[6]);this.colors.ansi[7]=this._parseColor(c.white,f.DEFAULT_ANSI_COLORS[7]);this.colors.ansi[8]=this._parseColor(c.brightBlack,f.DEFAULT_ANSI_COLORS[8]);this.colors.ansi[9]=this._parseColor(c.brightRed,f.DEFAULT_ANSI_COLORS[9]);this.colors.ansi[10]=this._parseColor(c.brightGreen,f.DEFAULT_ANSI_COLORS[10]);this.colors.ansi[11]=this._parseColor(c.brightYellow,f.DEFAULT_ANSI_COLORS[11]);this.colors.ansi[12]=this._parseColor(c.brightBlue,f.DEFAULT_ANSI_COLORS[12]);
this.colors.ansi[13]=this._parseColor(c.brightMagenta,f.DEFAULT_ANSI_COLORS[13]);this.colors.ansi[14]=this._parseColor(c.brightCyan,f.DEFAULT_ANSI_COLORS[14]);this.colors.ansi[15]=this._parseColor(c.brightWhite,f.DEFAULT_ANSI_COLORS[15])};c.prototype._parseColor=function(a,b,c){void 0===c&&(c=this.allowTransparency);if(void 0===a)return b;this._ctx.fillStyle=this._litmusColor;this._ctx.fillStyle=a;if("string"!==typeof this._ctx.fillStyle)return console.warn("Color: "+a+" is invalid using fallback "+
b.css),b;this._ctx.fillRect(0,0,1,1);var d=this._ctx.getImageData(0,0,1,1).data;return c||255===d[3]?{css:a,rgba:(d[0]<<24|d[1]<<16|d[2]<<8|d[3])>>>0}:(console.warn("Color: "+a+" is using transparency, but allowTransparency is false. Using fallback "+(b.css+".")),b)};return c}();f.ColorManager=g},{}],59:[function(g,n,f){Object.defineProperty(f,"__esModule",{value:!0});f.addDisposableDomListener=function(c,f,g,e){c.addEventListener(f,g,e);return{dispose:function(){g&&c.removeEventListener(f,g,e)}}}},
{}],60:[function(g,n,f){Object.defineProperty(f,"__esModule",{value:!0});g=function(){function c(c){this._renderCallback=c}c.prototype.dispose=function(){this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)};c.prototype.refresh=function(c,f,e){var d=this;this._rowCount=e;c=void 0!==c?c:0;f=void 0!==f?f:this._rowCount-1;this._rowStart=void 0!==this._rowStart?Math.min(this._rowStart,c):c;this._rowEnd=void 0!==this._rowEnd?Math.max(this._rowEnd,f):f;this._animationFrame||
(this._animationFrame=window.requestAnimationFrame(function(){return d._innerRefresh()}))};c.prototype._innerRefresh=function(){void 0!==this._rowStart&&void 0!==this._rowEnd&&void 0!==this._rowCount&&(this._rowStart=Math.max(this._rowStart,0),this._rowEnd=Math.min(this._rowEnd,this._rowCount-1),this._renderCallback(this._rowStart,this._rowEnd),this._animationFrame=this._rowEnd=this._rowStart=void 0)};return c}();f.RenderDebouncer=g},{}],61:[function(g,n,f){var c=this&&this.__extends||function(){var c=
function(f,e){c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,b){c.__proto__=b}||function(c,b){for(var a in b)b.hasOwnProperty(a)&&(c[a]=b[a])};return c(f,e)};return function(f,e){function d(){this.constructor=f}c(f,e);f.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();Object.defineProperty(f,"__esModule",{value:!0});g=function(f){function g(){var c=null!==f&&f.apply(this,arguments)||this;c._currentDevicePixelRatio=window.devicePixelRatio;return c}c(g,f);
g.prototype.setListener=function(c){var d=this;this._listener&&this.clearListener();this._listener=c;this._outerListener=function(){d._listener&&(d._listener(window.devicePixelRatio,d._currentDevicePixelRatio),d._updateDpr())};this._updateDpr()};g.prototype.dispose=function(){f.prototype.dispose.call(this);this.clearListener()};g.prototype._updateDpr=function(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._currentDevicePixelRatio=
window.devicePixelRatio,this._resolutionMediaMatchList=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)"),this._resolutionMediaMatchList.addListener(this._outerListener))};g.prototype.clearListener=function(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._outerListener=this._listener=this._resolutionMediaMatchList=void 0)};return g}(g("../common/Lifecycle").Disposable);f.ScreenDprMonitor=
g},{"../common/Lifecycle":24}],62:[function(g,n,f){Object.defineProperty(f,"__esModule",{value:!0});g=g("./public/Terminal");n.exports=g.Terminal},{"./public/Terminal":37}]},{},[62])(62)});
